{"version":3,"sources":["webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/mint-zero-coupon-bond/mint-zero-coupon-bond.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/mint-zero-coupon-bond/mint-zero-coupon-bond.component.ts","webpack:///buffer (ignored)?8df7","webpack:///util (ignored)","webpack:///src/app/timer.ts","webpack:///util (ignored)?1afb","webpack:///crypto (ignored)","webpack:///src/app/sidebar/sidebar.component.html","webpack:///src/app/sidebar/sidebar.component.ts","webpack:///src/app/graphql.module.ts","webpack:///util (ignored)?4d3b","webpack:///util (ignored)?caa6","webpack:///buffer (ignored)","webpack:///src/app/bonds/bonds.component.html","webpack:///src/app/bonds/bonds.component.ts","webpack:///src/app/watch.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-unstake-zcblp/modal-unstake-zcblp.component.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-unstake-zcblp/modal-unstake-zcblp.component.html","webpack:///src/environments/environment.ts","webpack:///src/app/farming/farming.component.ts","webpack:///src/app/farming/farming.component.html","webpack:///src/app/claim-eth/claim-eth.component.html","webpack:///src/app/claim-eth/claim-eth.component.ts","webpack:///src/app/constants.service.ts","webpack:///src/app/merkle.service.ts","webpack:///src/app/claim-mph/claim-mph.component.html","webpack:///src/app/claim-mph/claim-mph.component.ts","webpack:///src/app/bonds/modal-bond-details/modal-bond-details.component.html","webpack:///src/app/bonds/modal-bond-details/modal-bond-details.component.ts","webpack:///src/app/helpers.service.ts","webpack:///src/app/rewards/rewards.component.ts","webpack:///src/app/rewards/rewards.component.html","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/stats/stats.component.ts","webpack:///src/app/stats/stats.component.html","webpack:///src/app/deposit/modal-deposit/modal-deposit.component.html","webpack:///src/app/deposit/modal-deposit/modal-deposit.component.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/withdraw-zero-coupon-bond/withdraw-zero-coupon-bond.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/withdraw-zero-coupon-bond/withdraw-zero-coupon-bond.component.ts","webpack:///src/app/web3Enabled.ts","webpack:///src/app/farming/modal-unstake-lp/modal-unstake-lp.component.ts","webpack:///src/app/farming/modal-unstake-lp/modal-unstake-lp.component.html","webpack:///src/app/web3.ts","webpack:///src/app/deposit/modal-withdraw/modal-withdraw.component.html","webpack:///src/app/deposit/modal-withdraw/modal-withdraw.component.ts","webpack:///src/app/deposit/deposit.component.html","webpack:///src/app/deposit/deposit.component.ts","webpack:///src/app/app.module.ts","webpack:///src/app/contract.service.ts","webpack:///src/assets/abis sync ^\\.\\/.*\\.json$","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/redeem-zero-coupon-bond/redeem-zero-coupon-bond.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/redeem-zero-coupon-bond/redeem-zero-coupon-bond.component.ts","webpack:///src/app/header/header.component.html","webpack:///src/app/header/header.component.ts","webpack:///src/app/rewards/modal-unstake/modal-unstake.component.ts","webpack:///src/app/rewards/modal-unstake/modal-unstake.component.html","webpack:///src/app/farming/modal-stake-lp/modal-stake-lp.component.ts","webpack:///src/app/farming/modal-stake-lp/modal-stake-lp.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/farm-zero-coupon-bond.component.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/farm-zero-coupon-bond.component.html","webpack:///src/app/wallet.service.ts","webpack:///src/app/sync-warning/sync-warning.component.html","webpack:///src/app/sync-warning/sync-warning.component.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-stake-zcblp/modal-stake-zcblp.component.ts","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-stake-zcblp/modal-stake-zcblp.component.html","webpack:///src/app/rewards/modal-stake/modal-stake.component.ts","webpack:///src/app/rewards/modal-stake/modal-stake.component.html","webpack:///src/app/funding/funding.component.ts","webpack:///src/app/funding/funding.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/modal-zero-coupon-bond-info.component.html","webpack:///src/app/zero-coupon-bonds/modal-zero-coupon-bond-info/modal-zero-coupon-bond-info.component.ts","webpack:///src/app/app-routing.module.ts","webpack:///src/app/zero-coupon-bonds/zero-coupon-bonds.component.html","webpack:///src/app/zero-coupon-bonds/zero-coupon-bonds.component.ts","webpack:///src/app/vesting/vesting.component.html","webpack:///src/app/vesting/vesting.component.ts","webpack:///src/main.ts","webpack:///$_lazy_route_resource lazy namespace object"],"names":["MintZeroCouponBondComponent","apollo","wallet","contract","helpers","constants","DECIMALS","resetData","loadData","connectedEvent","subscribe","disconnectedEvent","mphPriceUSD","eligibleDeposits","mphBalance","connected","getMPHPriceUSD","then","price","mphContract","getNamedContract","methods","balanceOf","userAddress","call","balance","div","PRECISION","maturationTimestamp","Math","floor","zcbEntry","getTime","userID","toLowerCase","queryString","poolInfo","address","query","x","handleData","queryResult","loading","deposits","data","pool","dpool","stablecoinPriceCache","stablecoin","stablecoinPrice","getTokenPriceUSD","userPoolDeposits","deposit","mphDepositorRewardTakeBackMultiplier","realMPHReward","minus","times","mintMPHAmount","interestEarnedToken","applyFeeToInterest","interestEarned","interestEarnedUSD","userPoolDeposit","nftID","amountToken","amount","amountUSD","apy","depositTimestamp","YEAR_IN_SEC","maturationDate","Date","toLocaleString","mintableZCBAmount","plus","push","poolContract","getPool","name","zcbContract","getZeroCouponBondContract","zcbInfo","depositNFT","depositNFTAddress","depositNFTContract","getContract","fractionalDepositName","fractionalDepositSymbol","mphDepositAmount","integerValue","toFixed","mintFunc","mintWithDepositNFT","getApproved","ZERO_ADDR","approvedForNFT","isApprovedForAll","approvedForAll","approveFunc","setApprovalForAll","sendTx","sendTxWithToken","err","displayGenericError","gte","Timer","target","countDirection","days","hours","minutes","seconds","running","timeIntervalRef","setInterval","update","clearInterval","now","stop","DAY","HOUR","MINUTE","abs","toString","app","SidebarComponent","route","watchedModel","readonlyWeb3","mphToken","rewards","watching","watchedAddress","Promise","stakedMPHBalance","all","connect","watchWallet","watch","connectWallet","onSubmit","uri","createApollo","httpLink","link","create","cache","GraphQLModule","provide","useFactory","deps","mockFunder","totalMPHEarned","pools","fundings","recordedFundedDepositAmount","recordedMoneyMarketIncomeIndex","initialFundedDepositAmount","fundedDeficitAmount","totalInterestEarned","mphRewardEarned","totalInterestByPool","totalDeficitFunded","totalRecordedFundedDepositAmount","BondsComponent","modalService","loadUser","loadGlobal","funderID","funder","dpools","funderPools","map","length","getPoolInfoFromAddress","funding","fundingObj","id","fromDepositID","toDepositID","oracleInterestRate","moneyMarketIncomeIndex","mphFunderRewardMultiplier","deficitToken","deficitUSD","currentDepositToken","currentDepositUSD","refundAmountToken","refundAmount","refundAmountUSD","creationTimestamp","funderPool","totalDeficitFundedUSD","totalCurrentDepositUSD","totalInterestUSD","totalInterestEntity","poolDeficitFundedUSD","poolCurrentDepositUSD","poolInterestUSD","allPoolList","Array","mphRewardPerTokenPerSecond","latestFundedDepositID","latestFundedDeposit","latestDeposit","dpoolObj","protocol","stablecoinSymbol","stablecoinDecimals","iconPath","surplus","oneYearInterestRate","unfundedDepositAmount","selectPool","resetUser","resetGlobal","floatingRatePrediction","numDepositsToFund","numFundableDeposits","fundableDeposits","debtToFundToken","debtToFundUSD","amountToEarnOnToken","amountToEarnOnUSD","mphRewardAmount","estimatedProfitToken","estimatedProfitUSD","estimatedROI","loadingCalculator","mphROI","averageMaturationTime","medianMaturationTime","depositListIsCollapsed","selectedFunderPool","selectedFunding","modalRef","open","windowClass","componentInstance","poolIdx","selectedPool","min","poolID","initialMoneyMarketIncomeIndex","parsedDeposit","active","updateNumDepositsToFund","lt","newPrediction","updateEstimatedROI","newNum","slice","getDeposit","depositObj","finalSurplus","finalSurplusAmount","finalSurplusIsNegative","pow","totalMaturationTime","numDepositsWithDebt","timeTillMaturation","DAY_IN_SEC","isNaN","median","values","sort","a","b","half","filter","estimatedFloatingRate","estimatedInterest","depositInterest","timestampSec","toLocaleDateString","getPoolStablecoin","stablecoinPrecision","debtToFund","processWeb3Number","func","fundAll","fundMultiple","error","selectedPoolHasDebt","gt","Watch","ModalUnstakeZCBLPComponent","activeModal","setUnstakeAmount","stakedTokenBalance","unstakeAmount","newStakedTokenPoolProportion","newRewardPerDay","totalStakedTokenBalance","totalRewardPerSecond","farmAddress","withdraw","dismiss","unstake","environment","production","FarmingComponent","PERIOD","BLOCK_TIME_IN_SEC","sushiMasterChef","SUSHI_MASTERCHEF","yflinkStaking","LINKSWAP_STAKING","bancorLiquidityProtectionStats","BANCOR_LP_STATS","bancorStaking","BANCOR_STAKING_REWARDS","bancorStakingStore","BANCOR_STAKING_REWARDS_STORE","totalSupply","totalStakedMPHBalance","rewardRate","rewardPerMPHPerSecond","isZero","periodFinish","endTime","rewardStartTime","rewardEndTime","getMPHLPPriceUSD","mphLPPriceUSD","secondROI","yearlyROI","monthlyROI","MONTH_IN_SEC","weeklyROI","WEEK_IN_SEC","dailyROI","sushiLPToken","getERC20","SUSHI_LP","SUSHI_MPH_ONSEN_ID","sushiPoolInfo","sushiTotalStakedLPBalance","sushiPerBlock","allocPoint","totalAllocPoint","sushiTotalRewardPerSecond","sushiRewardPerLPPerSecond","SUSHI","sushiPriceUSD","getLPPriceUSD","sushiLPPriceUSD","sushiSecondROI","sushiYearlyROI","sushiMonthlyROI","sushiWeeklyROI","sushiDailyROI","totalReserveAmount","BANCOR_MPHBNT_POOL","MPH","bancorTotalStakedMPH","BNT","bancorTotalStakedBNT","poolProgram","bancorTotalRewardPerSecond","bancorRewardPerMPHPerSecond","bancorRewardPerBNTPerSecond","bntPriceUSD","bancorMPHSecondROI","bancorMPHYearlyROI","bancorBNTSecondROI","bancorBNTYearlyROI","earned","claimableRewards","stakedMPHPoolProportion","rewardPerDay","userInfo","sushiUserInfo","pendingSushi","sushiClaimableRewards","sushiStakedLPBalance","sushiStakedLPPoolProportion","sushiRewardPerDay","totalProviderAmount","bancorStakedMPHBalance","bancorStakedBNTBalance","pendingPoolRewards","bancorClaimableRewards","bancorStakedMPHPoolProportion","bancorStakedBNTPoolProportion","bancorMPHRewardPerDay","bancorBNTRewardPerDay","bancorTotalRewardPerDay","exit","getReward","openStakeModal","openUnstakeModal","unstakeAndClaim","claim","ClaimETHComponent","merkle","getETHClaimForAddress","claimAmount","distributor","getETHMerkleDistributor","isClaimed","index","claimed","proof","ConstantsService","WETH_ADDR","GOV_TREASURY","DEV_WALLET","COMPOUND_COMPTROLLER","COMP","FARM","DUMPER","MPH_MERKLE_DISTRIBUTOR","GRAPHQL_ENDPOINT","SUBGRAPH_SYNC_WARNING_THRESHOLD","YFLINK","LINKSWAP_LP","MerkleService","ETH_MERKLE_DISTRIBUTOR","merkleTree","checksumAddress","utils","toChecksumAddress","claims","web3","abi","eth","Contract","ClaimMPHComponent","getMPHClaimForAddress","getMPHMerkleDistributor","ModalBondDetailsComponent","roi","toFormat","newDeposits","newTotalAmountMulTime","newTotalMPHReward","mphRewardTimeComponent","funderMPHReward","fundingInterestPaid","fundingRefundAmount","interestAccumulated","interestFromLeftoverDeposits","totalAmountMulTime","totalMPHReward","updateFloatingRatePrediction","estimatedRemainingEarnings","cost","tokenPrice","HelpersService","apiStr","httpsGet","rawResult","prices","number","cacheMaxAge","fetch","headers","request","json","uniswapPair","getReserves","reservesObj","mphReserve","_reserve0","ethReserve","_reserve1","priceInETH","ethPriceInUSD","lpTotalSupply","lpTokenAddress","token0","token1","reserve0","reserve1","token0PriceInUSD","token1PriceInUSD","baseTokenAddress","baseTokenReserve","baseTokenPriceInUSD","totalValueLocked","rawInterestAmount","interestFee","rawDepositAmount","depositFee","RewardsComponent","stakeBalance","weekInSeconds","rewardPerWeek","loadRewardAccumulationStats","mph","rewardPerSecond","totalHistoricalReward","protocolFeesUSD","compRewardsToken","compRewardsUSD","farmRewardsToken","farmRewardsUSD","allPools","getPoolInfoList","countedStablecoinMap","poolStablecoin","poolFeesToken","compoundPools","compoundLens","compToken","getCompBalanceMetadataExt","moneyMarket","allocated","rewardUnclaimed","rewardClaimed","rewardInDumper","compPriceUSD","harvestPools","farmToken","stakingPool","getRewards","farmPriceUSD","openUntakeModal","AppComponent","sanitizer","title","themeName","themeURL","getThemeURL","themes","storedThemeName","window","localStorage","getItem","newThemeName","setItem","bypassSecurityTrustResourceUrl","StatsComponent","mphTotalSupply","mphStakedPercentage","mphCirculatingSupply","getBalance","accountsToUpdate","getNamedContractAddress","account","accountBalances","totalDepositUSD","poolDepositUSD","totalActiveDeposit","totalInterestPaid","mphTotalHistoricalReward","ModalDepositComponent","DEPOSIT_DELAY","DEPOSIT_PERIOD_PRESETS","poolList","defaultPoolName","depositTokenBalance","depositTimeInDays","depositAmount","depositAmountUSD","interestAmountToken","interestAmountUSD","mphTakeBackAmount","minDepositAmount","maxDepositAmount","minDepositPeriod","maxDepositPeriod","mphAPY","tempMPHAPY","mphDepositorRewardMintMultiplier","shouldDisplayZap","selectedDepositToken","zapDepositTokens","poolName","selectedPoolInfo","getPoolInfo","concat","MinDepositAmount","MaxDepositAmount","ceil","MinDepositPeriod","MaxDepositPeriod","updateAPY","tokenSymbol","tokenAddress","getZapDepositTokenAddress","token","decimals","tokenDecimals","tokenPrecision","timeInDays","depositTime","calculateInterestAmount","rawInterestAmountToken","rawInterestAmountUSD","normalDeposit","zapCurveDeposit","slippage","funcZapIn","ZapIn","curveSwapAddress","from","value","curveOutputValue","minOutputTokenAmount","Error","sendTxWithValue","receipt","outputAmount","Object","keys","events","eventKey","event","raw","funcDeposit","approveToken","lte","setDepositAmount","setMaxDepositAmount","setDepositTime","mockData","fractionalDeposits","fundingID","WithdrawZeroCouponBondComponent","stablecoinPriceUSD","activeDeposits","loadActiveDeposits","showAllDeposits","zeroCouponBondID","parsedDeposits","rawDeposit","unlockStablecoinAmount","unlockMPHAmount","zeroCouponBondContract","redeemFractionalDepositShares","Web3Enabled","blocknativeAPIKey","infuraKey","portisAPIKey","fortmaticKey","alchemyEndpoint","alchemyWSEndpoint","networkID","state","provider","onConnected","onError","isStartupMode","assistInstance","genericMobileWalletConfig","mobile","desktop","preferred","type","iconSrc","getProviderName","createModernProviderInterface","createLegacyProviderInterface","currentProvider","result","enable","resolve","reject","wallets","walletName","rpc","networkId","rpcUrl","appUrl","email","appName","appLogoUrl","apiKey","walletChecks","checkName","walletSelectConfig","heading","description","bncAssistConfig","dappId","darkMode","hideBranding","subscriptions","doNothing","network","walletSelect","walletCheck","previouslySelectedWallet","selectedWallet","getState","ready","notifyInstance","config","val","_onError","estimateGas","_onTxHash","_onReceipt","gasLimit","send","gas","on","hash","emitter","e","contains","to","maxAllowance","allowance","approve","errorMessage","JSON","parse","message","indexOf","originalError","notification","eventCode","ModalUnstakeLPComponent","newStakedMPHPoolProportion","WEB3","providedIn","factory","givenProvider","ModalWithdrawComponent","userDeposit","locked","mphMinter","mphAmount","earlyWithdraw","mockUser","takeBackMPHAmount","totalDeposits","DepositComponent","user","totalMPHPaidBack","userPools","countdownTimer","start","userPool","totalDepositByPool","totalDepositEntity","totalDepositToken","aName","bName","poolInfoList","openDepositModal","AppModule","ContractService","abiName","find","getPoolAddress","getPoolStablecoinAddress","symbol","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","webpackContextKeys","module","exports","RedeemZeroCouponBondComponent","globalRedeemableAmount","redeemAmount","userBalance","redeemStablecoin","HeaderComponent","totalStakedMPHLPBalance","farmingValueLocked","stakedSushiLPToken","sushiMphLPPriceUSD","sushiFarmingValueLocked","bancorFarmingValueLocked","depositValueLocked","ModalUnstakeComponent","newRewardPerWeek","ModalStakeLPComponent","lpToken","setStakeAmount","stakeAmount","stake","options","FarmZeroCouponBondComponent","rewardPerStakeTokenPerSecond","starttime","startTime","rewardTokenPriceUSD","getZCBLPPriceUSD","sushiSwapPair","sushiSwapPairBaseTokenAddress","stakeTokenPriceUSD","stakedTokenPoolProportion","WalletService","_onConnected","emit","SyncWarningComponent","syncBlockNumber","_meta","block","getBlockNumber","latestBlockNumber","ModalStakeZCBLPComponent","stakeTokenBalance","ModalStakeComponent","FundingComponent","ModalZeroCouponBondInfoComponent","routes","path","component","pathMatch","AppRoutingModule","forRoot","relativeLinkResolution","ZeroCouponBondsComponent","zcbPoolNameList","getZeroCouponBondPoolNameList","selectedPoolZCBList","getZeroCouponBondPool","totalSupplyUSD","userBalanceUSD","priceInUSD","impliedInterestRate","mature","getZeroCouponBondPriceUSD","computeImpliedInterestRate","zcbList","bond","pair","NaN","baseToken","baseTokenPrecision","bondReserve","bondPriceInBaseToken","underlyingPrice","secondsToMaturation","vestPeriodInSeconds","withdrawnAmount","VestingComponent","vests","vestList","vest","fullyVestTimestamp","vestObj","split","vesting","withdrawVested","getIdxOfVest","bootstrapModule","console","webpackEmptyAsyncContext"],"mappings":"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,aAAxB;;AACzD;;AAGA;;AAGA;;AAGF;;AACA;;AACE;;AACF;;AACA;;AAEE;;AAQA;;AAQA;;AAGA;;AAGA;;AAA0B;AAAA,qBAAY,IAAAC,QAAA,EAAZ;AAAsB,aAAtB;;AACxB;;AACE;;AAGC;AAAA;AAAA;;AAHD;;AAIC;;AACH;;AACA;;AACA;;AACF;;AACF;;AACF;;AACF;;AACF;;AAGA;;AAEE;;AACE;;AACE;;AACE;;AACA;;AAA6B;;AAAK;;AACpC;;AAGA;;AACE;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AAAS;;AACP;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACF;;AACA;;AACE;;AACE;;AACE;;AAGE;;AACF;;AACF;;AACA;;AACE;;AAGE;;AACF;;AACF;;AACA;;AACE;;AAGE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AACF;;AACF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;AAAA;AAAA;ACjB7B;;AACE;;AAGE;;AACE;;AACE;;AACE;;AAAiB;;AAA0C;;AAC3D;;AAA4C;;AAEE;;AAC1C;;AAAK;;AACP;;AAAI;;AACN;;AACE;;AACE;;AAEE;;AACE;;AACA;;AAEE;;AACF;;AACF;;AAEA;;AACE;;AACF;;AACA;;AACE;;AAEF;;AACA;;AAAwD;AAAA,qBAAS,IAAA/F,cAAA,EAAT;AAAyB,aAAzB;;AACtD;;AAAkD;;AACpD;;AACA;;AAAwD;AAAA,qBAAS,IAAAgI,eAAA,EAAT;AAA0B,aAA1B;;AACtD;;AAAgD;;AAClD;;AACA;;AAAwD;AAAA,qBAAS,IAAA9H,eAAA,EAAT;AAA0B,aAA1B;;AAEtD;;AAAgD;;AAClD;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACE;;AACA;;AAEE;;AACF;;AACF;;AAEA;;AACE;;AACF;;AACA;;AAAiC;;AAAwC;;AACzE;;AAAwD;AAAA,qBAAS,IAAAC,KAAA,EAAT;AAAgB,aAAhB;;AACtD;;AAAgD;;AAClD;;AACF;;AACF;;AACF;;AAEA;;AACE;;AACE;;AAEE;;AACE;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAuB;;AAAkB;;AAC3C;;AACA;;AACE;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAuB;;AAA2B;;AACpD;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAuB;;AAAqB;;AAC9C;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAuB;;AAAY;;AACrC;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AAAuB;;AAA0C;;AACnE;;AACA;;AACE;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AAEE;;AACE;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AAAuB;;AAAM;;AAC/B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AACA;;AACE;;AACE;;AAAiD;;AAAuB;;AACxE;;AACE;;AAMF;;AACF;;AACA;;AACE;;AAA8B;;AAAkB;;AAChD;;AACE;;AAEE;AAAA,qBAAS,IAAAC,cAAA,qBAAT;AAA4C,aAA5C;;AAFF;;AAGA;;AAAsD;;AAAI;;AAC5D;;AACA;;AACE;;AAEF;;AAGF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AAAQ;;AAAc;;AACtB;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAA4C;;AACX;;AACjC;;AAAyB;;AAEc;;AACvC;;AACA;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAAmB;;AAC3B;;AAEE;;AACF;;AACF;;AACA;;AACE;;AAA4C;;AAA6E;;AACzH;;AAAyB;;AACc;;AACzC;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAAS;;AACjB;;AAEE;;AACF;;AACF;;AACA;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAAyD;;AACjE;;AAEE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAmD;;AACrD;;AAAyB;;AAAmC;;AAC9D;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAA0B;;AAClC;;AAEE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAqD;;AACvD;;AAAyB;;AAAqC;;AAChE;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAAO;;AACf;;AAEE;;AACF;;AACF;;AACA;;AACE;;AACF;;AACF;;AACA;;AACE;;AACE;;AAAQ;;AAAmB;;AAC3B;;AAEE;;AACF;;AACF;;AACA;;AACE;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AAAkD;AAAA,qBAAS,IAAApjB,OAAA,EAAT;AAAkB,aAAlB;;AAChD;;AACF;;AACF;;AACF;;AACF;;AACF;;AACF;;AACA;;AACE;;AACE;;AACE;;AACE;;AACE;;AACE;;AAEE;;AACE;;AACF;;AAEF;;AACA;;AAGE;;AACE;;AAEF;;AAEF;;AACF;;AACF;;AACA;;AACE;;AACE;;AAEE;;AACE;;AACF;;AAEF;;AACA;;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","file":"main-es5.js","sourcesContent":["<div class=\"row px-4 no-gutters\">\n  <div class=\"col\">\n    <h2>How it works</h2>\n    <p class=\"text-white\">\n      If you have a deposit in the {{poolInfo.protocol}} {{poolInfo.stablecoinSymbol}} pool whose maturation date is on\n      or\n      before that of this zero coupon bond, then you can use the deposit to mint this zero coupon bond.\n    </p>\n    <p class=\"text-white\">\n      You will need to deposit\n      all of the MPH rewards you received from the deposit. When the deposit is\n      mature, part of the deposited MPH will be used to pay for withdrawing the deposit, and the remaining MPH will be\n      returned to you.\n    </p>\n    <p class=\"text-white mb-4\">\n      Once you've used your deposit to mint zero coupon bonds, you will give up your ownership of the deposit, meaning\n      you\n      cannot\n      withdraw it early or trade its NFT. The NFT will be returned to you after the deposit is mature & withdrawn.\n    </p>\n  </div>\n</div>\n<div class=\"row justify-content-center\">\n  <ng-container *ngIf=\"zcbEntry.mature\">\n    <h3 class=\"glowing\">This zero coupon bond is already mature.</h3>\n  </ng-container>\n  <ng-container *ngIf=\"!zcbEntry.mature\">\n    <ng-container *ngIf=\"eligibleDeposits.length == 0\">\n      <h3 class=\"glowing\">You don't have any deposits that can be used for minting this zero coupon bond.</h3>\n    </ng-container>\n    <ng-container *ngIf=\"eligibleDeposits.length > 0\">\n      <table class=\"table table-sm card-table\">\n        <thead>\n          <tr>\n            <th class=\"text-dark\">\n              #\n            </th>\n            <th class=\"text-dark\">\n              Maturation Date\n            </th>\n            <th class=\"text-dark\">\n              Deposit Amount\n            </th>\n            <th class=\"text-dark\">\n              Required MPH Deposit Amount\n            </th>\n            <th class=\"text-dark\">\n              MPH to Receive Upon Maturation\n            </th>\n            <th class=\"text-dark\">\n              Mintable Zero Coupon Bond\n            </th>\n            <th class=\"text-dark\">\n            </th>\n          </tr>\n        </thead>\n        <tbody class=\"list\">\n          <tr *ngFor=\"let deposit of eligibleDeposits\">\n            <td>\n              <h4 class=\"mb-0\">#{{deposit.nftID}}</h4>\n            </td>\n            <td>\n              <h4 class=\"mb-1 font-weight-normal glowing\">{{deposit.maturationDate}}</h4>\n            </td>\n            <td>\n              <h4 class=\"mb-1 font-weight-normal glowing\">${{deposit.amountUSD.toFormat(DECIMALS)}}</h4>\n              <div class=\"text-white d-block\">{{deposit.amountToken.toFormat(DECIMALS)}}\n                {{poolInfo.stablecoinSymbol}}</div>\n              <div class=\"text-white\">@ {{deposit.apy.toFormat(DECIMALS)}}% fixed APY</div>\n            </td>\n            <td>\n              <h4 class=\"mb-1 font-weight-normal glowing\">\n                ${{deposit.mintMPHAmount.times(mphPriceUSD).toFormat(DECIMALS)}}\n              </h4>\n              <span class=\"text-white d-block\">{{deposit.mintMPHAmount.toFormat(DECIMALS)}} MPH</span>\n            </td>\n            <td>\n              <h4 class=\"mb-1 font-weight-normal glowing\">\n                ${{deposit.realMPHReward.times(mphPriceUSD).toFormat(DECIMALS)}}\n              </h4>\n              <span class=\"text-white d-block\">{{deposit.realMPHReward.toFormat(DECIMALS)}} MPH</span>\n            </td>\n            <td>\n              <h4 class=\"mb-1 font-weight-normal glowing\">{{deposit.mintableZCBAmount.toFormat(DECIMALS)}} ZCB</h4>\n            </td>\n            <td class=\"text-right\">\n              <!-- Button -->\n              <button type=\"button\" class=\"card-link small small px-1\" (click)=\"mint(deposit)\"\n                [disabled]=\"!canContinue(deposit)\">\n                <i class=\"fe fe-dollar-sign mr-2 align-bottom\"></i>\n                Mint\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </ng-container>\n  </ng-container>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport gql from 'graphql-tag';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService, PoolInfo } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from '../../zero-coupon-bonds.component';\n\n@Component({\n  selector: 'app-mint-zero-coupon-bond',\n  templateUrl: './mint-zero-coupon-bond.component.html',\n  styleUrls: ['./mint-zero-coupon-bond.component.css']\n})\nexport class MintZeroCouponBondComponent implements OnInit {\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  @Input() poolInfo: PoolInfo;\n  DECIMALS = 2;\n  mphPriceUSD: BigNumber;\n  eligibleDeposits: UserDeposit[];\n  mphBalance: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  resetData(): void {\n    this.mphPriceUSD = new BigNumber(0);\n    this.eligibleDeposits = [];\n    this.mphBalance = new BigNumber(0);\n  }\n\n  async loadData() {\n    if (!this.wallet.connected) {\n      return;\n    }\n\n    await this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n\n    const mphContract = this.contract.getNamedContract('MPHToken');\n    mphContract.methods.balanceOf(this.wallet.userAddress).call().then((balance) => this.mphBalance = new BigNumber(balance).div(this.constants.PRECISION));\n\n    const maturationTimestamp = Math.floor(this.zcbEntry.maturationTimestamp.getTime() / 1e3);\n\n    const userID = this.wallet.userAddress.toLowerCase();\n    const queryString = gql`\n      {\n        deposits(where: { pool: \"${this.poolInfo.address.toLowerCase()}\", user: \"${userID}\", active: true, maturationTimestamp_lte: \"${maturationTimestamp}\" }, orderBy: nftID) {\n          nftID\n          amount\n          depositTimestamp\n          maturationTimestamp\n          interestEarned\n          mintMPHAmount\n        }\n        dpool(id: \"${this.poolInfo.address.toLowerCase()}\") {\n          mphDepositorRewardTakeBackMultiplier\n        }\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const deposits = queryResult.data.deposits;\n      const pool = queryResult.data.dpool;\n      if (deposits && pool) {\n        let stablecoinPriceCache = {};\n        const stablecoin = this.poolInfo.stablecoin.toLowerCase();\n        let stablecoinPrice = stablecoinPriceCache[stablecoin];\n        if (!stablecoinPrice) {\n          stablecoinPrice = await this.helpers.getTokenPriceUSD(stablecoin);\n          stablecoinPriceCache[stablecoin] = stablecoinPrice;\n        }\n        const userPoolDeposits: Array<UserDeposit> = [];\n        for (const deposit of deposits) {\n          // compute MPH APY\n          let mphDepositorRewardTakeBackMultiplier = new BigNumber(pool.mphDepositorRewardTakeBackMultiplier);\n          const realMPHReward = new BigNumber(1).minus(mphDepositorRewardTakeBackMultiplier).times(deposit.mintMPHAmount);\n\n          // compute interest\n          const interestEarnedToken = this.helpers.applyFeeToInterest(deposit.interestEarned, this.poolInfo);\n          const interestEarnedUSD = interestEarnedToken.times(stablecoinPrice);\n\n          const userPoolDeposit: UserDeposit = {\n            nftID: deposit.nftID,\n            amountToken: new BigNumber(deposit.amount),\n            amountUSD: new BigNumber(deposit.amount).times(stablecoinPrice),\n            apy: interestEarnedToken.div(deposit.amount).div(deposit.maturationTimestamp - deposit.depositTimestamp).times(this.constants.YEAR_IN_SEC).times(100),\n            maturationDate: new Date(+deposit.maturationTimestamp * 1e3).toLocaleString(),\n            interestEarnedToken,\n            interestEarnedUSD,\n            mintMPHAmount: new BigNumber(deposit.mintMPHAmount),\n            realMPHReward: realMPHReward,\n            mintableZCBAmount: new BigNumber(deposit.amount).plus(interestEarnedToken)\n          }\n          userPoolDeposits.push(userPoolDeposit);\n        }\n        this.eligibleDeposits = userPoolDeposits;\n      }\n    }\n  }\n\n  async mint(deposit: UserDeposit) {\n    const poolContract = this.contract.getPool(this.poolInfo.name);\n    const zcbContract = this.contract.getZeroCouponBondContract(this.zcbEntry.zcbInfo.address);\n    const mphContract = this.contract.getNamedContract('MPHToken');\n    const depositNFTAddress = await poolContract.methods.depositNFT().call();\n    const depositNFTContract = this.contract.getContract(depositNFTAddress, 'NFT');\n\n    const fractionalDepositName = `88mph Fractional Deposit`;\n    const fractionalDepositSymbol = `88MPH-FD`;\n    const mphDepositAmount = deposit.mintMPHAmount.times(this.constants.PRECISION).integerValue().toFixed();\n    const mintFunc = zcbContract.methods.mintWithDepositNFT(deposit.nftID, fractionalDepositName, fractionalDepositSymbol);\n\n    // approve deposit NFT\n    const approvedForNFT = (await depositNFTContract.methods.getApproved(deposit.nftID).call() !== this.constants.ZERO_ADDR);\n    const approvedForAll = await depositNFTContract.methods.isApprovedForAll(this.wallet.userAddress, this.zcbEntry.zcbInfo.address).call();\n    if (!approvedForAll && !approvedForNFT) {\n      // need approval\n      const approveFunc = depositNFTContract.methods.setApprovalForAll(this.zcbEntry.zcbInfo.address, true);\n      this.wallet.sendTx(approveFunc, () => { }, () => {\n        // mint with deposit NFT\n        this.wallet.sendTxWithToken(mintFunc, mphContract, this.zcbEntry.zcbInfo.address, mphDepositAmount, () => { }, () => { }, (err) => { this.wallet.displayGenericError(err) })\n      }, (err) => { this.wallet.displayGenericError(err) });\n      return;\n    }\n\n    // mint with deposit NFT\n    this.wallet.sendTxWithToken(mintFunc, mphContract, this.zcbEntry.zcbInfo.address, mphDepositAmount, () => { }, () => { }, (err) => { this.wallet.displayGenericError(err) })\n  }\n\n  canContinue(deposit: UserDeposit) {\n    return this.wallet.connected && this.mphBalance.gte(deposit.mintMPHAmount);\n  }\n}\n\ninterface QueryResult {\n  deposits: {\n    nftID: number;\n    amount: number;\n    depositTimestamp: number;\n    maturationTimestamp: number;\n    interestEarned: number;\n    mintMPHAmount: number;\n  }[];\n  dpool: {\n    mphDepositorRewardTakeBackMultiplier: number;\n  }\n}\n\ninterface UserDeposit {\n  nftID: number;\n  amountToken: BigNumber;\n  amountUSD: BigNumber;\n  apy: BigNumber;\n  maturationDate: string;\n  interestEarnedToken: BigNumber;\n  interestEarnedUSD: BigNumber;\n  mintMPHAmount: BigNumber;\n  realMPHReward: BigNumber;\n  mintableZCBAmount: BigNumber;\n}","/* (ignored) */","/* (ignored) */","export class Timer {\n  target: number;\n  countDirection: 'down' | 'up';\n  days: string;\n  hours: string;\n  minutes: string;\n  seconds: string;\n  running: boolean;\n  timeIntervalRef: NodeJS.Timeout;\n\n  constructor(target: number, countDirection: 'down' | 'up') {\n    this.target = target;\n    this.countDirection = countDirection;\n    this.days = '--';\n    this.hours = '--';\n    this.minutes = '--';\n    this.seconds = '--';\n    this.running = false;\n  }\n\n  start() {\n    this.running = true;\n    this.timeIntervalRef = setInterval(() => {\n      this.update();\n    }, 1000);\n  }\n\n  stop() {\n    this.running = false;\n    clearInterval(this.timeIntervalRef);\n  }\n\n  update() {\n    if ((this.countDirection === 'down' && Date.now() / 1e3 > this.target)\n      || (this.countDirection === 'up' && Date.now() / 1e3 < this.target)) {\n      this.stop();\n      return;\n    }\n\n    const DAY = 24 * 60 * 60;\n    const HOUR = 60 * 60;\n    const MINUTE = 60;\n    const now = Math.floor(Date.now() / 1e3);\n    let days = Math.floor(Math.abs((now - this.target) / DAY)).toString();\n    let hours = Math.floor(Math.abs((now - this.target) % DAY / HOUR)).toString();\n    let minutes = Math.floor(Math.abs((now - this.target) % HOUR / MINUTE)).toString();\n    let seconds = Math.floor(Math.abs((now - this.target) % MINUTE)).toString();\n\n    this.days = days;\n    this.hours = hours;\n    this.minutes = minutes;\n    this.seconds = seconds;\n  }\n}\n","/* (ignored) */","/* (ignored) */","<div class=\"container-fluid\">\n\n  <!-- Toggler -->\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#sidebarCollapse\"\n    aria-controls=\"sidebarCollapse\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <span class=\"navbar-toggler-icon text-purple\"></span>\n  </button>\n  <!-- User (xs) -->\n  <div class=\"navbar-user d-md-none\">\n    <div class=\"d-block\">\n      <button class=\"card-link mr-2\" type=\"button\" routerLink=\"/rewards\">\n        {{mphBalance.toFormat(4)}}<img src=\"./assets/img/icon-default.png\" class=\"ml-1\" alt=\"MPH token logo\" width=\"18px\">\n      </button>\n      <div class=\"btn-group\">\n        <button type=\"button\" name=\"web3Connect\" class=\"card-link\" (click)=\"connectWallet()\">\n          <div *ngIf=\"wallet.connected && !wallet.watching\">\n            {{wallet.userAddress.substring(0, 14)}}\n          </div>\n          <div *ngIf=\"!wallet.connected && !wallet.watching\">\n            Connect Wallet\n          </div>\n          <div *ngIf=\"wallet.watching\">\n            {{wallet.watchedAddress.substring(0, 14)}}\n          </div>\n        </button>\n        <button type=\"button\" class=\"card-link dropdown-toggle dropdown-toggle-split px-2\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n          <i class=\"fe fe-chevron-down \"></i>\n        </button>\n        <div class=\"dropdown-menu dropdown-menu-right p-3\" style=\"width: 300px;\">\n          <!-- Connected Wallet -->\n          <span *ngIf=\"wallet.connected\">\n            <h6 class=\"dropdown-header px-0\">Connected</h6>\n            <button type=\"button\" class=\"card-link\" (click)=\"switchFocus(false)\">\n              {{wallet.userAddress.substring(0, 14)}}\n            </button>\n            <span *ngIf=\"!wallet.watching\" class=\"badge\">Viewing</span>\n          </span>\n          <!-- Watched Wallet -->\n          <span *ngIf=\"wallet.watchedAddress != null\">\n            <h6 class=\"dropdown-header px-0\">Watched</h6>\n            <button type=\"button\" class=\"card-link\" (click)=\"switchFocus(true)\">\n              {{wallet.watchedAddress.substring(0, 14)}}\n            </button>\n            <span *ngIf=\"wallet.watching\" class=\"badge\">Viewing</span>\n          </span>\n          <!-- Add/Edit Watched Address -->\n          <span *ngIf=\"wallet.watchedAddress == null\">\n            <h6 class=\"dropdown-header px-0\">Watch address</h6>\n          </span>\n          <span *ngIf=\"wallet.watchedAddress != null\">\n            <h6 class=\"dropdown-header px-0\">Edit watched address</h6>\n          </span>\n          <form #watchForm=\"ngForm\" (ngSubmit)=\"onSubmit()\">\n            <div class=\"form-group\">\n              <input type=\"text\" [class.is-invalid]=\"address.invalid && address.dirty\"\n               class=\"form-control\" pattern=\"^0x[a-fA-F0-9]{40}$\" required #address=\"ngModel\" name=\"watchAddress\"\n               id=\"TrackEthAddress\"  placeholder=\"Add ENS domain or Ethereum address\"\n               [(ngModel)]=\"watchedModel.address\">\n               <small *ngIf=\"address.invalid && address.dirty\" class=\"text-danger\"> Please enter a valid address</small>\n            </div>\n            <button *ngIf=\"wallet.watchedAddress == null\" type=\"submit\" class=\"card-link\" [disabled]=\"watchForm.form.invalid\">Add watched address</button>\n            <button *ngIf=\"wallet.watchedAddress != null\" type=\"submit\" class=\"card-link\" [disabled]=\"watchForm.form.invalid\">Edit watched address</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- Collapse -->\n  <div class=\"collapse navbar-collapse\" id=\"sidebarCollapse\">\n\n    <div class=\"row\">\n      <div class=\"col\">\n        <a class=\"text-white text-left mb-3 d-block mt-3\" [routerLink]=\"\">\n          <img class=\"logo\" src=\"./assets/img/logo.png\" class=\"mr-2\" alt=\"88mph logo\" width=\"42px\">\n          <span class=\"d-inline-block\">88mph</span>\n        </a>\n\n        <!-- Navigation -->\n        <ul class=\"navbar-nav\" ngbNav [activeId]=\"route.url\">\n          <li class=\"nav-item\" ngbNavItem=\"/deposits\">\n            <a class=\"nav-link text-white\" routerLink=\"deposits\" ngbNavLink>\n              Fixed-interest rate bonds\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/bonds\">\n            <a class=\"nav-link text-white\" routerLink=\"bonds\" ngbNavLink>\n              Floating-rate bonds\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/zero-coupon-bonds\">\n            <a class=\"nav-link text-white\" routerLink=\"zero-coupon-bonds\" ngbNavLink>\n              Zero coupon bonds\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/vesting\">\n            <a class=\"nav-link text-white\" routerLink=\"vesting\" ngbNavLink>\n              MPH vesting\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/rewards\">\n            <a class=\"nav-link text-white\" routerLink=\"rewards\" ngbNavLink>\n              Stake MPH\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/farming\">\n            <a class=\"nav-link text-white\" routerLink=\"farming\" ngbNavLink>\n              Liquidity mining\n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link text-white\" href=\"https://snapshot.org/#/88mph.eth\" target=\"_blank\">\n              Governance\n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link text-white\" href=\"#sidebarPartners\" data-toggle=\"collapse\" role=\"button\" aria-expanded=\"false\"\n              aria-controls=\"sidebarPartners\">\n              Partners <span class=\"badge glowing mt-n1\">\n                NEW\n              </span>\n            </a>\n            <div class=\"collapse\" id=\"sidebarPartners\">\n              <ul class=\"nav nav-sm flex-column\">\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" href=\"https://app.nsure.network/#/cover/my\"\n                    target=\"_blank\">\n                    Buy insurance policies on Nsure Network\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" href=\"https://app.coverprotocol.com/app/marketplace/protocols/88MPH\"\n                    target=\"_blank\">\n                    Buy insurance policies on Cover Protocol\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://app.bancor.network/eth/swap?from=0x1F573D6Fb3F13d689FF844B4cE37794d79a7FF1C&to=0x8888801aF4d980682e47f1A9036e589479e835C5\" target=\"_blank\">\n                    Trade MPH on Bancor\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://app.uniswap.org/#/swap?inputCurrency=ETH&outputCurrency=0x8888801af4d980682e47f1a9036e589479e835c5\" target=\"_blank\">\n                    Trade MPH on Uniswap\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\" href=\"https://app.sushi.com/swap?inputCurrency=ETH&outputCurrency=0x8888801af4d980682e47f1a9036e589479e835c5\"\n                    target=\"_blank\">\n                    Trade MPH on SushiSwap\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://linkswap.app/#/swap?inputCurrency=0x514910771af9ca656af840dff83e8264ecf986ca&outputCurrency=0x8888801af4d980682e47f1a9036e589479e835c5\" target=\"_blank\">\n                    Trade MPH on LinkSwap\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://app.rari.capital/fuse/pool/3\" target=\"_blank\">\n                    Lend/borrow MPH on Rari.capital\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://app.mantradao.com/zenterest\" target=\"_blank\">\n                    Lend/borrow MPH on Mantradao.com\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://unit.xyz/?collateral=0x8888801af4d980682e47f1a9036e589479e835c5\" target=\"_blank\">\n                    Borrow USDP against MPH on Unit.xyz\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link\"\n                    href=\"https://www.dharma.io/token/0x8888801af4d980682e47f1a9036e589479e835c5\" target=\"_blank\">\n                    Buy MPH w/ USD\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link small\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n              Documentations\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/stats\">\n            <a class=\"nav-link small\" routerLink=\"stats\" ngbNavLink>\n              Stats\n            </a>\n          </li>                    \n          <li class=\"nav-item\">\n            <a class=\"nav-link small\" href=\"https://forum.88mph.app/\" target=\"_blank\">\n              Forum\n            </a>\n          </li>\n          <li class=\"nav-item\" ngbNavItem=\"/funding\">\n            <a class=\"nav-link small\" routerLink=\"funding\" ngbNavLink>\n              Funding\n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link small\" href=\"https://88mph.app/fm/\" target=\"_blank\">\n              88.0 FM \n            </a>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#sidebarAudits\" data-toggle=\"collapse\" role=\"button\" aria-expanded=\"false\"\n              aria-controls=\"sidebarAudits\">\n              Security\n            </a>\n            <div class=\"collapse\" id=\"sidebarAudits\">\n              <ul class=\"nav nav-sm flex-column\">\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\"\n                    href=\"https://gateway.pinata.cloud/ipfs/QmQq23FvF4dJNTjEyDGm1hDHBnLrpU1FmJJsch8kCSGt3U\"\n                    target=\"_blank\">\n                    Certik ZC bond audit\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\"\n                    href=\"https://github.com/peckshield/publications/blob/master/audit_reports/peckshield-audit-report-88mph%20Zero%20Coupon%20Bonds-v1.0.pdf\"\n                    target=\"_blank\">\n                    PeckShield ZC bond audit\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\"\n                    href=\"https://github.com/peckshield/publications/blob/master/audit_reports/peckshield-audit-report-88mph-v1.0.pdf\"\n                    target=\"_blank\">\n                    PeckShield v2 audit\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://certificate.quantstamp.com/full/88-mph\" target=\"_blank\">\n                    Quantstamp v2 audit\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://defiyield.info/assets/pdf/88mph.pdf\" target=\"_blank\">\n                    Defi Yield security analysis\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://immunefi.com/bounty/88mph/\" target=\"_blank\">\n                    Bug bounty\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </li>\n          \n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#sidebarCN\" data-toggle=\"collapse\" role=\"button\" aria-expanded=\"false\"\n              aria-controls=\"sidebarAudits\">\n              \n            </a>\n            <div class=\"collapse\" id=\"sidebarCN\">\n              <ul class=\"nav nav-sm flex-column\">\n                <li class=\"nav-item\">\n                  <img style=\"margin-left: 52px\" class=\"img-fluid\" src=\"./assets/img/wechatbot.png\" alt=\"WeChat 88mph\" width=\"128px\">\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\"\n                    href=\"https://weibo.com/u/7550683535\"\n                    target=\"_blank\">\n                    \n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\"\n                    href=\"https://88mph.app/docs-chinese/\"\n                    target=\"_blank\">\n                    \n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://t.me/join88mphchinese\" target=\"_blank\">\n                    \n                  </a>\n                </li>\n              </ul>\n            </div>\n          </li>\n          <li class=\"nav-item mb-6\">\n            <a class=\"nav-link\" href=\"#sidebarMore\" data-toggle=\"collapse\" role=\"button\" aria-expanded=\"false\"\n              aria-controls=\"sidebarMore\">\n              More\n            </a>\n            <div class=\"collapse\" id=\"sidebarMore\">\n              <ul class=\"nav nav-sm flex-column\">\n\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://twitter.com/88mphapp\" target=\"_blank\">\n                    Twitter\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://t.me/join_88mphapp\" target=\"_blank\">\n                    Telegram\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://discord.gg/95pw2uQ7PE\" target=\"_blank\">\n                    Discord\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://www.youtube.com/channel/UCEr3cuwaggjkw8TajaPSpgg\"\n                    target=\"_blank\">\n                    Youtube\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://medium.com/88mphapp\" target=\"_blank\">\n                    Medium\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://github.com/88mphapp\" target=\"_blank\">\n                    GitHub\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://forms.gle/UqKQ1LqhwAFCBWGBA\" target=\"_blank\">\n                    Feedback\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://www.coingecko.com/en/coins/88mph\" target=\"_blank\">\n                    Coingecko\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://debank.com/projects/88mph2\" target=\"_blank\">\n                    Debank\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://defillama.com/protocol/88mph\" target=\"_blank\">\n                    DeFi Llama\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://defipulse.com\" target=\"_blank\">\n                    DeFi Pulse\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://88mph.app/v1\" target=\"_blank\">\n                    V1\n                  </a>\n                </li>\n                <li class=\"nav-item\">\n                  <a class=\"nav-link small\" href=\"https://88mph.app/v0\" target=\"_blank\">\n                    V0\n                  </a>\n                </li>\n              </ul>\n            </div>\n          </li>\n        </ul>\n        <div class=\"btn-group-toggle fixed-bottom fixed-bottom-switch bg-dark py-3 px-4 border-top\" data-toggle=\"buttons\">\n          <ng-container *ngFor=\"let themeName of app.themes\">\n            <button class=\"card-link mr-3\" (click)=\"app.setTheme(themeName)\">\n              <input type=\"radio\" name=\"colorScheme\" value={{themeName}} [checked]=\"app.themeName === themeName\">\n              {{themeName}}\n            </button>\n          </ng-container>\n        </div>\n      </div>\n    </div>\n\n  </div> <!-- / .navbar-collapse -->\n\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport BigNumber from 'bignumber.js';\nimport { AppComponent } from '../app.component';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService } from '../contract.service';\nimport { WalletService } from '../wallet.service';\nimport { Watch } from '../watch';\n\n@Component({\n  selector: 'app-sidebar',\n  templateUrl: './sidebar.component.html',\n  styleUrls: ['./sidebar.component.css']\n})\nexport class SidebarComponent implements OnInit {\n  mphBalance: BigNumber;\n\n  watchedModel = new Watch(false, \"\");\n\n  constructor(public route: Router, public wallet: WalletService, public contract: ContractService,\n    public constants: ConstantsService, public app: AppComponent) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    if (!this.wallet.connected) {\n      return;\n    }\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const mphToken = this.contract.getNamedContract('MPHToken', readonlyWeb3);\n    const rewards = this.contract.getNamedContract('Rewards', readonlyWeb3);\n\n    let mphBalance, stakedMPHBalance, address;\n\n    if (!this.wallet.watching) {\n      address = this.wallet.userAddress;\n    } else {\n      address = this.wallet.watchedAddress;\n    }\n    await Promise.all([\n      mphBalance = new BigNumber(await mphToken.methods.balanceOf(address).call()).div(this.constants.PRECISION),\n      stakedMPHBalance = new BigNumber(await rewards.methods.balanceOf(address).call()).div(this.constants.PRECISION)\n    ])\n    this.mphBalance = new BigNumber(mphBalance);\n  }\n\n  resetData(): void {\n    this.mphBalance = new BigNumber(0);\n  }\n\n  connectWallet() {\n    this.wallet.connect(() => { }, () => { }, false);\n  }\n\n  onSubmit() {\n    this.wallet.watchWallet(this.watchedModel.address);\n    this.loadData();\n  }\n\n  switchFocus(watching: boolean) {\n    this.wallet.watch.watching = watching;\n    this.loadData();\n  }\n\n}\n","import {NgModule} from '@angular/core';\nimport {APOLLO_OPTIONS} from 'apollo-angular';\nimport {ApolloClientOptions, InMemoryCache} from '@apollo/client/core';\nimport {HttpLink} from 'apollo-angular/http';\n\nconst uri = 'https://api.thegraph.com/subgraphs/name/bacon-labs/eighty-eight-mph'; // <-- add the URL of the GraphQL server here\nexport function createApollo(httpLink: HttpLink): ApolloClientOptions<any> {\n  return {\n    link: httpLink.create({uri}),\n    cache: new InMemoryCache(),\n  };\n}\n\n@NgModule({\n  providers: [\n    {\n      provide: APOLLO_OPTIONS,\n      useFactory: createApollo,\n      deps: [HttpLink],\n    },\n  ],\n})\nexport class GraphQLModule {}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-2\">Fund a floating-rate bonds and earn MPH rewards.</h1>\n          <p class=\"text-muted font-weight-bold mb-5\">Learn more in the FAQ below or on our <a class=\"text-purple\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n            Help center <i class=\"fe fe-external-link\"></i>\n          </a>\n          </p>\n          <div class=\"card-deck mt-4 mb-3\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  You funded\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of debt your active bonds have funded.\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-0 glowing pl-3\">\n                  ${{totalDeficitFundedUSD.toFormat(4)}}\n                </h2>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  You earn on\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of deposits you're earning interest on.\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  ${{totalCurrentDepositUSD.toFormat(4)}}\n                </h2>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Interest paid out\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of interests you have earned so far from your active bonds. Interests will be automatically sent to your wallet when the depositors withdraw their deposits.\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  ${{totalInterestUSD.toFormat(4)}}\n                </h2>\n                <h5 class=\"mb-0 text-white pl-3 d-none\">Est. ROI 0.00%</h5>\n              </div>\n            </div>\n\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH earned\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Bond buyers earn MPH tokens that can be staked to earn rewards (protocol fees, harvested tokens, etc)\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  {{totalMPHEarned.toFormat(4)}} MPH\n                </h2>\n                <h5 class=\"mb-0 text-white pl-3\">${{totalMPHEarned.times(mphPriceUSD).toFormat(4)}}</h5>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n\n<!-- CARDS -->\n<div class=\"container-fluid mb-6\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <!-- Current deposits -->\n      <div class=\"card mb-6\" *ngIf=\"funderPools.length\">\n        <h2 class=\"mt-n3 bg-dark mb-0 mx-3 pl-3\">Active bonds</h2>\n        <div class=\"table-responsive mb-0\">\n          <table class=\"table table-sm table-nowrap card-table\">\n            <thead>\n              <tr>\n                <th></th>\n                <th class=\"text-white\">\n                  Amount funded\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of debt your bond have funded.\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-white\">\n                  You earn interest on\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of deposits you're earning interest on.\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-white\">\n                  Interest paid out\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"The amount of interests you have earned so far from your bond. Interests will be automatically sent to your wallet when the depositors withdraw their deposits.\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-white\">\n                  Refund amount\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Refunded amount triggered by a fixed yield depositor's early withdraw\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-white\">\n                  MPH rewards\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"MPH rewards are distributed to the FRB holders when the FIRB's holder withdraws the full face value of the FIRB linked with the FRB at maturity.\">\n                    [i]\n                  </button>\n                </th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody class=\"list\">\n              <ng-container *ngFor=\"let funderPool of funderPools\">\n                <tr>\n                  <td>\n                    <div class=\"d-flex align-items-center\">\n\n                      <!-- Image -->\n                      <div class=\"avatar avatar-xs\">\n                        <img class=\"avatar-img rounded-circle mr-3\" src={{funderPool.poolInfo.iconPath}} alt=\"...\">\n                      </div>\n\n                      <div class=\"ml-3\">\n\n                        <!-- Heading -->\n                        <h4 class=\"font-weight-normal mb-1\">{{funderPool.poolInfo.name}}</h4>\n\n                        <!-- Text -->\n                        <small class=\"text-muted\">{{funderPool.poolInfo.protocol}}</small>\n\n                      </div>\n                    </div>\n                  </td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                </tr>\n\n                <ng-container *ngFor=\"let funding of funderPool.fundings\">\n                  <tr>\n                    <td>\n                      <div class=\"d-flex align-items-center\">\n\n                        <!-- Image -->\n                        <h4 class=\"mb-0\">#{{funding.nftID}}</h4>\n\n                      </div>\n\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.deficitUSD.toFormat(4)}}</h4>\n                      <span class=\"text-white\">{{funding.deficitToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</span>\n                      <div class=\"mt-3\">\n                        <!-- Button -->\n                        <button type=\"button\" class=\"card-link small small px-1\"\n                        (click)=\"openBondDetailsModal(funderPool, funding)\">\n                        <i class=\"fe fe-plus mr-2 align-bottom\"></i>\n                          More\n                        </button>\n                      </div>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.currentDepositUSD.toFormat(4)}}</h4>\n                      <span class=\"text-white\">{{funding.currentDepositToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</span>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.interestEarnedUSD.toFormat(4)}}</h4>\n                      <span class=\"text-white\">{{funding.interestEarnedToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</span>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.refundAmountUSD.toFormat(4)}}</h4>\n                      <span class=\"text-white\">{{funding.refundAmountToken.toFormat(4)}} {{funderPool.poolInfo.stablecoinSymbol}}</span>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">\n                        ${{funding.mphRewardEarned.times(mphPriceUSD).toFormat(4)}}\n                      </h4>\n                      <span class=\"text-white\">{{funding.mphRewardEarned.toFormat(4)}} MPH</span>\n                    </td>\n                    <td></td>\n                  </tr>\n                </ng-container>\n              </ng-container>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <!-- Deficit funding opportunities -->\n      <div class=\"card mb-6\">\n        <h2 class=\"mt-n3 bg-dark mb-4 mx-3 pl-3\">Fund floating-rate bonds</h2>\n        <div class=\"card-body\">\n          <h2 class=\"display-2 glowing text-center\" *ngIf=\"loadingCalculator\">\n            Loading...\n          </h2>\n          <div class=\"row\" *ngIf=\"!loadingCalculator\">\n            <div class=\"col-12 col-lg-6\">\n              <div class=\"form-group mb-4\">\n                <label for=\"pool-select\">Select pool</label>\n                <select class=\"custom-select\" id=\"pool-select\" data-toggle=\"select\"\n                  (change)=\"selectPool($event.target.value)\">\n                  <option value={{i}} *ngFor=\"let pool of allPoolList; index as i;\">\n                    {{pool.stablecoinSymbol}} ({{pool.protocol}})\n                  </option>\n                </select>\n              </div>\n\n              <ng-container *ngIf=\"selectedPoolHasDebt()\">\n                <div class=\"row mt-3 mb-4\">\n                  <div class=\"col\">\n                    <h4 class=\"mb-1\">\n                      Your avg. floating-rate APY prediction: <strong>{{floatingRatePrediction.toFormat(1)}}%</strong>\n                    </h4>\n                    <p class=\"text-secondary small\">\n                      (Does not affect the bond, only for estimation)\n                    </p>\n                    <input type=\"range\" class=\"custom-range\" min=\"0\"\n                      max={{selectedPool?.oracleInterestRate.times(2).toFixed(1)}} step=\"0.1\"\n                      [value]=\"floatingRatePrediction.toFixed(1)\"\n                      (input)=\"updateFloatingRatePrediction($event.target.value)\">\n                    <div class=\"row justify-content-between text-white px-4 mb-4\">\n                      <div class=\"col\">\n                        <small>0%</small>\n                      </div>\n                      <div class=\"col text-center\">\n                        <small>{{selectedPool?.oracleInterestRate.toFormat(1)}}% <br> (Current <a href=\"https://docs.88mph.app/main-products/floating-rate-interest-bond\" target=\"_blank\">30d EMA floating-rate APY</a>)</small>\n                      </div>\n                      <div class=\"col text-right\">\n                        <small>{{selectedPool?.oracleInterestRate.times(2).toFormat(1)}}%</small>\n                      </div>\n                    </div>\n                    <h4>\n                      Number of deposit debts to fund: <strong>{{numDepositsToFund}}</strong>\n                    </h4>\n                    <input type=\"range\" class=\"custom-range\" min=\"1\" [max]=\"numFundableDeposits\" step=\"1\"\n                      [value]=\"numFundableDeposits\" (input)=\"updateNumDepositsToFund($event.target.value)\">\n                    <div class=\"row justify-content-between text-white px-4\">\n                      <div class=\"col\">\n                        <small>1</small>\n                      </div>\n                      <div class=\"col text-right\">\n                        <small>All</small>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n            <div class=\"col-12 col-lg-6\">\n              <ng-container *ngIf=\"!(debtToFundToken.gt(0) && selectedPoolHasDebt())\">\n                <h2 class=\"display-2 mb-4 glowing\">\n                  No debt available\n                </h2>\n              </ng-container>\n              <ng-container *ngIf=\"debtToFundToken.gt(0) && selectedPoolHasDebt()\">\n                <h5 class=\"text-uppercase text-white\">\n                  Estimated ROI\n                </h5>\n                <h2 class=\"display-2 mb-0 glowing\">\n                  {{estimatedROI.plus(mphROI).toFormat(4)}}%\n                  \n                </h2>\n                <h5 class=\"mb-0 mb-md-4 text-white\">\n                  ({{estimatedROI.toFormat(4)}}% in {{selectedPool?.stablecoinSymbol}} + {{mphROI.toFormat(4)}}% in MPH)\n                </h5>\n                <div class=\"row\">\n                  <div class=\"col-6 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      You fund\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      ${{debtToFundUSD.toFormat(4)}}\n                    </h2>\n                    <h5 class=\"mb-3 text-white\">{{debtToFundToken.toFormat(selectedPool?.stablecoinDecimals)}} {{selectedPool?.stablecoinSymbol}}</h5>\n                  </div>\n                  <div class=\"col-6 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      You earn interest on\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      ${{amountToEarnOnUSD.toFormat(4)}}\n                    </h2>\n                    <h5 class=\"mb-3 text-white\">{{amountToEarnOnToken.toFormat(4)}} {{selectedPool?.stablecoinSymbol}}\n                    </h5>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-6 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      Estimated profit\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      ${{estimatedProfitUSD.plus(mphRewardAmount.times(mphPriceUSD)).toFormat(4)}} \n                    </h2>\n                    <h5 class=\"mb-3 text-white\">{{estimatedProfitToken.toFormat(4)}} {{selectedPool?.stablecoinSymbol}} + {{mphRewardAmount.toFormat(4)}} MPH\n                    </h5>\n                  </div>\n                  <div class=\"col-6 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      MPH rewards\n                      <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                        ngbTooltip=\"MPH rewards are distributed to the FRB holders when the FIRB's holder withdraws the full face value of the FIRB linked with the FRB at maturity.\">\n                        [i]\n                      </button>\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      ${{mphRewardAmount.times(mphPriceUSD).toFormat(4)}}\n                    </h2>\n                    <h5 class=\"mb-3 text-white\">{{mphRewardAmount.toFormat(4)}} MPH\n                    </h5>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-4 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      Avg. maturation time\n                      <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                        ngbTooltip=\"The average maturation time of the deposits. You receive interest from all deposits you fund (in the same bond) when any one is withdrawn.\">\n                        [i]\n                      </button>\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      {{averageMaturationTime.toFormat(4)}} days\n                    </h2>\n                  </div>\n                  <div class=\"col-4 mb-4\">\n                    <h5 class=\"text-uppercase text-white\">\n                      Median maturation time\n                      <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                        ngbTooltip=\"The median maturation time of the deposits. You receive interest from all deposits you fund (in the same bond) when any one is withdrawn.\">\n                        [i]\n                      </button>\n                    </h5>\n                    <h2 class=\"mb-1 glowing\">\n                      {{medianMaturationTime.toFormat(4)}} days\n                    </h2>\n                  </div>\n                  <div class=\"col-4 mb-4\">\n                    <button type=\"button\" class=\"card-link\" (click)=\"depositListIsCollapsed = !depositListIsCollapsed\"\n                      [attr.aria-expanded]=\"!depositListIsCollapsed\">\n                      <ng-container *ngIf=\"depositListIsCollapsed\">Show</ng-container>\n                      <ng-container *ngIf=\"!depositListIsCollapsed\">Hide</ng-container> full deposit list\n                    </button>\n                  </div>\n                </div>\n                <div class=\"row\">\n                  <div [(ngbCollapse)]=\"depositListIsCollapsed\" class=\"w-100\">\n                    <div class=\"card\">\n                      <div class=\"card-body\">\n                        <table class=\"table mb-0\">\n                          <thead>\n                            <th>\n                              Deposit Amount ({{selectedPool?.stablecoinSymbol}})\n                            </th>\n                            <th>\n                              Maturation time\n                            </th>\n                          </thead>\n                          <tr *ngFor=\"let deposit of getDepositsToFundByMaturationTime()\">\n                            <td>\n                              {{deposit.amount.toFormat(4)}}\n                            </td>\n                            <td>\n                              {{timestampToDateString(deposit.maturationTimestamp)}}\n                            </td>\n                          </tr>\n                        </table>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n\n            <button class=\"card-link btn-block m-3\" [disabled]=\"!canContinue() || wallet.watching\" (click)=\"buyBond()\">\n              Continue\n            </button>\n          </div>\n\n        </div>\n\n      </div>\n      <!-- FAQ -->\n      <div class=\"card\">\n        <h2 class=\"mt-n3 bg-dark mb-4 mx-3 pl-3\" id=\"faq\">Frequently asked questions</h2>\n        <div class=\"card-body\">\n          <div class=\"row mb-6\">\n            <div class=\"col-12 col-lg-6\">\n              <h3>What is a Floating-Rate Bond (FRB)?</h3>\n              <p>\n                The Floating-Rate Bond (FRB) allows you to fund the debt created by the Fixed-Interest Rate Bonds (FIRB). The debt is the fixed-interest rate promised to FIRB holders. You will earn the variable rate offered by the underlying protocol (Compound, Aave, etc.) on the debt funded + the FIRB initial deposit.\n              </p>\n              <p>As the FIRB takes 50% of the floating-rates 30-day exponential moving average from the underlying money market protocol like Compound, Aave, if this protocols floating-interest rate doesn't drop by more than 50%, you will be in profit. This profit can increase if the underlying variable-rate interest increases.</p>\n              <p>\n                To sum it up, funding floating-rate bonds allows someone to immediately fill up the debt of one or more FIRB, and in exchange they would receive the yield generated by those FIRB.\n              </p>\n            </div>\n            <div class=\"col-12 col-lg-6\">\n              <div class=\"embed-responsive embed-responsive-16by9\">\n                <iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/HC0AYMaodOg\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n              </div>\n            </div>\n          </div>\n          <div class=\"row mb-4\">\n            <div class=\"col-12 col-lg-6\">\n              <h3>Example of a Floating-Rate Bond (FRB)\n              </h3>\n              <ul class=\"p-3\">\n                <li>You fund the debt of a 1-year 100 DAI FIRB deposit, on which a 5% fixed-interest rate was offered;</li>\n                <li>This FIRB is using Compound to generate the yield;</li>\n                <li>The FRBs value is (100 DAI + 5 DAI of debt) 105 DAI, so in other words, you funded 5 DAI to earn a floating-rate interest on 105 DAI, effectively leverage-long the DAI floating-rate on Compound with only 5 DAI;</li>\n                <li>If the DAI market rate on Compound is 6% APY on average over the next year, as a FRB holder, you will receive 6.3 DAI when the FIRB will reach its maturity in 1 year;</li>\n                <li>The return on investment for you will be 26%;</li>\n              </ul>\n            </div>\n            <div class=\"col-12 col-lg-6\">\n              <h3>MPH rewards</h3>\n              <p>FRB holders get rewarded with MPH tokens that can be staked to earn protocol's revenues.</p>\n              <p>MPH rewards are distributed to the FRB holders when the FIRB's holder withdraws the full face value of the FIRB linked with the FRB at maturity.</p>\n            </div>\n          </div>\n          <div class=\"row mb-4\">\n            <div class=\"col-12 col-lg-6\">\n              <h3><i class=\"fe fe-check-circle\"></i> Pros</h3>\n              <ul class=\"p-3\">\n                <li>Floating-rate bonds allow you to benefit from rising rates as the FRB's ROI adjusts to the market rates.</li>\n                <li>FRBs allow you to leverage your position without much capital requirements. Eg. pay 5 to earn on 105.</li>\n              </ul>\n            </div>\n            <div class=\"col-12 col-lg-6\">\n              <h3><i class=\"fe fe-x-circle\"></i> Cons</h3>\n              <ul class=\"p-3\">\n                <li>FRBs can have temporary or permanent default risk if the FIRB's holder doesn't withdraw the full face value of the FIRB at maturity. The risk decreases if the FIRB holder minted a zero-coupon bond, allowing everyone to trigger the FIRB's full face value withdrawal.</li>\n                <li>If market interest rates fall, the FRB's ROI may fall as well.</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div> <!-- / .row -->\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ApolloQueryResult, gql } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService } from '../contract.service';\nimport { HelpersService } from '../helpers.service';\nimport { WalletService } from '../wallet.service';\nimport { ModalBondDetailsComponent } from './modal-bond-details/modal-bond-details.component';\nimport { FunderPool, Deposit, Funding, DPool } from './interface';\n\nconst mockFunder = {\n  totalMPHEarned: 123,\n  pools: [{\n    address: '0xb5EE8910A93F8A450E97BE0436F36B9458106682',\n    fundings: [{\n      nftID: 1,\n      recordedFundedDepositAmount: 100,\n      recordedMoneyMarketIncomeIndex: 1,\n      initialFundedDepositAmount: 200,\n      fundedDeficitAmount: 10,\n      totalInterestEarned: 7,\n      mphRewardEarned: 10\n    }]\n  }],\n  totalInterestByPool: [{\n    pool: {\n      stablecoin: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48'\n    },\n    totalDeficitFunded: 100,\n    totalRecordedFundedDepositAmount: 100,\n    totalInterestEarned: 20\n  }]\n};\n\n@Component({\n  selector: 'app-bonds',\n  templateUrl: './bonds.component.html',\n  styleUrls: ['./bonds.component.css']\n})\nexport class BondsComponent implements OnInit {\n\n  allPoolList: DPool[];\n  funderPools: FunderPool[];\n  totalMPHEarned: BigNumber;\n  totalDeficitFundedUSD: BigNumber;\n  totalCurrentDepositUSD: BigNumber;\n  totalInterestUSD: BigNumber;\n\n  selectedPool: DPool;\n  floatingRatePrediction: BigNumber;\n  numDepositsToFund: string;\n  numFundableDeposits: number;\n  fundableDeposits: Deposit[];\n  debtToFundToken: BigNumber;\n  debtToFundUSD: BigNumber;\n  amountToEarnOnToken: BigNumber;\n  amountToEarnOnUSD: BigNumber;\n  mphRewardAmount: BigNumber;\n  estimatedProfitToken: BigNumber;\n  estimatedROI: BigNumber;\n  estimatedProfitUSD: BigNumber;\n  loadingCalculator: boolean;\n  mphPriceUSD: BigNumber;\n  mphROI: BigNumber;\n  averageMaturationTime: BigNumber;\n  medianMaturationTime: BigNumber;\n  depositListIsCollapsed: boolean;\n\n\n  constructor(\n    private modalService: NgbModal,\n    private apollo: Apollo,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected || this.wallet.watching, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, false);\n      this.loadData(true, false);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  loadData(loadUser: boolean, loadGlobal: boolean): void {\n    //const funderID = this.wallet.connected ? this.wallet.userAddress.toLowerCase() : '';\n    let funderID;\n    if (this.wallet.connected && !this.wallet.watching) {\n      funderID = this.wallet.userAddress.toLowerCase();\n    } else if (this.wallet.watching) {\n      funderID = this.wallet.watchedAddress.toLowerCase();\n    } else {\n      funderID = '';\n    }\n    const queryString = gql`\n      {\n        ${loadUser ? `funder(id: \"${funderID}\") {\n          totalMPHEarned\n          pools {\n            id\n            address\n            fundings(where: { funder: \"${funderID}\", active: true }, orderBy: nftID) {\n              id\n              pool {\n                address\n                oracleInterestRate\n                moneyMarketIncomeIndex\n                mphFunderRewardMultiplier\n              }\n              fromDepositID\n    \t\t\t\t\ttoDepositID\n              nftID\n              recordedFundedDepositAmount\n              recordedMoneyMarketIncomeIndex\n              initialFundedDepositAmount\n              fundedDeficitAmount\n              totalInterestEarned\n              mphRewardEarned\n              refundAmount\n              creationTimestamp\n            }\n          }\n          totalInterestByPool {\n            pool {\n              id\n              stablecoin\n            }\n            totalDeficitFunded\n            totalRecordedFundedDepositAmount\n            totalInterestEarned\n          }\n        }` : ''}\n        ${loadGlobal ? `dpools {\n          id\n          address\n          surplus\n          unfundedDepositAmount\n          oneYearInterestRate\n          oracleInterestRate\n          mphFunderRewardMultiplier\n          latestDeposit: deposits(orderBy: nftID, orderDirection: desc, first: 1) {\n            nftID\n          }\n        }` : ''}\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n\n    this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const funder = queryResult.data.funder;\n      const dpools = queryResult.data.dpools;\n      let stablecoinPriceCache = {};\n\n      if (funder) {\n        // update totalMPHEarned\n        this.totalMPHEarned = new BigNumber(funder.totalMPHEarned);\n\n        // process funding list\n        const funderPools: FunderPool[] = [];\n        Promise.all(funder.pools.map(async pool => {\n          if (pool.fundings.length == 0) return;\n          const poolInfo = this.contract.getPoolInfoFromAddress(pool.address);\n          const stablecoin = poolInfo.stablecoin.toLowerCase()\n          let stablecoinPrice = stablecoinPriceCache[stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(stablecoin);\n            stablecoinPriceCache[stablecoin] = stablecoinPrice;\n          }\n          const fundings: Array<Funding> = [];\n          for (const funding of pool.fundings) {\n            const fundingObj: Funding = {\n              id: funding.id,\n              fromDepositID: funding.fromDepositID,\n              toDepositID: funding.toDepositID,\n              pool: {\n                address: funding.pool.address,\n                oracleInterestRate: new BigNumber(funding.pool.oracleInterestRate).times(this.constants.YEAR_IN_SEC).times(100),\n                moneyMarketIncomeIndex: new BigNumber(funding.pool.moneyMarketIncomeIndex),\n                mphFunderRewardMultiplier: new BigNumber(funding.pool.mphFunderRewardMultiplier)\n              },\n              nftID: funding.nftID,\n              deficitToken: new BigNumber(funding.fundedDeficitAmount),\n              deficitUSD: new BigNumber(funding.fundedDeficitAmount).times(stablecoinPrice),\n              currentDepositToken: new BigNumber(funding.recordedFundedDepositAmount),\n              currentDepositUSD: new BigNumber(funding.recordedFundedDepositAmount).times(stablecoinPrice),\n              interestEarnedToken: new BigNumber(funding.totalInterestEarned),\n              interestEarnedUSD: new BigNumber(funding.totalInterestEarned).times(stablecoinPrice),\n              mphRewardEarned: new BigNumber(funding.mphRewardEarned),\n              refundAmountToken: new BigNumber(funding.refundAmount),\n              refundAmountUSD: new BigNumber(funding.refundAmount).times(stablecoinPrice),\n              recordedMoneyMarketIncomeIndex: new BigNumber(funding.recordedMoneyMarketIncomeIndex),\n              creationTimestamp: +funding.creationTimestamp\n            }\n            fundings.push(fundingObj)\n          }\n\n          const funderPool: FunderPool = {\n            poolInfo: poolInfo,\n            fundings: fundings\n          };\n          funderPools.push(funderPool);\n        })).then(() => {\n          this.funderPools = funderPools;\n        });\n\n        // compute overall statistics\n        let totalDeficitFundedUSD = new BigNumber(0);\n        let totalCurrentDepositUSD = new BigNumber(0);\n        let totalInterestUSD = new BigNumber(0);\n        Promise.all(funder.totalInterestByPool.map(async totalInterestEntity => {\n          let stablecoinPrice = stablecoinPriceCache[totalInterestEntity.pool.stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(totalInterestEntity.pool.stablecoin);\n            stablecoinPriceCache[totalInterestEntity.pool.stablecoin] = stablecoinPrice;\n          }\n\n          const poolDeficitFundedUSD = new BigNumber(totalInterestEntity.totalDeficitFunded).times(stablecoinPrice);\n          const poolCurrentDepositUSD = new BigNumber(totalInterestEntity.totalRecordedFundedDepositAmount).times(stablecoinPrice);\n          const poolInterestUSD = new BigNumber(totalInterestEntity.totalInterestEarned).times(stablecoinPrice);\n          totalDeficitFundedUSD = totalDeficitFundedUSD.plus(poolDeficitFundedUSD);\n          totalCurrentDepositUSD = totalCurrentDepositUSD.plus(poolCurrentDepositUSD);\n          totalInterestUSD = totalInterestUSD.plus(poolInterestUSD);\n        })).then(() => {\n          this.totalDeficitFundedUSD = totalDeficitFundedUSD;\n          this.totalCurrentDepositUSD = totalCurrentDepositUSD;\n          this.totalInterestUSD = totalInterestUSD;\n        });\n      }\n\n      if (dpools) {\n        const allPoolList = new Array<DPool>(0);\n        Promise.all(dpools.map(async pool => {\n          const poolInfo = this.contract.getPoolInfoFromAddress(pool.address);\n\n          if (!poolInfo) {\n            return;\n          }\n\n          const stablecoin = poolInfo.stablecoin.toLowerCase()\n          let stablecoinPrice = stablecoinPriceCache[stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(stablecoin);\n            stablecoinPriceCache[stablecoin] = stablecoinPrice;\n          }\n\n          // get MPH reward amount\n          const mphRewardPerTokenPerSecond = new BigNumber(pool.mphFunderRewardMultiplier);\n\n          const poolContract = this.contract.getPool(poolInfo.name);\n          const latestFundedDeposit = +(await poolContract.methods.latestFundedDepositID().call());\n          const latestDeposit = pool.latestDeposit.length ? +pool.latestDeposit[0].nftID : 0;\n          const dpoolObj: DPool = {\n            name: poolInfo.name,\n            address: poolInfo.address,\n            protocol: poolInfo.protocol,\n            stablecoin: poolInfo.stablecoin,\n            stablecoinSymbol: poolInfo.stablecoinSymbol,\n            stablecoinDecimals: poolInfo.stablecoinDecimals,\n            iconPath: poolInfo.iconPath,\n            surplus: new BigNumber(pool.surplus),\n            oneYearInterestRate: new BigNumber(pool.oneYearInterestRate).times(100),\n            latestFundedDeposit: latestFundedDeposit,\n            latestDeposit: latestDeposit,\n            unfundedDepositAmount: new BigNumber(pool.unfundedDepositAmount),\n            mphRewardPerTokenPerSecond: mphRewardPerTokenPerSecond,\n            oracleInterestRate: new BigNumber(pool.oracleInterestRate).times(this.constants.YEAR_IN_SEC).times(100)\n          };\n          allPoolList.push(dpoolObj);\n        })).then(() => {\n          this.allPoolList = allPoolList;\n          this.selectPool(0);\n        });\n      }\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.totalDeficitFundedUSD = new BigNumber(0);\n      this.totalCurrentDepositUSD = new BigNumber(0);\n      this.totalInterestUSD = new BigNumber(0);\n      this.totalMPHEarned = new BigNumber(0);\n      this.funderPools = [];\n\n    }\n\n    if (resetGlobal) {\n      this.floatingRatePrediction = new BigNumber(0);\n      this.allPoolList = [];\n      this.numDepositsToFund = 'All';\n      this.numFundableDeposits = 0;\n      this.fundableDeposits = [];\n      this.debtToFundToken = new BigNumber(0);\n      this.debtToFundUSD = new BigNumber(0);\n      this.amountToEarnOnToken = new BigNumber(0);\n      this.amountToEarnOnUSD = new BigNumber(0);\n      this.mphRewardAmount = new BigNumber(0);\n      this.estimatedProfitToken = new BigNumber(0);\n      this.estimatedProfitUSD = new BigNumber(0);\n      this.estimatedROI = new BigNumber(0);\n      this.loadingCalculator = true;\n      this.mphPriceUSD = new BigNumber(0);\n      this.mphROI = new BigNumber(0);\n      this.averageMaturationTime = new BigNumber(0);\n      this.medianMaturationTime = new BigNumber(0);\n      this.depositListIsCollapsed = true;\n    }\n  }\n\n  openBondDetailsModal(selectedFunderPool, selectedFunding) {\n    const modalRef = this.modalService.open(ModalBondDetailsComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.funderPool = selectedFunderPool;\n    modalRef.componentInstance.funding = selectedFunding;\n    modalRef.componentInstance.mphPriceUSD = this.mphPriceUSD;\n  }\n\n  selectPool(poolIdx: number) {\n    this.selectedPool = this.allPoolList[poolIdx];\n    this.floatingRatePrediction = this.selectedPool.oneYearInterestRate.times(2);\n    this.numFundableDeposits = Math.min(this.selectedPool.latestDeposit - this.selectedPool.latestFundedDeposit, 20);\n\n    const poolID = this.selectedPool.address.toLowerCase();\n    const queryString = gql`\n      {\n        dpool(id: \"${poolID}\") {\n          id\n          moneyMarketIncomeIndex\n          deposits(where: { nftID_gt: ${this.selectedPool.latestFundedDeposit} }, orderBy: nftID) {\n            nftID\n            amount\n            active\n            maturationTimestamp\n            interestEarned\n            initialMoneyMarketIncomeIndex\n          }\n        }\n      }\n    `;\n    this.apollo.query<FundableDepositsQuery>({\n      query: queryString\n    }).subscribe((x) => {\n      const fundableDeposits = [];\n      const moneyMarketIncomeIndex = new BigNumber(x.data.dpool.moneyMarketIncomeIndex);\n      for (const deposit of x.data.dpool.deposits) {\n        const surplus = moneyMarketIncomeIndex.div(deposit.initialMoneyMarketIncomeIndex).minus(1).times(deposit.amount).minus(deposit.interestEarned);\n        const parsedDeposit: Deposit = {\n          nftID: deposit.nftID,\n          amount: new BigNumber(deposit.amount),\n          active: deposit.active,\n          maturationTimestamp: deposit.maturationTimestamp,\n          interestEarned: new BigNumber(deposit.interestEarned),\n          surplus: surplus\n        }\n        fundableDeposits.push(parsedDeposit);\n      }\n      this.fundableDeposits = fundableDeposits;\n\n      this.updateNumDepositsToFund(this.numFundableDeposits + 1);\n    });\n  }\n\n\n\n  selectedPoolHasDebt(): boolean {\n    if (!this.selectedPool) {\n      return false;\n    }\n    return this.selectedPool.surplus.lt(0) && this.numFundableDeposits > 0;\n  }\n\n  updateFloatingRatePrediction(newPrediction: number) {\n    this.floatingRatePrediction = new BigNumber(newPrediction);\n    this.updateEstimatedROI();\n  }\n\n  async updateNumDepositsToFund(newNum: number) {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const poolContract = this.contract.getPool(this.selectedPool.name, readonlyWeb3);\n    if (newNum >= this.numFundableDeposits) {\n      // fund all deposits\n      this.numDepositsToFund = 'All';\n      this.debtToFundToken = this.selectedPool.surplus.times(-1);\n      this.amountToEarnOnToken = this.selectedPool.unfundedDepositAmount;\n    } else {\n      this.numDepositsToFund = newNum.toString();\n      let debtToFundToken = new BigNumber(0);\n      let amountToEarnOnToken = new BigNumber(0);\n      for (const deposit of this.fundableDeposits.slice(0, newNum)) {\n        if (deposit.active) {\n          debtToFundToken = debtToFundToken.plus(deposit.surplus.times(-1));\n          amountToEarnOnToken = amountToEarnOnToken.plus(deposit.amount);\n        } else {\n          const depositObj = await poolContract.methods.getDeposit(deposit.nftID).call();\n          const finalSurplus = new BigNumber(depositObj.finalSurplusAmount).times(depositObj.finalSurplusIsNegative ? -1 : 1).div(Math.pow(10, this.selectedPool.stablecoinDecimals));\n          debtToFundToken = debtToFundToken.plus(finalSurplus.times(-1));\n        }\n      }\n      this.debtToFundToken = debtToFundToken;\n      this.amountToEarnOnToken = amountToEarnOnToken;\n    }\n    const stablecoinPrice = await this.helpers.getTokenPriceUSD(this.selectedPool.stablecoin);\n    this.debtToFundUSD = this.debtToFundToken.times(stablecoinPrice);\n    this.amountToEarnOnUSD = this.amountToEarnOnToken.times(stablecoinPrice);\n\n    // compute weighted average maturation time and MPH reward amount\n    const deposits = newNum >= this.numFundableDeposits ? this.fundableDeposits : this.fundableDeposits.slice(0, newNum);\n    let totalMaturationTime = new BigNumber(0);\n    let numDepositsWithDebt = 0;\n    let mphRewardAmount = new BigNumber(0);\n    const now = Math.floor(Date.now() / 1e3);\n    for (const deposit of deposits) {\n      const timeTillMaturation = deposit.maturationTimestamp - now;\n      if (!deposit.active || timeTillMaturation < 0) continue;\n      totalMaturationTime = totalMaturationTime.plus(timeTillMaturation);\n      mphRewardAmount = mphRewardAmount.plus(this.selectedPool.mphRewardPerTokenPerSecond.times(deposit.amount).times(timeTillMaturation));\n      numDepositsWithDebt += 1;\n    }\n    this.averageMaturationTime = numDepositsWithDebt == 0 ? new BigNumber(0) : totalMaturationTime.div(numDepositsWithDebt).div(this.constants.DAY_IN_SEC);\n    this.mphRewardAmount = mphRewardAmount;\n    this.mphROI = this.mphRewardAmount.times(this.mphPriceUSD).div(this.debtToFundUSD).times(100);\n    if (this.mphROI.isNaN()) {\n      this.mphROI = new BigNumber(0);\n    }\n\n\n    // compute median maturation time\n    const median = (values) => {\n      if (values.length === 0) return 0;\n\n      values.sort(function (a, b) {\n        return a - b;\n      });\n\n      var half = Math.floor(values.length / 2);\n\n      if (values.length % 2)\n        return values[half];\n\n      return (values[half - 1] + values[half]) / 2.0;\n    };\n    this.medianMaturationTime = new BigNumber(median(\n      deposits\n        .filter(x => x.active && (x.maturationTimestamp - now > 0))\n        .map(x => x.maturationTimestamp - now)\n    )).div(this.constants.DAY_IN_SEC);\n\n    this.updateEstimatedROI();\n  }\n\n  async updateEstimatedROI() {\n    // compute estimated ROI\n    const estimatedFloatingRate = this.floatingRatePrediction.div(100);\n    let estimatedInterest = new BigNumber(0);\n    const now = Date.now() / 1e3;\n    const numDepositsToFund = isNaN(+this.numDepositsToFund) ? this.fundableDeposits.length : +this.numDepositsToFund;\n    for (const deposit of this.fundableDeposits.slice(0, numDepositsToFund)) {\n      if (!deposit.active || deposit.maturationTimestamp < now) continue;\n      const depositInterest = deposit.amount.times(estimatedFloatingRate).times(deposit.maturationTimestamp - now).div(this.constants.YEAR_IN_SEC);\n      estimatedInterest = estimatedInterest.plus(depositInterest);\n    }\n    this.estimatedProfitToken = estimatedInterest.minus(this.debtToFundToken);\n    this.estimatedProfitUSD = this.estimatedProfitToken.times(await this.helpers.getTokenPriceUSD(this.selectedPool.stablecoin.toLowerCase()));\n    this.estimatedROI = this.estimatedProfitToken.div(this.debtToFundToken).times(100);\n\n    this.loadingCalculator = false;\n  }\n\n  getDepositsToFundByMaturationTime() {\n    const now = Math.floor(Date.now() / 1e3);\n    const newNum = this.numDepositsToFund === 'All' ? this.numFundableDeposits : +this.numDepositsToFund;\n    const deposits = newNum >= this.numFundableDeposits ? this.fundableDeposits : this.fundableDeposits.slice(0, newNum);\n    return deposits\n      .filter(x => x.active && (x.maturationTimestamp - now > 0))\n      .sort((a, b) => {\n        return a.maturationTimestamp - b.maturationTimestamp;\n      });\n  }\n\n  timestampToDateString(timestampSec: number): string {\n    return new Date(timestampSec * 1e3).toLocaleDateString();\n  }\n\n  buyBond() {\n    const pool = this.contract.getPool(this.selectedPool.name);\n    const stablecoin = this.contract.getPoolStablecoin(this.selectedPool.name);\n    const stablecoinPrecision = Math.pow(10, this.selectedPool.stablecoinDecimals);\n    const debtToFund = this.helpers.processWeb3Number(this.debtToFundToken.times(stablecoinPrecision));\n    let func;\n    if (this.numDepositsToFund === 'All') {\n      // Fund all deposits\n      func = pool.methods.fundAll();\n    } else {\n      // Fund a selection of deposits\n      func = pool.methods.fundMultiple(this.selectedPool.latestFundedDeposit + (+this.numDepositsToFund));\n    }\n    this.wallet.sendTxWithToken(func, stablecoin, this.selectedPool.address, debtToFund, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) })\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.selectedPoolHasDebt() && this.debtToFundToken.gt(0);\n  }\n}\n\ninterface QueryResult {\n  funder: {\n    totalMPHEarned: number;\n    pools: {\n      address: string;\n      fundings: {\n        id: number;\n        fromDepositID: number;\n        toDepositID: number;\n        pool: {\n          address: string;\n          oracleInterestRate: number;\n          moneyMarketIncomeIndex: number;\n          mphFunderRewardMultiplier: number;\n        };\n        nftID: number;\n        recordedFundedDepositAmount: number;\n        recordedMoneyMarketIncomeIndex: number;\n        initialFundedDepositAmount: number;\n        fundedDeficitAmount: number;\n        totalInterestEarned: number;\n        mphRewardEarned: number;\n        refundAmount: number;\n        creationTimestamp: number;\n      }[];\n    }[];\n    totalInterestByPool: {\n      pool: {\n        id: string;\n        stablecoin: string;\n      };\n      totalDeficitFunded: number;\n      totalRecordedFundedDepositAmount: number;\n      totalInterestEarned: number;\n    }[];\n  };\n  dpools: {\n    id: string;\n    address: string;\n    surplus: number;\n    unfundedDepositAmount: number;\n    oneYearInterestRate: number;\n    oracleInterestRate: number;\n    mphFunderRewardMultiplier: number;\n    latestDeposit: {\n      nftID: number;\n    }[];\n  }[];\n}\n\ninterface FundableDepositsQuery {\n  dpool: {\n    id: string;\n    moneyMarketIncomeIndex: number;\n    deposits: {\n      nftID: number;\n      amount: number;\n      active: boolean;\n      maturationTimestamp: number;\n      interestEarned: number;\n      initialMoneyMarketIncomeIndex: number;\n    }[];\n  };\n}\n","export class Watch {\n  watching: boolean;\n  address: string;\n\n  constructor(watching: boolean, address: string) {\n    this.watching = watching;\n    this.address = address;\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from 'src/app/zero-coupon-bonds/zero-coupon-bonds.component';\n\n@Component({\n  selector: 'app-modal-unstake-zcblp',\n  templateUrl: './modal-unstake-zcblp.component.html',\n  styleUrls: ['./modal-unstake-zcblp.component.css']\n})\nexport class ModalUnstakeZCBLPComponent implements OnInit {\n  @Input() stakedTokenPoolProportion: BigNumber;\n  @Input() stakedTokenBalance: BigNumber;\n  @Input() totalStakedTokenBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerDay: BigNumber;\n  @Input() rewardTokenPriceUSD: BigNumber;\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  unstakeAmount: BigNumber;\n  newStakedTokenPoolProportion: BigNumber;\n  newRewardPerDay: BigNumber;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    this.setUnstakeAmount(this.stakedTokenBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.unstakeAmount = new BigNumber(0);\n    this.newStakedTokenPoolProportion = new BigNumber(0);\n    this.newRewardPerDay = new BigNumber(0);\n  }\n\n  setUnstakeAmount(amount: number | string) {\n    this.unstakeAmount = new BigNumber(amount);\n    if (this.unstakeAmount.isNaN()) {\n      this.unstakeAmount = new BigNumber(0);\n    }\n    this.newStakedTokenPoolProportion = this.stakedTokenBalance.minus(this.unstakeAmount).div(this.totalStakedTokenBalance.minus(this.unstakeAmount)).times(100);\n    if (this.newStakedTokenPoolProportion.isNaN()) {\n      this.newStakedTokenPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerDay = this.stakedTokenBalance.minus(this.unstakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedTokenBalance.minus(this.unstakeAmount))).times(this.constants.DAY_IN_SEC);\n    if (this.newRewardPerDay.isNaN()) {\n      this.newRewardPerDay = new BigNumber(0);\n    }\n  }\n\n  unstake() {\n    const rewards = this.contract.getContract(this.zcbEntry.zcbInfo.farmAddress, 'Farming');\n    const unstakeAmount = this.helpers.processWeb3Number(this.unstakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.withdraw(unstakeAmount);\n\n    this.wallet.sendTx(func, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.unstakeAmount.gt(0);\n  }\n}\n","<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to unstake?\n              </h1>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"unstakeAmount.toString()\"\n                        (input)=\"setUnstakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setUnstakeAmount(this.stakedTokenBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{stakedTokenBalance.toFormat()}} SLP staked</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedTokenPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedTokenPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerDay.toFormat(4)}} MPH/day</h4>\n                            <span class=\"text-white\">Current: {{rewardPerDay.toFormat(4)}} MPH/day</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate USD</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{newRewardPerDay.times(rewardTokenPriceUSD).toFormat(4)}}/day</h4>\n                            <span class=\"text-white\">Current:\n                              ${{rewardPerDay.times(rewardTokenPriceUSD).toFormat(4)}}/day</span>\n                          </td>\n                        </tr>\n                        <tr class=\"d-none\">\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Staking pool APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Staking rewards APY annualized and compounded based on the last week\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            0.0000%\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"unstake()\" [disabled]=\"!canContinue()\">Unstake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { Component, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ContractService } from '../contract.service';\nimport { WalletService } from '../wallet.service';\nimport { ModalStakeLPComponent } from './modal-stake-lp/modal-stake-lp.component';\nimport { ConstantsService } from '../constants.service';\nimport { HelpersService } from '../helpers.service';\nimport { ModalUnstakeLPComponent } from './modal-unstake-lp/modal-unstake-lp.component';\n\n@Component({\n  selector: 'app-farming',\n  templateUrl: './farming.component.html',\n  styleUrls: ['./farming.component.css']\n})\nexport class FarmingComponent implements OnInit {\n  PERIOD = 14; // 14 days\n  BLOCK_TIME_IN_SEC = 14.256 // used for sushi APY\n\n  stakedMPHBalance: BigNumber;\n  stakedMPHPoolProportion: BigNumber;\n  claimableRewards: BigNumber;\n  rewardPerDay: BigNumber;\n  totalRewardPerSecond: BigNumber;\n  rewardPerMPHPerSecond: BigNumber;\n  totalStakedMPHBalance: BigNumber;\n  mphPriceUSD: BigNumber;\n  mphLPPriceUSD: BigNumber;\n  yearlyROI: BigNumber;\n  monthlyROI: BigNumber;\n  weeklyROI: BigNumber;\n  dailyROI: BigNumber;\n  rewardStartTime: string;\n  rewardEndTime: string;\n\n  sushiStakedLPBalance: BigNumber;\n  sushiStakedLPPoolProportion: BigNumber;\n  sushiClaimableRewards: BigNumber;\n  sushiRewardPerDay: BigNumber;\n  sushiTotalRewardPerSecond: BigNumber;\n  sushiRewardPerLPPerSecond: BigNumber;\n  sushiTotalStakedLPBalance: BigNumber;\n  sushiPriceUSD: BigNumber;\n  sushiLPPriceUSD: BigNumber;\n  sushiYearlyROI: BigNumber;\n  sushiMonthlyROI: BigNumber;\n  sushiWeeklyROI: BigNumber;\n  sushiDailyROI: BigNumber;\n\n  bancorStakedMPHBalance: BigNumber;\n  bancorStakedBNTBalance: BigNumber;\n  bancorTotalStakedMPH: BigNumber;\n  bancorTotalStakedBNT: BigNumber;\n  bancorClaimableRewards: BigNumber;\n  bancorTotalRewardPerSecond: BigNumber;\n  bancorRewardPerMPHPerSecond: BigNumber;\n  bancorRewardPerBNTPerSecond: BigNumber;\n  bancorStakedMPHPoolProportion: BigNumber;\n  bancorStakedBNTPoolProportion: BigNumber;\n  bancorTotalRewardPerDay: BigNumber;\n  bancorMPHRewardPerDay: BigNumber;\n  bancorBNTRewardPerDay: BigNumber;\n  bancorMPHYearlyROI: BigNumber;\n  bancorBNTYearlyROI: BigNumber;\n  bntPriceUSD: BigNumber;\n\n  constructor(\n    private modalService: NgbModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected || this.wallet.watching, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, true);\n      this.loadData(true, true);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  async loadData(loadUser: boolean, loadGlobal: boolean) {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const rewards = this.contract.getNamedContract('Farming', readonlyWeb3);\n\n    const sushiMasterChef = this.contract.getContract(this.constants.SUSHI_MASTERCHEF, 'MasterChef', readonlyWeb3);\n    const yflinkStaking = this.contract.getContract(this.constants.LINKSWAP_STAKING, 'LinkSwapStaking', readonlyWeb3);\n    const bancorLiquidityProtectionStats = this.contract.getContract(this.constants.BANCOR_LP_STATS, 'LiquidityProtectionStats', readonlyWeb3);\n    const bancorStaking = this.contract.getContract(this.constants.BANCOR_STAKING_REWARDS, 'BancorStaking', readonlyWeb3);\n    const bancorStakingStore = this.contract.getContract(this.constants.BANCOR_STAKING_REWARDS_STORE, 'BancorStakingStore', readonlyWeb3);\n\n    if (loadGlobal) {\n      this.totalStakedMPHBalance = new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION);\n      this.totalRewardPerSecond = new BigNumber(await rewards.methods.rewardRate().call()).div(this.constants.PRECISION);\n      this.rewardPerMPHPerSecond = this.totalRewardPerSecond.div(this.totalStakedMPHBalance);\n      if (this.totalStakedMPHBalance.isZero()) {\n        this.rewardPerMPHPerSecond = new BigNumber(0);\n      }\n      // load reward start & end time\n      rewards.methods.periodFinish().call().then(endTime => {\n        this.rewardStartTime = new Date((+endTime - this.PERIOD * 24 * 60 * 60) * 1e3).toLocaleString();\n        this.rewardEndTime = new Date(+endTime * 1e3).toLocaleString();\n      });\n\n      this.mphPriceUSD = await this.helpers.getMPHPriceUSD();\n      this.mphLPPriceUSD = await this.helpers.getMPHLPPriceUSD();\n      const secondROI = this.totalRewardPerSecond.times(this.mphPriceUSD).div(this.totalStakedMPHBalance.times(this.mphLPPriceUSD)).times(100);\n      this.yearlyROI = secondROI.times(this.constants.YEAR_IN_SEC);\n      this.monthlyROI = secondROI.times(this.constants.MONTH_IN_SEC);\n      this.weeklyROI = secondROI.times(this.constants.WEEK_IN_SEC);\n      this.dailyROI = secondROI.times(this.constants.DAY_IN_SEC);\n\n      // sushi\n      const sushiLPToken = this.contract.getERC20(this.constants.SUSHI_LP, readonlyWeb3);\n      const sushiPoolInfo = await sushiMasterChef.methods.poolInfo(this.constants.SUSHI_MPH_ONSEN_ID).call();\n      this.sushiTotalStakedLPBalance = new BigNumber(await sushiLPToken.methods.balanceOf(this.constants.SUSHI_MASTERCHEF).call()).div(this.constants.PRECISION);\n      this.sushiTotalRewardPerSecond = new BigNumber(await sushiMasterChef.methods.sushiPerBlock().call()).div(this.BLOCK_TIME_IN_SEC).div(this.constants.PRECISION).times(sushiPoolInfo.allocPoint).div(await sushiMasterChef.methods.totalAllocPoint().call());\n      this.sushiRewardPerLPPerSecond = this.sushiTotalRewardPerSecond.div(this.sushiTotalStakedLPBalance);\n      if (this.sushiTotalStakedLPBalance.isZero()) {\n        this.sushiRewardPerLPPerSecond = new BigNumber(0);\n      }\n      this.sushiPriceUSD = new BigNumber(await this.helpers.getTokenPriceUSD(this.constants.SUSHI));\n      this.sushiLPPriceUSD = await this.helpers.getLPPriceUSD(this.constants.SUSHI_LP);\n      const sushiSecondROI = this.sushiTotalRewardPerSecond.times(this.sushiPriceUSD).div(this.sushiTotalStakedLPBalance.times(this.sushiLPPriceUSD)).times(100);\n      this.sushiYearlyROI = sushiSecondROI.times(this.constants.YEAR_IN_SEC);\n      this.sushiMonthlyROI = sushiSecondROI.times(this.constants.MONTH_IN_SEC);\n      this.sushiWeeklyROI = sushiSecondROI.times(this.constants.WEEK_IN_SEC);\n      this.sushiDailyROI = sushiSecondROI.times(this.constants.DAY_IN_SEC);\n\n      // bancor\n      this.bancorTotalStakedMPH = new BigNumber(await bancorLiquidityProtectionStats.methods.totalReserveAmount(this.constants.BANCOR_MPHBNT_POOL, this.constants.MPH).call()).div(this.constants.PRECISION);\n      this.bancorTotalStakedBNT = new BigNumber(await bancorLiquidityProtectionStats.methods.totalReserveAmount(this.constants.BANCOR_MPHBNT_POOL, this.constants.BNT).call()).div(this.constants.PRECISION);\n      let poolProgram: [number, number, number, string[], number[]] = await bancorStakingStore.methods.poolProgram(this.constants.BANCOR_MPHBNT_POOL).call();\n      this.bancorTotalRewardPerSecond = new BigNumber(poolProgram[2]);\n      if (poolProgram[3][0].toLowerCase() === this.constants.MPH) {\n        this.bancorRewardPerMPHPerSecond = new BigNumber(poolProgram[2] * poolProgram[4][0] / 1e6 / this.constants.PRECISION);\n        this.bancorRewardPerBNTPerSecond = new BigNumber(poolProgram[2] * poolProgram[4][1] / 1e6 / this.constants.PRECISION);\n      } else {\n        this.bancorRewardPerMPHPerSecond = new BigNumber(poolProgram[2] * poolProgram[4][1] / 1e6 / this.constants.PRECISION);\n        this.bancorRewardPerBNTPerSecond = new BigNumber(poolProgram[2] * poolProgram[4][0] / 1e6 / this.constants.PRECISION);\n      }\n      this.bntPriceUSD = new BigNumber(await this.helpers.getTokenPriceUSD(this.constants.BNT));\n      const bancorMPHSecondROI = this.bancorRewardPerMPHPerSecond.times(this.bntPriceUSD).div(this.bancorTotalStakedMPH.times(this.mphPriceUSD)).times(100).times(2); // based on 2x multiplier\n      this.bancorMPHYearlyROI = bancorMPHSecondROI.times(this.constants.YEAR_IN_SEC);\n      const bancorBNTSecondROI = this.bancorRewardPerBNTPerSecond.times(this.bntPriceUSD).div(this.bancorTotalStakedBNT.times(this.bntPriceUSD)).times(100).times(2); // based on 2x multiplier\n      this.bancorBNTYearlyROI = bancorBNTSecondROI.times(this.constants.YEAR_IN_SEC);\n    }\n\n    let address;\n    if (!this.wallet.watching) {\n      address = this.wallet.userAddress;\n    } else {\n      address = this.wallet.watchedAddress;\n    }\n\n    if (loadUser) {\n      this.stakedMPHBalance = new BigNumber(await rewards.methods.balanceOf(address).call()).div(this.constants.PRECISION);\n      this.claimableRewards = new BigNumber(await rewards.methods.earned(address).call()).div(this.constants.PRECISION);\n      this.stakedMPHPoolProportion = this.stakedMPHBalance.div(this.totalStakedMPHBalance).times(100);\n      if (this.totalStakedMPHBalance.isZero()) {\n        this.stakedMPHPoolProportion = new BigNumber(0);\n      }\n      this.rewardPerDay = this.stakedMPHBalance.times(this.rewardPerMPHPerSecond).times(this.constants.DAY_IN_SEC);\n\n      // sushi\n      let sushiUserInfo;\n      await Promise.all([\n        sushiUserInfo = await sushiMasterChef.methods.userInfo(this.constants.SUSHI_MPH_ONSEN_ID, address).call(),\n        this.sushiClaimableRewards = new BigNumber(await sushiMasterChef.methods.pendingSushi(this.constants.SUSHI_MPH_ONSEN_ID, address).call()).div(this.constants.PRECISION)\n      ]);\n      this.sushiStakedLPBalance = new BigNumber(sushiUserInfo.amount).div(this.constants.PRECISION);\n      this.sushiStakedLPPoolProportion = this.sushiStakedLPBalance.div(this.sushiTotalStakedLPBalance).times(100);\n      if (this.sushiTotalStakedLPBalance.isZero()) {\n        this.sushiStakedLPPoolProportion = new BigNumber(0);\n      }\n      this.sushiRewardPerDay = this.sushiStakedLPBalance.times(this.sushiRewardPerLPPerSecond).times(this.constants.DAY_IN_SEC);\n\n      // bancor\n      this.bancorStakedMPHBalance = new BigNumber(await bancorLiquidityProtectionStats.methods.totalProviderAmount(address, this.constants.BANCOR_MPHBNT_POOL, this.constants.MPH).call()).div(this.constants.PRECISION);\n      this.bancorStakedBNTBalance = new BigNumber(await bancorLiquidityProtectionStats.methods.totalProviderAmount(address, this.constants.BANCOR_MPHBNT_POOL, this.constants.BNT).call()).div(this.constants.PRECISION);\n      this.bancorClaimableRewards = new BigNumber(await bancorStaking.methods.pendingPoolRewards(address, this.constants.BANCOR_MPHBNT_POOL).call()).div(this.constants.PRECISION);\n      this.bancorStakedMPHPoolProportion = this.bancorStakedMPHBalance.div(this.bancorTotalStakedMPH).times(100);\n      this.bancorStakedBNTPoolProportion = this.bancorStakedBNTBalance.div(this.bancorTotalStakedBNT).times(100);\n      this.bancorMPHRewardPerDay = this.bancorRewardPerMPHPerSecond.times(this.constants.DAY_IN_SEC).times(this.bancorStakedMPHBalance).div(this.bancorTotalStakedMPH);\n      this.bancorBNTRewardPerDay = this.bancorRewardPerBNTPerSecond.times(this.constants.DAY_IN_SEC).times(this.bancorStakedBNTBalance).div(this.bancorTotalStakedBNT);\n      this.bancorTotalRewardPerDay = this.bancorMPHRewardPerDay.plus(this.bancorBNTRewardPerDay);\n\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.stakedMPHBalance = new BigNumber(0);\n      this.stakedMPHPoolProportion = new BigNumber(0);\n      this.claimableRewards = new BigNumber(0);\n      this.rewardPerDay = new BigNumber(0);\n\n      this.sushiStakedLPBalance = new BigNumber(0);\n      this.sushiStakedLPPoolProportion = new BigNumber(0);\n      this.sushiClaimableRewards = new BigNumber(0);\n      this.sushiRewardPerDay = new BigNumber(0);\n\n      this.bancorStakedMPHBalance = new BigNumber(0);\n      this.bancorStakedBNTBalance = new BigNumber(0);\n      this.bancorClaimableRewards = new BigNumber(0);\n      this.bancorStakedMPHPoolProportion = new BigNumber(0);\n      this.bancorStakedBNTPoolProportion = new BigNumber(0);\n      this.bancorTotalRewardPerDay = new BigNumber(0);\n      this.bancorMPHRewardPerDay = new BigNumber(0);\n      this.bancorBNTRewardPerDay = new BigNumber(0);\n    }\n\n    if (resetGlobal) {\n      this.totalStakedMPHBalance = new BigNumber(0);\n      this.rewardPerMPHPerSecond = new BigNumber(0);\n      this.totalRewardPerSecond = new BigNumber(0);\n      this.mphPriceUSD = new BigNumber(0);\n      this.mphLPPriceUSD = new BigNumber(0);\n      this.yearlyROI = new BigNumber(0);\n      this.monthlyROI = new BigNumber(0);\n      this.weeklyROI = new BigNumber(0);\n      this.dailyROI = new BigNumber(0);\n\n      this.sushiTotalStakedLPBalance = new BigNumber(0);\n      this.sushiRewardPerLPPerSecond = new BigNumber(0);\n      this.sushiTotalRewardPerSecond = new BigNumber(0);\n      this.sushiPriceUSD = new BigNumber(0);\n      this.sushiLPPriceUSD = new BigNumber(0);\n      this.sushiYearlyROI = new BigNumber(0);\n      this.sushiMonthlyROI = new BigNumber(0);\n      this.sushiWeeklyROI = new BigNumber(0);\n      this.sushiDailyROI = new BigNumber(0);\n\n      this.bntPriceUSD = new BigNumber(0);\n      this.bancorTotalRewardPerSecond = new BigNumber(0);\n      this.bancorRewardPerMPHPerSecond = new BigNumber(0);\n      this.bancorRewardPerBNTPerSecond = new BigNumber(0);\n      this.bancorTotalStakedMPH = new BigNumber(0);\n      this.bancorTotalStakedBNT = new BigNumber(0);\n\n      this.bancorMPHYearlyROI = new BigNumber(0);\n\n      this.bancorBNTYearlyROI = new BigNumber(0);\n    }\n  }\n\n  openStakeModal() {\n    const modalRef = this.modalService.open(ModalStakeLPComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedMPHPoolProportion = this.stakedMPHPoolProportion;\n    modalRef.componentInstance.stakedMPHBalance = this.stakedMPHBalance;\n    modalRef.componentInstance.totalStakedMPHBalance = this.totalStakedMPHBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerDay = this.rewardPerDay;\n    modalRef.componentInstance.mphPriceUSD = this.mphPriceUSD;\n  }\n\n  openUnstakeModal() {\n    const modalRef = this.modalService.open(ModalUnstakeLPComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedMPHPoolProportion = this.stakedMPHPoolProportion;\n    modalRef.componentInstance.stakedMPHBalance = this.stakedMPHBalance;\n    modalRef.componentInstance.totalStakedMPHBalance = this.totalStakedMPHBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerDay = this.rewardPerDay;\n    modalRef.componentInstance.mphPriceUSD = this.mphPriceUSD;\n  }\n\n  unstakeAndClaim() {\n    const rewards = this.contract.getNamedContract('Farming');\n    const func = rewards.methods.exit();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  claim() {\n    const rewards = this.contract.getNamedContract('Farming');\n    const func = rewards.methods.getReward();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected;\n  }\n}\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-5\">MPH liquidity mining program</h1>\n          <div class=\"card-deck my-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body py-0\">\n                <div class=\"row\">\n                  <div class=\"col-12 col-lg-6\">\n                    <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                       <a class=\"text-purple\"\n                        href=\"https://uniswap.exchange/add/0x8888801aF4d980682e47f1A9036e589479e835C5/ETH\"\n                        target=\"_blank\">Provide\n                        liquidity</a> to the Uniswap MPH-ETH pair and earn MPH\n                    </h5>\n                    <!-- Heading -->\n                    <h2 class=\"mt-4 mb-2 glowing pl-3\">\n                      {{stakedMPHBalance.toFormat(4)}} MPH-ETH UNI-V2\n                    </h2>\n                    <h5 class=\"mb-3 text-white pl-3\">\n                      (${{stakedMPHBalance.times(mphLPPriceUSD).toFormat(4)}})\n                      ({{stakedMPHPoolProportion.toFormat(4)}}% of the pool)\n                    </h5>\n                    <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openStakeModal()\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Stake\n                    </button>\n                    <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openUnstakeModal()\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake\n                    </button>\n                    <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"unstakeAndClaim()\"\n                      [disabled]=\"!canContinue() || wallet.watching\">\n                      <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake all & Claim\n                    </button>\n                    <div class=\"row pl-3 mt-4\">\n                      <div class=\"col-12 col-lg-6\">\n                        <h5 class=\"text-uppercase\">\n                          Claimable rewards\n                        </h5>\n                        <!-- Heading -->\n                        <h2 class=\"mb-3 glowing\">\n                          {{claimableRewards.toFormat(4)}} MPH\n                        </h2>\n                        <h5 class=\"mb-3 text-white\">\n                          ${{claimableRewards.times(mphPriceUSD).toFormat(4)}} /\n                          ${{rewardPerDay.times(mphPriceUSD).toFormat(4)}}/day / {{rewardPerDay.toFormat(4)}} MPH/day\n                        </h5>\n                        <button type=\"button\" class=\"card-link small px-1\" (click)=\"claim()\"\n                          [disabled]=\"!canContinue() || wallet.watching\">\n                          <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Claim\n                        </button>\n                      </div>\n                      <div class=\"col-12 col-lg-6\">\n                        <h5 class=\"text-uppercase\">\n                          Estimated ROI (y)\n                        </h5>\n                        <!-- Heading -->\n                        <h2 class=\"mb-3 glowing\">\n                          {{yearlyROI.toFormat(4)}}%\n                        </h2>\n                        <h5 class=\"mb-2 text-white\">\n                          {{monthlyROI.toFormat(4)}}% (m) / {{weeklyROI.toFormat(4)}}% (w) / {{dailyROI.toFormat(4)}}%\n                          (d)\n                        </h5>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"col-12 col-lg-6\">\n                    <ul class=\"list-group list-group-flush\">\n                      <li class=\"list-group-item\">\n                        <div class=\"row\">\n                          <div class=\"col text-left\">\n                            <h3 class=\"text-white\">Total value staked</h3>\n                          </div>\n                          <div class=\"col text-right\">\n                            <h3 class=\"glowing\">\n                              ${{totalStakedMPHBalance.times(mphLPPriceUSD).toFormat(4)}}</h3>\n                          </div>\n                        </div>\n                      </li>\n                      <li class=\"list-group-item\">\n                        <div class=\"row\">\n                          <div class=\"col text-left\">\n                            <h3 class=\"text-white\">Distribution period</h3>\n                          </div>\n                          <div class=\"col text-right\">\n                            <h3 class=\"glowing\">\n                              {{rewardStartTime}} to {{rewardEndTime}}\n                            </h3>\n                          </div>\n                        </div>\n                      </li>\n                      <li class=\"list-group-item\">\n                        <div class=\"row\">\n                          <div class=\"col text-left\">\n                            <h3 class=\"text-white\">Total reward</h3>\n                          </div>\n                          <div class=\"col text-right\">\n                            <h3 class=\"glowing\">\n                              {{totalRewardPerSecond.times(PERIOD).times(constants.DAY_IN_SEC).toFormat(0)}} MPH</h3>\n                            <h5 class=\"text-white\">\n                              ${{totalRewardPerSecond.times(PERIOD).times(constants.DAY_IN_SEC).times(mphPriceUSD).toFormat(4)}}\n                            </h5>\n                          </div>\n                        </div>\n                      </li>\n                      <li class=\"list-group-item\">\n                        <div class=\"row\">\n                          <div class=\"col text-left\">\n                            <h3 class=\"text-white\">Daily reward</h3>\n                          </div>\n                          <div class=\"col text-right\">\n                            <h3 class=\"glowing\">\n                              {{totalRewardPerSecond.times(constants.DAY_IN_SEC).toFormat(4)}} MPH\n                            </h3>\n                            <h5 class=\"text-white\">\n                              ${{totalRewardPerSecond.times(constants.DAY_IN_SEC).times(mphPriceUSD).toFormat(4)}}\n                            </h5>\n                          </div>\n                        </div>\n                      </li>\n                      <li class=\"list-group-item\">\n                        <div class=\"row\">\n                          <div class=\"col text-left\">\n                            <h3 class=\"text-white\">MPH price</h3>\n                          </div>\n                          <div class=\"col text-right\">\n                            <h3 class=\"glowing\">${{mphPriceUSD.toFormat(4)}}</h3>\n                          </div>\n                        </div>\n                      </li>\n                    </ul>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"card-deck my-4\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  <a class=\"text-purple\"\n                    href=\"https://app.bancor.network/eth/portfolio/stake/add/single/0xAbf26410b1cfF45641aF087eE939E52e328ceE46\"\n                    target=\"_blank\">Provide\n                    liquidity</a> to the Bancor MPH-BNT pair and earn BNT\n                </h5>\n                <div class=\"row\">\n                  <div class=\"col\">\n                    <!-- Heading -->\n                    <h2 class=\"mt-4 mb-2 glowing pl-3\">\n                      {{bancorStakedMPHBalance.toFormat(4)}} MPH in MPH-BNT\n                    </h2>\n                    <h5 class=\"mb-3 text-white pl-3\">\n                      (${{bancorStakedMPHBalance.times(mphPriceUSD).toFormat(4)}})\n                      ({{bancorStakedMPHPoolProportion.toFormat(4)}}% of the pool)\n                    </h5>\n                  </div>\n                  <div class=\"col\">\n                    <!-- Heading -->\n                    <h2 class=\"mt-4 mb-2 glowing pl-3\">\n                      {{bancorStakedBNTBalance.toFormat(4)}} BNT in MPH-BNT\n                    </h2>\n                    <h5 class=\"mb-3 text-white pl-3\">\n                      (${{bancorStakedBNTBalance.times(bntPriceUSD).toFormat(4)}})\n                      ({{bancorStakedBNTPoolProportion.toFormat(4)}}% of the pool)\n                    </h5>\n                  </div>\n                </div>\n                <a class=\"text-purple pl-3\"\n                  href=\"https://app.bancor.network/eth/portfolio\" target=\"_blank\">Manage\n                  liquidity <i class=\"fe fe-external-link ml-2 align-bottom\"></i></a>\n                <div class=\"row pl-3 mt-4\">\n                  <div class=\"col-12 col-lg-6\">\n                    <h5 class=\"text-uppercase\">\n                      Claimable rewards\n                    </h5>\n                    <!-- Heading -->\n                    <h2 class=\"mb-3 glowing\">\n                      {{bancorClaimableRewards.toFormat(4)}} BNT\n                    </h2>\n                    <h5 class=\"mb-3 text-white\">\n                      ${{bancorClaimableRewards.times(bntPriceUSD).toFormat(4)}}\n                    </h5>\n                    <a class=\"text-purple\"\n                      href=\"https://app.bancor.network/eth/portfolio\"\n                      target=\"_blank\">Manage rewards <i class=\"fe fe-external-link ml-2 align-bottom\"></i></a>\n                  </div>\n                  <div class=\"col-12 col-lg-6\">\n                    <h5 class=\"text-uppercase\">\n                      Estimated ROI (y) to provide\n                    </h5>\n                    <!-- Heading -->\n                    <h2 class=\"mb-1 glowing\">\n                      MPH {{bancorMPHYearlyROI.toFormat(4)}}%\n                    </h2>\n                    <!-- Heading -->\n                    <h2 class=\"mb-3 glowing\">\n                      BNT {{bancorBNTYearlyROI.toFormat(4)}}%\n                    </h2>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                   <a class=\"text-purple\"\n                    href=\"https://analytics.sushi.com/pairs/0xb2c29e311916a346304f83aa44527092d5bd4f0f\"\n                    target=\"_blank\">Provide\n                    liquidity</a> to the SushiSwap MPH-ETH pair and earn SUSHI\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mt-4 mb-2 glowing pl-3\">\n                  {{sushiStakedLPBalance.toFormat(4)}} MPH-ETH SLP\n                </h2>\n                <h5 class=\"mb-3 text-white pl-3\">\n                  (${{sushiStakedLPBalance.times(sushiLPPriceUSD).toFormat(4)}})\n                  ({{sushiStakedLPPoolProportion.toFormat(4)}}% of the pool)\n                </h5>\n                <a class=\"text-purple pl-3\"\n                  href=\"https://analytics.sushi.com/pairs/0xb2c29e311916a346304f83aa44527092d5bd4f0f\" target=\"_blank\">Manage\n                  liquidity <i class=\"fe fe-external-link ml-2 align-bottom\"></i></a>\n                <div class=\"row pl-3 mt-4\">\n                  <div class=\"col-12 col-lg-6\">\n                    <h5 class=\"text-uppercase\">\n                      Claimable rewards\n                    </h5>\n                    <!-- Heading -->\n                    <h2 class=\"mb-3 glowing\">\n                      {{sushiClaimableRewards.toFormat(4)}} SUSHI\n                    </h2>\n                    <h5 class=\"mb-3 text-white\">\n                      ${{sushiClaimableRewards.times(sushiPriceUSD).toFormat(4)}} /\n                      ${{sushiRewardPerDay.times(sushiPriceUSD).toFormat(4)}}/day / {{sushiRewardPerDay.toFormat(4)}}\n                      SUSHI/day\n                    </h5>\n                    <a class=\"text-purple\"\n                      href=\"https://app.sushi.com/vesting\"\n                      target=\"_blank\">Claim <i class=\"fe fe-external-link ml-2 align-bottom\"></i></a>\n                  </div>\n                  <div class=\"col-12 col-lg-6\">\n                    <h5 class=\"text-uppercase\">\n                      Estimated ROI (y)\n                    </h5>\n                    <!-- Heading -->\n                    <h2 class=\"mb-3 glowing\">\n                      {{sushiYearlyROI.toFormat(4)}}%\n                    </h2>\n                    <h5 class=\"mb-2 text-white\">\n                      {{sushiMonthlyROI.toFormat(4)}}% (m) / {{sushiWeeklyROI.toFormat(4)}}% (w) /\n                      {{sushiDailyROI.toFormat(4)}}% (d)\n                    </h5>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1>Claim ETH (LPs)</h1>\n          <div class=\"card-deck my-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Your Claim Amount\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  {{claimAmount.toFormat()}} ETH\n                </h2>\n                <ng-container *ngIf=\"claimed\">\n                  <h5 class=\"mb-3 text-white pl-3\">\n                    You have already claimed, and the funds have been sent to\n                    your wallet.\n                  </h5>\n                </ng-container>\n                <ng-container *ngIf=\"!claimed && wallet.connected && claimAmount.gt(0)\">\n                  <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"claim()\">\n                    <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Claim\n                  </button>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->","import { Component, OnInit } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport { MerkleService } from '../merkle.service';\nimport { WalletService } from '../wallet.service';\n\n@Component({\n  selector: 'app-claim-eth',\n  templateUrl: './claim-eth.component.html',\n  styleUrls: ['./claim-eth.component.css']\n})\nexport class ClaimETHComponent implements OnInit {\n  claimAmount: BigNumber;\n  claimed: boolean;\n\n  constructor(\n    public wallet: WalletService,\n    public merkle: MerkleService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    if (this.wallet.connected) {\n      const claim = this.merkle.getETHClaimForAddress(this.wallet.userAddress);\n      this.claimAmount = new BigNumber(claim.amount).div(1e18);\n\n      const distributor = this.merkle.getETHMerkleDistributor();\n      this.claimed = await distributor.methods.isClaimed(claim.index).call();\n    }\n  }\n\n  resetData() {\n    this.claimAmount = new BigNumber(0);\n    this.claimed = false;\n  }\n\n  claim() {\n    const distributor = this.merkle.getETHMerkleDistributor();\n    const claim = this.merkle.getETHClaimForAddress(this.wallet.userAddress);\n    const func = distributor.methods.claim(claim.index, this.wallet.userAddress, claim.amount, claim.proof);\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport BigNumber from 'bignumber.js';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConstantsService {\n  PRECISION = 1e18;\n  YEAR_IN_SEC = 31556952;\n  MONTH_IN_SEC = 30 * 24 * 60 * 60;\n  WEEK_IN_SEC = 7 * 24 * 60 * 60;\n  DAY_IN_SEC = 24 * 60 * 60;\n  WETH_ADDR = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\n  GOV_TREASURY = '0x56f34826Cc63151f74FA8f701E4f73C5EAae52AD';\n  DEV_WALLET = '0xfecBad5D60725EB6fd10f8936e02fa203fd27E4b';\n  COMPOUND_COMPTROLLER = '0x3d9819210a31b4961b30ef54be2aed79b9c9cd3b';\n  COMP = '0xc00e94cb662c3520282e6f5717214004a7f26888';\n  FARM = '0xa0246c9032bC3A600820415aE600c6388619A14D';\n  DUMPER = '0x5B3C81C86d17786255904c316bFCB38A46146ef8';\n  MPH_MERKLE_DISTRIBUTOR = '0x8c5ddBB0fd86B6480D81A1a5872a63812099C043'; // the MPH V2 distributor\n  GRAPHQL_ENDPOINT = 'https://api.thegraph.com/subgraphs/name/bacon-labs/eighty-eight-mph';\n  SUBGRAPH_SYNC_WARNING_THRESHOLD = 20; // if falls behind by 20 blocks, display error banner\n  SUSHI_MASTERCHEF = '0xc2edad668740f1aa35e4d8f227fb8e17dca888cd';\n  SUSHI_MPH_ONSEN_ID = 92;\n  SUSHI_LP = '0xb2c29e311916a346304f83aa44527092d5bd4f0f';\n  SUSHI = '0x6b3595068778dd592e39a122f4f5a5cf09c90fe2';\n  LINKSWAP_STAKING = '0x0E6FA9f95a428F185752b60D38c62184854bB9e1';\n  YFLINK = '0x28cb7e841ee97947a86B06fA4090C8451f64c0be';\n  LINKSWAP_LP = '0x40f1068495ba9921d6c18cf1ac25f718df8ce69d';\n  ZERO_ADDR = '0x0000000000000000000000000000000000000000';\n  MPH = '0x8888801af4d980682e47f1a9036e589479e835c5';\n  BNT = '0x1f573d6fb3f13d689ff844b4ce37794d79a7ff1c';\n  BANCOR_LP_STATS = '0x9712Bb50DC6Efb8a3d7D12cEA500a50967d2d471';\n  BANCOR_STAKING_REWARDS = '0x4B90695C2013FC60df1e168c2bCD4Fd12f5C9841';\n  BANCOR_STAKING_REWARDS_STORE = '0x891AfF26593Da95e574E3f62619dAD6624FB5693';\n  BANCOR_MPHBNT_POOL = '0xabf26410b1cff45641af087ee939e52e328cee46';\n}\n","import { Injectable } from '@angular/core';\nimport Web3 from 'web3';\nimport { WalletService } from './wallet.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class MerkleService {\n  ETH_MERKLE_DISTRIBUTOR = '0x4b36027316dDC9bEE9a1Ae8EaF0e34d1F9B1814B';\n  MPH_MERKLE_DISTRIBUTOR = '0x8c5ddBB0fd86B6480D81A1a5872a63812099C043';\n\n  constructor(public wallet: WalletService) { }\n\n  getETHClaimForAddress(address: string) {\n    const merkleTree = require('src/assets/json/eth-snapshot-merkle-tree.json') as MerkleDistributorInfo;\n    const checksumAddress = this.wallet.readonlyWeb3().utils.toChecksumAddress(address);\n    const claim = merkleTree.claims[checksumAddress];\n    return claim;\n  }\n\n  getMPHClaimForAddress(address: string) {\n    const merkleTree = require('src/assets/json/mph-snapshot-merkle-tree.json') as MerkleDistributorInfo;\n    const checksumAddress = this.wallet.readonlyWeb3().utils.toChecksumAddress(address);\n    const claim = merkleTree.claims[checksumAddress];\n    return claim;\n  }\n\n  getETHMerkleDistributor(web3?: Web3) {\n    const abi = require(`../assets/abis/MerkleDistributor.json`);\n    const address = this.ETH_MERKLE_DISTRIBUTOR;\n    if (web3) {\n      return new web3.eth.Contract(abi, address);\n    }\n    return new this.wallet.web3.eth.Contract(abi, address);\n  }\n\n  getMPHMerkleDistributor(web3?: Web3) {\n    const abi = require(`../assets/abis/MerkleDistributor.json`);\n    const address = this.MPH_MERKLE_DISTRIBUTOR;\n    if (web3) {\n      return new web3.eth.Contract(abi, address);\n    }\n    return new this.wallet.web3.eth.Contract(abi, address);\n  }\n}\n\ninterface MerkleDistributorInfo {\n  merkleRoot: string\n  tokenTotal: string\n  claims: {\n    [account: string]: {\n      index: number\n      amount: string\n      proof: string[]\n      flags?: {\n        [flag: string]: boolean\n      }\n    }\n  }\n}","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1>Claim MPH v2</h1>\n          <div class=\"card-deck my-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Your Claim Amount\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  {{claimAmount.toFormat()}} MPH\n                </h2>\n                <ng-container *ngIf=\"claimed\">\n                  <h5 class=\"mb-3 text-white pl-3\">\n                    You have already claimed, and the funds have been sent to\n                    your wallet.\n                  </h5>\n                </ng-container>\n                <ng-container *ngIf=\"!claimed && wallet.connected && claimAmount.gt(0)\">\n                  <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"claim()\">\n                    <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Claim\n                  </button>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->","import { Component, OnInit } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport { MerkleService } from '../merkle.service';\nimport { WalletService } from '../wallet.service';\n\n@Component({\n  selector: 'app-claim-mph',\n  templateUrl: './claim-mph.component.html',\n  styleUrls: ['./claim-mph.component.css']\n})\nexport class ClaimMPHComponent implements OnInit {\n  claimAmount: BigNumber;\n  claimed: boolean;\n\n  constructor(\n    public wallet: WalletService,\n    public merkle: MerkleService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    if (this.wallet.connected) {\n      const claim = this.merkle.getMPHClaimForAddress(this.wallet.userAddress);\n      this.claimAmount = new BigNumber(claim.amount).div(1e18);\n\n      const distributor = this.merkle.getMPHMerkleDistributor();\n      this.claimed = await distributor.methods.isClaimed(claim.index).call();\n    }\n  }\n\n  resetData() {\n    this.claimAmount = new BigNumber(0);\n    this.claimed = false;\n  }\n\n  claim() {\n    const distributor = this.merkle.getMPHMerkleDistributor();\n    const claim = this.merkle.getMPHClaimForAddress(this.wallet.userAddress);\n    const func = distributor.methods.claim(claim.index, this.wallet.userAddress, claim.amount, claim.proof);\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n}\n","<!-- modal modalBondDetails -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 pt-0\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                Floating-rate bond details\n              </h1>\n              <p class=\"text-white small text-center mb-5\">View your current profits, estimate the bond's eventual ROI, and view the deposits whose debt your bond has funded.</p>\n              <div class=\"card\">\n                <div class=\"card-body p-0\">\n                  <div class=\"row justify-content-center px-4 pt-4\">\n                    <div class=\"col-12 col-md-6 col-lg-3\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Amount paid\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.deficitUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{funding.deficitToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</div>\n                    </div>\n                    <div class=\"col-12 col-md-6 col-lg-3\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        You earn interest on\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.currentDepositUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{funding.currentDepositToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</div>\n                    </div>\n                    <div class=\"col-12 col-md-6 col-lg-3\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Interest paid out\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.interestEarnedUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{funding.interestEarnedToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</div>\n                      <h5 class=\"mb-0 text-white\">Realized ROI: {{roi}}%</h5>\n                    </div>\n                    <div class=\"col-12 col-md-6 col-lg-3\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Refund amount\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{funding.refundAmountUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{funding.refundAmountToken.toFormat(4)}}\n                        {{funderPool.poolInfo.stablecoinSymbol}}</div>\n                    </div>\n                  </div>\n                  <div class=\"row justify-content-center px-4 pt-4\">\n                    <div class=\"col-12 col-lg-6\">\n                      <h3>Estimate your ROI</h3>\n                      <h4 class=\"mb-1\">\n                        Your avg. floating-rate APY prediction:\n                        <strong>{{floatingRatePrediction.toFormat(1)}}%</strong>\n                      </h4>\n                      <input type=\"range\" class=\"custom-range\" min=\"0\"\n                        max={{funding.pool.oracleInterestRate.times(2).toFixed(1)}} step=\"0.1\"\n                        [value]=\"floatingRatePrediction.toFixed(1)\"\n                        (input)=\"updateFloatingRatePrediction($event.target.value)\">\n                      <div class=\"row justify-content-between text-white px-4 mb-4\">\n                        <div class=\"col\">\n                          <small>0%</small>\n                        </div>\n                        <div class=\"col text-center\">\n                          <small>{{funding.pool.oracleInterestRate.toFormat(1)}}% <br> (Current <a href=\"https://88mph.app/docs/howitworks/#interest-rate-model\" target=\"_blank\">30d EMA floating-rate APY</a>)</small>\n                        </div>\n                        <div class=\"col text-right\">\n                          <small>{{funding.pool.oracleInterestRate.times(2).toFormat(1)}}%</small>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"col-12 col-lg-6\">\n                      <div class=\"row\">\n                        <div class=\"col mb-4\">\n                          <h6 class=\"header-pretitle mb-2\">\n                            Estimated ROI\n                          </h6>\n                          <h4 class=\"mb-1 font-weight-normal glowing\">\n                            {{estimatedROI.plus(totalMPHReward.times(mphPriceUSD).div(funding.deficitUSD).times(100)).toFormat(4)}}%\n                          </h4>\n                          <h5 class=\"mb-3 text-white\">\n                            {{estimatedROI.toFormat(4)}}% in {{funderPool.poolInfo.stablecoinSymbol}} + {{totalMPHReward.times(mphPriceUSD).div(funding.deficitUSD).times(100).toFormat(4)}}% in MPH\n                          </h5>\n                        </div>\n                        <div class=\"col mb-4\">\n                          <h6 class=\"header-pretitle mb-2\">\n                            Estimated profit\n                          </h6>\n                          <h4 class=\"mb-1 font-weight-normal glowing\">\n                            ${{estimatedProfitUSD.plus(totalMPHReward.times(mphPriceUSD)).toFormat(4)}}\n                          </h4>\n                          <h5 class=\"mb-3 text-white\">\n                            {{estimatedProfitToken.toFormat(4)}} {{funderPool.poolInfo.stablecoinSymbol}} + {{totalMPHReward.toFormat(4)}} MPH\n                          </h5>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"table-responsive mb-0\">\n                    <table class=\"table table-sm table-nowrap card-table\">\n                      <thead>\n                        <th>\n                          Status\n                        </th>\n                        <th>\n                          Maturation time\n                        </th>\n                        <th>\n                          Deposit amount\n                        </th>\n                        <th>\n                          Interest paid out\n                        </th>\n                        <th>\n                          Refund amount\n                        </th>\n                        <th>\n                          MPH rewards\n                        </th>\n                      </thead>\n                      <tbody class=\"list\">\n                        <ng-container *ngFor=\"let deposit of deposits\">\n                          <tr>\n                            <td>\n                              <span class=\"badge mb-1\" [ngClass]=\"{\n                                  'badge-soft-danger': !deposit.active, \n                                  'badge-soft-success': deposit.active\n                                }\">\n                                {{deposit.active ? 'Active' : 'Withdrawn'}}\n                              </span>\n                            </td>\n                            <td>\n                              {{timestampToDateString(deposit.maturationTimestamp)}}\n                            </td>\n                            <td>\n                              {{deposit.amount.toFormat(4)}}\n                            </td>\n                            <td>\n                              {{deposit.fundingInterestPaid.toFormat(4)}}\n                            </td>\n                            <td>\n                              {{deposit.fundingRefundAmount.toFormat(4)}}\n                            </td>\n                            <td>\n                              {{deposit.funderMPHReward.toFormat(4)}}\n                            </td>\n                          </tr>\n                        </ng-container>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Apollo, gql } from 'apollo-angular';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { FunderPool, Funding } from '../interface';\n\n@Component({\n  selector: 'app-modal-bond-details',\n  templateUrl: './modal-bond-details.component.html',\n  styleUrls: ['./modal-bond-details.component.css']\n})\nexport class ModalBondDetailsComponent implements OnInit {\n  deposits: Deposit[];\n  roi: string;\n  floatingRatePrediction: BigNumber;\n  estimatedROI: BigNumber;\n  estimatedProfitUSD: BigNumber;\n  estimatedProfitToken: BigNumber;\n  totalAmountMulTime: BigNumber;\n  interestFromLeftoverDeposits: BigNumber;\n  totalMPHReward: BigNumber;\n  @Input() public funderPool: FunderPool;\n  @Input() public funding: Funding;\n  @Input() public mphPriceUSD: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n  }\n\n  loadData(): void {\n    const { nftID, pool, interestEarnedUSD, deficitUSD, refundAmountUSD } = this.funding;\n    this.roi = interestEarnedUSD.minus(deficitUSD.minus(refundAmountUSD)).div(deficitUSD.minus(refundAmountUSD)).times(100).toFormat(2);\n    const queryString = gql`\n      {\n        deposits(where: { fundingID: \"${nftID}\", pool: \"${pool.address.toLowerCase()}\" }, orderBy: maturationTimestamp) {\n          amount\n          maturationTimestamp\n          depositTimestamp\n          interestEarned\n          mintMPHAmount\n          takeBackMPHAmount\n          initialMoneyMarketIncomeIndex\n          fundingInterestPaid\n          fundingRefundAmount\n          active\n        }\n      }\n    `;\n    this.apollo.query<FundingDepositResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n  }\n\n  async handleData(queryResult: ApolloQueryResult<FundingDepositResult>): Promise<void> {\n    if (!queryResult.loading) {\n      const { deposits } = queryResult.data;\n      const now = Date.now() / 1e3;\n\n      let newDeposits: Array<Deposit> = [];\n      let newTotalAmountMulTime = new BigNumber(0);\n      let newTotalMPHReward = new BigNumber(0);\n      for (const deposit of deposits) {\n        const mphRewardTimeComponent = this.funding.creationTimestamp < deposit.maturationTimestamp ? deposit.maturationTimestamp - this.funding.creationTimestamp : 0;\n        const funderMPHReward = new BigNumber(deposit.amount).times(this.funding.pool.mphFunderRewardMultiplier).times(mphRewardTimeComponent);\n        const depositObj: Deposit = {\n          ...deposit,\n          maturationTimestamp: +deposit.maturationTimestamp,\n          amount: new BigNumber(deposit.amount),\n          fundingInterestPaid: new BigNumber(deposit.fundingInterestPaid),\n          fundingRefundAmount: new BigNumber(deposit.fundingRefundAmount),\n          funderMPHReward\n        };\n        newDeposits = [...newDeposits, depositObj];\n        newTotalMPHReward = newTotalMPHReward.plus(funderMPHReward);\n\n        if (depositObj.active) {\n          if (depositObj.maturationTimestamp > now) {\n            newTotalAmountMulTime = newTotalAmountMulTime.plus(depositObj.amount.times(depositObj.maturationTimestamp - now));\n          } else {\n            // mature but not withdrawn, compute current interest accumulated\n            const interestAccumulated = depositObj.amount.times(this.funding.pool.moneyMarketIncomeIndex).div(this.funding.recordedMoneyMarketIncomeIndex).minus(depositObj.amount);\n            this.interestFromLeftoverDeposits = this.interestFromLeftoverDeposits.plus(interestAccumulated);\n          }\n        }\n      }\n\n      this.deposits = newDeposits;\n      this.totalAmountMulTime = newTotalAmountMulTime;\n      this.totalMPHReward = newTotalMPHReward;\n      this.updateFloatingRatePrediction(this.funding.pool.oracleInterestRate);\n    }\n  }\n\n  resetData(): void {\n    this.deposits = [];\n    this.floatingRatePrediction = new BigNumber(0);\n    this.estimatedProfitToken = new BigNumber(0);\n    this.estimatedProfitUSD = new BigNumber(0);\n    this.estimatedROI = new BigNumber(0);\n    this.totalAmountMulTime = new BigNumber(0);\n    this.interestFromLeftoverDeposits = new BigNumber(0);\n    this.totalMPHReward = new BigNumber(0);\n  }\n\n  timestampToDateString(timestampSec: number): string {\n    return new Date(timestampSec * 1e3).toLocaleDateString();\n  }\n\n  updateFloatingRatePrediction(newPrediction: any) {\n    this.floatingRatePrediction = new BigNumber(newPrediction);\n    const estimatedRemainingEarnings = this.totalAmountMulTime.times(newPrediction).div(100).div(this.constants.YEAR_IN_SEC);\n    const cost = this.funding.deficitToken.minus(this.funding.refundAmountToken);\n    this.estimatedProfitToken = estimatedRemainingEarnings.plus(this.funding.interestEarnedToken).plus(this.interestFromLeftoverDeposits).minus(cost);\n    const tokenPrice = this.funding.deficitUSD.div(this.funding.deficitToken); // infer token price from funding, avoids network request\n    this.estimatedProfitUSD = this.estimatedProfitToken.times(tokenPrice);\n    this.estimatedROI = this.estimatedProfitToken.div(cost).times(100);\n  }\n}\n\ninterface Deposit {\n  amount: BigNumber;\n  maturationTimestamp: number;\n  depositTimestamp: number;\n  interestEarned: BigNumber;\n  mintMPHAmount: BigNumber;\n  takeBackMPHAmount: BigNumber;\n  initialMoneyMarketIncomeIndex: BigNumber;\n  fundingInterestPaid: BigNumber;\n  fundingRefundAmount: BigNumber;\n  active: boolean;\n  funderMPHReward: BigNumber;\n}\n\ninterface FundingDepositResult {\n  deposits: Deposit[];\n}\n","import { Injectable } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from './constants.service';\nimport { ContractService, PoolInfo } from './contract.service';\nimport { WalletService } from './wallet.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HelpersService {\n\n  constructor(\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService\n  ) {\n  }\n\n  async getTokenPriceUSD(address: string): Promise<number> {\n    if (address.toLowerCase() === '0x5B5CFE992AdAC0C9D48E05854B2d91C73a003858'.toLowerCase()) {\n      // crvHUSD\n      return 1;\n    } else if (address.toLowerCase() === '0xb19059ebb43466C323583928285a49f558E572Fd'.toLowerCase()) {\n      // crvHBTC\n      address = '0x0316EB71485b0Ab14103307bf65a021042c6d380';\n    } else if (address.toLowerCase() === '0x2fE94ea3d5d4a175184081439753DE15AeF9d614'.toLowerCase()) {\n      // crvOBTC\n      address = '0x8064d9Ae6cDf087b1bcd5BDf3531bD5d8C537a68';\n    } else if (address.toLowerCase() === '0x06325440D014e39736583c165C2963BA99fAf14E'.toLowerCase()) {\n      // CRV:STETH\n      address = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\n    } else if (address.toLowerCase() === '0x49849C98ae39Fff122806C06791Fa73784FB3675'.toLowerCase()) {\n      // CRV:RENWBTC\n      address = '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599';\n    } else if (address.toLowerCase() === '0x075b1bb99792c9E1041bA13afEf80C91a1e70fB3'.toLowerCase()) {\n      // CRV:RENWSBTC\n      address = '0x2260fac5e5542a773aa44fbcfedf7c193bc2c599';\n    }\n    const apiStr = `https://api.coingecko.com/api/v3/coins/ethereum/contract/${address}/market_chart/?vs_currency=usd&days=0`;\n    const rawResult = await this.httpsGet(apiStr, 300);\n    return rawResult.prices[0][1];\n  }\n\n  processWeb3Number(number): string {\n    return new BigNumber(number).integerValue().toFixed();\n  }\n\n  async httpsGet(apiStr, cacheMaxAge: number = 60) {\n    const request = await fetch(apiStr, { headers: { 'Cache-Control': `max-age=${cacheMaxAge}` } });\n    return await request.json();\n  }\n\n  async getMPHPriceUSD(): Promise<BigNumber> {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const uniswapPair = this.contract.getNamedContract('MPHLP', readonlyWeb3);\n    const reservesObj = await uniswapPair.methods.getReserves().call();\n    const mphReserve = new BigNumber(reservesObj._reserve0).div(this.constants.PRECISION);\n    const ethReserve = new BigNumber(reservesObj._reserve1).div(this.constants.PRECISION);\n    const priceInETH = ethReserve.div(mphReserve);\n    const ethPriceInUSD = await this.getTokenPriceUSD(this.constants.WETH_ADDR);\n    return priceInETH.times(ethPriceInUSD);\n  }\n\n  async getMPHLPPriceUSD(): Promise<BigNumber> {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const uniswapPair = this.contract.getNamedContract('MPHLP', readonlyWeb3);\n    const reservesObj = await uniswapPair.methods.getReserves().call();\n    const ethReserve = new BigNumber(reservesObj._reserve1).div(this.constants.PRECISION);\n    const ethPriceInUSD = await this.getTokenPriceUSD(this.constants.WETH_ADDR);\n    const lpTotalSupply = new BigNumber(await uniswapPair.methods.totalSupply().call()).div(this.constants.PRECISION);\n    return lpTotalSupply.isZero() ? new BigNumber(0) : ethReserve.times(ethPriceInUSD).times(2).div(lpTotalSupply);\n  }\n\n  async getLPPriceUSD(lpTokenAddress: string): Promise<BigNumber> {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const uniswapPair = this.contract.getContract(lpTokenAddress, 'MPHLP', readonlyWeb3);\n    const reservesObj = await uniswapPair.methods.getReserves().call();\n    const token0 = await uniswapPair.methods.token0().call();\n    const token1 = await uniswapPair.methods.token1().call();\n    const reserve0 = new BigNumber(reservesObj._reserve0).div(this.constants.PRECISION);\n    const reserve1 = new BigNumber(reservesObj._reserve1).div(this.constants.PRECISION);\n    const token0PriceInUSD = await this.getTokenPriceUSD(token0);\n    const token1PriceInUSD = await this.getTokenPriceUSD(token1);\n    const lpTotalSupply = new BigNumber(await uniswapPair.methods.totalSupply().call()).div(this.constants.PRECISION);\n    return lpTotalSupply.isZero() ? new BigNumber(0) : reserve0.times(token0PriceInUSD).plus(reserve1.times(token1PriceInUSD)).div(lpTotalSupply);\n  }\n\n  async getZCBLPPriceUSD(lpTokenAddress: string, baseTokenAddress: string): Promise<BigNumber> {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const uniswapPair = this.contract.getContract(lpTokenAddress, 'MPHLP', readonlyWeb3);\n    const reservesObj = await uniswapPair.methods.getReserves().call();\n    const token0 = await uniswapPair.methods.token0().call();\n    const token1 = await uniswapPair.methods.token1().call();\n    let baseTokenReserve;\n    if (token0.toLowerCase() === baseTokenAddress.toLowerCase()) {\n      // base token is token0\n      baseTokenReserve = new BigNumber(reservesObj._reserve0).div(this.constants.PRECISION);\n    } else {\n      // base token is token1\n      baseTokenReserve = new BigNumber(reservesObj._reserve1).div(this.constants.PRECISION);\n    }\n    const baseTokenPriceInUSD = await this.getTokenPriceUSD(baseTokenAddress);\n    const totalValueLocked = baseTokenReserve.times(baseTokenPriceInUSD).times(2);\n    const lpTotalSupply = new BigNumber(await uniswapPair.methods.totalSupply().call()).div(this.constants.PRECISION);\n    return lpTotalSupply.isZero() ? new BigNumber(0) : totalValueLocked.div(lpTotalSupply);\n  }\n\n  applyFeeToInterest(rawInterestAmount, poolInfo: PoolInfo): BigNumber {\n    let interestFee = 0.1;\n    if (poolInfo.interestFee) {\n      interestFee = poolInfo.interestFee;\n    }\n    return new BigNumber(rawInterestAmount).times(1 - interestFee);\n  }\n\n  applyDepositFee(rawDepositAmount, poolInfo: PoolInfo): BigNumber {\n    if (!poolInfo.depositFee) {\n      return rawDepositAmount;\n    }\n    return new BigNumber(rawDepositAmount).times(1 - poolInfo.depositFee);\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport gql from 'graphql-tag';\nimport { ContractService } from '../contract.service';\nimport { WalletService } from '../wallet.service';\nimport { ModalStakeComponent } from './modal-stake/modal-stake.component';\nimport { ConstantsService } from '../constants.service';\nimport { HelpersService } from '../helpers.service';\nimport { ModalUnstakeComponent } from './modal-unstake/modal-unstake.component';\n\n@Component({\n  selector: 'app-rewards',\n  templateUrl: './rewards.component.html',\n  styleUrls: ['./rewards.component.css']\n})\nexport class RewardsComponent implements OnInit {\n  PERIOD = 7; // 7 days\n\n  stakedMPHBalance: BigNumber;\n  stakedMPHPoolProportion: BigNumber;\n  claimableRewards: BigNumber;\n  rewardPerWeek: BigNumber;\n  totalRewardPerSecond: BigNumber;\n  rewardPerMPHPerSecond: BigNumber;\n  totalStakedMPHBalance: BigNumber;\n  totalHistoricalReward: BigNumber;\n  rewardStartTime: string;\n  rewardEndTime: string;\n  yearlyROI: BigNumber;\n  monthlyROI: BigNumber;\n  weeklyROI: BigNumber;\n  dailyROI: BigNumber;\n  mphPriceUSD: BigNumber;\n  protocolFeesUSD: BigNumber;\n  compRewardsToken: BigNumber;\n  compRewardsUSD: BigNumber;\n  farmRewardsToken: BigNumber;\n  farmRewardsUSD: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    private modalService: NgbModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected || this.wallet.watching, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, false);\n      this.loadData(true, false);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  async loadData(loadUser: boolean, loadGlobal: boolean) {\n    if (loadGlobal) {\n      const queryString = gql`\n      {\n        mph(id: \"0\") {\n          id\n          rewardPerMPHPerSecond\n          rewardPerSecond\n          totalHistoricalReward\n        }\n      }\n    `;\n      this.apollo.query<QueryResult>({\n        query: queryString\n      }).subscribe((x) => this.handleData(x));\n    }\n\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const rewards = this.contract.getNamedContract('Rewards', readonlyWeb3);\n\n    if (this.wallet.connected && loadUser && !this.wallet.watching) {\n      rewards.methods.balanceOf(this.wallet.userAddress).call().then(async stakeBalance => {\n        this.stakedMPHBalance = new BigNumber(stakeBalance).div(this.constants.PRECISION);\n        const totalStakedMPHBalance = new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION);\n        this.stakedMPHPoolProportion = this.stakedMPHBalance.div(totalStakedMPHBalance).times(100);\n        if (this.stakedMPHPoolProportion.isNaN()) {\n          this.stakedMPHPoolProportion = new BigNumber(0);\n        }\n        const weekInSeconds = 7 * 24 * 60 * 60;\n        this.rewardPerWeek = this.stakedMPHBalance.times(this.rewardPerMPHPerSecond).times(weekInSeconds);\n      });\n\n      rewards.methods.earned(this.wallet.userAddress).call().then(claimableRewards => {\n        this.claimableRewards = new BigNumber(claimableRewards).div(this.constants.PRECISION);\n      });\n    }\n\n    if (loadUser && this.wallet.watching) {\n      rewards.methods.balanceOf(this.wallet.watchedAddress).call().then(async stakeBalance => {\n        this.stakedMPHBalance = new BigNumber(stakeBalance).div(this.constants.PRECISION);\n        const totalStakedMPHBalance = new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION);\n        this.stakedMPHPoolProportion = this.stakedMPHBalance.div(totalStakedMPHBalance).times(100);\n        if (this.stakedMPHPoolProportion.isNaN()) {\n          this.stakedMPHPoolProportion = new BigNumber(0);\n        }\n        const weekInSeconds = 7 * 24 * 60 * 60;\n        this.rewardPerWeek = this.stakedMPHBalance.times(this.rewardPerMPHPerSecond).times(weekInSeconds);\n      });\n\n      rewards.methods.earned(this.wallet.watchedAddress).call().then(claimableRewards => {\n        this.claimableRewards = new BigNumber(claimableRewards).div(this.constants.PRECISION);\n      });\n    }\n\n    if (loadGlobal) {\n      // load reward accumulation stats\n      this.loadRewardAccumulationStats();\n\n      // load reward start & end time\n      rewards.methods.periodFinish().call().then(endTime => {\n        this.rewardStartTime = new Date((+endTime - this.PERIOD * 24 * 60 * 60) * 1e3).toLocaleString();\n        this.rewardEndTime = new Date(+endTime * 1e3).toLocaleString();\n      });\n\n      rewards.methods.totalSupply().call().then(async totalSupply => {\n        this.totalStakedMPHBalance = new BigNumber(totalSupply).div(this.constants.PRECISION);\n        this.mphPriceUSD = await this.helpers.getMPHPriceUSD();\n        let secondROI = this.totalRewardPerSecond.div(this.totalStakedMPHBalance.times(this.mphPriceUSD)).times(100);\n        if (secondROI.isNaN()) {\n          secondROI = new BigNumber(0);\n        }\n        this.yearlyROI = secondROI.times(this.constants.YEAR_IN_SEC);\n        this.monthlyROI = secondROI.times(this.constants.MONTH_IN_SEC);\n        this.weeklyROI = secondROI.times(this.constants.WEEK_IN_SEC);\n        this.dailyROI = secondROI.times(this.constants.DAY_IN_SEC);\n      });\n    }\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const mph = queryResult.data.mph;\n      if (mph) {\n        this.rewardPerMPHPerSecond = new BigNumber(mph.rewardPerMPHPerSecond);\n        this.totalRewardPerSecond = new BigNumber(mph.rewardPerSecond);\n        this.totalHistoricalReward = new BigNumber(mph.totalHistoricalReward);\n      }\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.stakedMPHBalance = new BigNumber(0);\n      this.stakedMPHPoolProportion = new BigNumber(0);\n      this.claimableRewards = new BigNumber(0);\n    }\n\n    if (resetGlobal) {\n      this.totalStakedMPHBalance = new BigNumber(0);\n      this.rewardPerMPHPerSecond = new BigNumber(0);\n      this.rewardPerWeek = new BigNumber(0);\n      this.totalRewardPerSecond = new BigNumber(0);\n      this.totalHistoricalReward = new BigNumber(0);\n      this.mphPriceUSD = new BigNumber(0);\n      this.yearlyROI = new BigNumber(0);\n      this.monthlyROI = new BigNumber(0);\n      this.weeklyROI = new BigNumber(0);\n      this.dailyROI = new BigNumber(0);\n      this.protocolFeesUSD = new BigNumber(0);\n      this.compRewardsToken = new BigNumber(0);\n      this.compRewardsUSD = new BigNumber(0);\n      this.farmRewardsToken = new BigNumber(0);\n      this.farmRewardsUSD = new BigNumber(0);\n    }\n  }\n\n  loadRewardAccumulationStats() {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n\n    // compute protocol fees\n    const allPools = this.contract.getPoolInfoList();\n    let protocolFeesUSD = new BigNumber(0);\n    let countedStablecoinMap = {};\n    Promise.all(allPools.map(async poolInfo => {\n      if (countedStablecoinMap[poolInfo.stablecoinSymbol]) {\n        return;\n      }\n      countedStablecoinMap[poolInfo.stablecoinSymbol] = true;\n      const poolStablecoin = this.contract.getPoolStablecoin(poolInfo.name, readonlyWeb3);\n      const poolFeesToken = new BigNumber(await poolStablecoin.methods.balanceOf(this.constants.DUMPER).call()).div(Math.pow(10, poolInfo.stablecoinDecimals));\n      const stablecoinPrice = await this.helpers.getTokenPriceUSD(poolInfo.stablecoin);\n      protocolFeesUSD = protocolFeesUSD.plus(poolFeesToken.times(stablecoinPrice));\n    })).then(() => {\n      this.protocolFeesUSD = protocolFeesUSD;\n    });\n\n    // compute COMP rewards\n    const compoundPools = allPools.filter(poolInfo => poolInfo.protocol === 'Compound');\n    const compoundLens = this.contract.getNamedContract('CompoundLens', readonlyWeb3);\n    const compToken = this.contract.getERC20(this.constants.COMP, readonlyWeb3);\n    let compRewardsToken = new BigNumber(0);\n    Promise.all(compoundPools.map(async poolInfo => {\n      const rewardUnclaimed = new BigNumber((await compoundLens.methods.getCompBalanceMetadataExt(this.constants.COMP, this.constants.COMPOUND_COMPTROLLER, poolInfo.moneyMarket).call()).allocated).div(this.constants.PRECISION);\n      const rewardClaimed = new BigNumber(await compToken.methods.balanceOf(poolInfo.moneyMarket).call()).div(this.constants.PRECISION);\n      compRewardsToken = compRewardsToken.plus(rewardUnclaimed).plus(rewardClaimed);\n    })).then(async () => {\n      const rewardInDumper = new BigNumber(await compToken.methods.balanceOf(this.constants.DUMPER).call()).div(this.constants.PRECISION);\n      compRewardsToken = compRewardsToken.plus(rewardInDumper);\n\n      this.compRewardsToken = compRewardsToken;\n      const compPriceUSD = await this.helpers.getTokenPriceUSD(this.constants.COMP);\n      this.compRewardsUSD = compRewardsToken.times(compPriceUSD);\n    });\n\n    // compute FARM rewards\n    const harvestPools = allPools.filter(poolInfo => poolInfo.protocol === 'Harvest');\n    const farmToken = this.contract.getERC20(this.constants.FARM, readonlyWeb3);\n    let farmRewardsToken = new BigNumber(0);\n    Promise.all(harvestPools.map(async poolInfo => {\n      const stakingPool = this.contract.getRewards(poolInfo.stakingPool, readonlyWeb3);\n      const rewardUnclaimed = new BigNumber(await stakingPool.methods.earned(poolInfo.moneyMarket).call()).div(this.constants.PRECISION);\n      farmRewardsToken = farmRewardsToken.plus(rewardUnclaimed);\n    })).then(async () => {\n      const rewardInDumper = new BigNumber(await farmToken.methods.balanceOf(this.constants.DUMPER).call()).div(this.constants.PRECISION);\n      farmRewardsToken = farmRewardsToken.plus(rewardInDumper);\n\n      this.farmRewardsToken = farmRewardsToken;\n      const farmPriceUSD = await this.helpers.getTokenPriceUSD(this.constants.FARM);\n      this.farmRewardsUSD = farmRewardsToken.times(farmPriceUSD);\n    });\n  }\n\n  openStakeModal() {\n    const modalRef = this.modalService.open(ModalStakeComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedMPHPoolProportion = this.stakedMPHPoolProportion;\n    modalRef.componentInstance.stakedMPHBalance = this.stakedMPHBalance;\n    modalRef.componentInstance.totalStakedMPHBalance = this.totalStakedMPHBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerWeek = this.rewardPerWeek;\n  }\n\n  openUntakeModal() {\n    const modalRef = this.modalService.open(ModalUnstakeComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedMPHPoolProportion = this.stakedMPHPoolProportion;\n    modalRef.componentInstance.stakedMPHBalance = this.stakedMPHBalance;\n    modalRef.componentInstance.totalStakedMPHBalance = this.totalStakedMPHBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerWeek = this.rewardPerWeek;\n  }\n\n  unstakeAndClaim() {\n    const rewards = this.contract.getNamedContract('Rewards');\n    const func = rewards.methods.exit();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  claim() {\n    const rewards = this.contract.getNamedContract('Rewards');\n    const func = rewards.methods.getReward();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected;\n  }\n}\n\ninterface QueryResult {\n  mph: {\n    id: string;\n    rewardPerMPHPerSecond: number;\n    rewardPerSecond: number;\n    totalHistoricalReward: number;\n  };\n}\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-2\">Stake your MPH tokens to earn your rewards</h1>\n          <p class=\"text-muted font-weight-bold mb-5\">If you stake your MPH, you are eligible to collect two kinds of\n            rewards: 88mph protocol fees, and yield-farmed tokens earned from the protocols 88mph is connected to (COMP,\n            CRV, etc.). Rewards are distributed in DAI. <a class=\"text-purple\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n              Help <i class=\"fe fe-external-link\"></i>\n            </a></p>\n          <div class=\"card-deck my-4\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Staked MPH\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Stake MPH tokens to earn rewards\">\n                    [i]\n                  </button>\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{stakedMPHBalance.toFormat(4)}} MPH\n                </h2>\n                <h5 class=\"mb-3 text-white pl-3\">\n                  (${{stakedMPHBalance.times(mphPriceUSD).toFormat(4)}})\n                  ({{stakedMPHPoolProportion.toFormat(4)}}% of the pool)\n                </h5>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openStakeModal()\" [disabled]=\"wallet.watching\">\n                  <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Stake\n                </button>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openUntakeModal()\" [disabled]=\"wallet.watching\">\n                  <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake\n                </button>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"unstakeAndClaim()\"\n                  [disabled]=\"!canContinue() || wallet.watching\">\n                  <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake all & Claim\n                </button>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Claimable rewards\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Amount of claimable rewards in DAI\">\n                    [i]\n                  </button>\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{claimableRewards.toFormat(4)}} DAI\n                </h2>\n                <h5 class=\"mb-3 text-white pl-3\">({{rewardPerWeek.toFormat(4)}} DAI/week)</h5>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"claim()\" [disabled]=\"!canContinue() || wallet.watching\">\n                  <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Claim\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"card-deck my-4\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Overall statistics\n                </h5>\n                <ul class=\"list-group list-group-flush\">\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Total value staked</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{totalStakedMPHBalance.toFormat(4)}} MPH\n                        </h3>\n                        <h5 class=\"text-white\">\n                          ${{totalStakedMPHBalance.times(mphPriceUSD).toFormat(4)}}\n                        </h5>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Current distribution period</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{rewardStartTime}} to {{rewardEndTime}}\n                        </h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Current period reward</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{totalRewardPerSecond.times(PERIOD).times(constants.DAY_IN_SEC).toFormat(4)}} DAI\n                        </h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Daily reward</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{totalRewardPerSecond.times(constants.DAY_IN_SEC).toFormat(4)}} DAI\n                        </h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Historical MPH staking rewards distributed</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{totalHistoricalReward.toFormat(4)}} DAI\n                        </h3>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Estimated ROI\n                </h5>\n                <ul class=\"list-group list-group-flush\">\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Yearly</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">{{yearlyROI.toFormat(4)}}%</h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Monthly</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">{{monthlyROI.toFormat(4)}}%</h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Weekly</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">{{weeklyROI.toFormat(4)}}%</h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">Daily</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">{{dailyROI.toFormat(4)}}%</h3>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"card-deck my-4\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Protocol reward accumulation statistics\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Accumulated protocol fees & yield-farmed rewards that are not yet sent to the MPH staking pool as rewards.\">\n                    [i]\n                  </button>\n                </h5>\n                <ul class=\"list-group list-group-flush\">\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">\n                          Protocol fees accumulated\n                          <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                            ngbTooltip=\"88mph charges a 10% on fixed-rate interest offered to depositors. This fee is charged upon deposit maturation, so its accumulation is not continuous.\">\n                            [i]\n                          </button>\n                        </h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          ${{protocolFeesUSD.toFormat(4)}}\n                        </h3>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">COMP accumulated</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{compRewardsToken.toFormat(4)}} COMP\n                        </h3>\n                        <h5 class=\"text-white\">\n                          ${{compRewardsUSD.toFormat(4)}}\n                        </h5>\n                      </div>\n                    </div>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <div class=\"row\">\n                      <div class=\"col text-left\">\n                        <h3 class=\"text-white\">FARM accumulated</h3>\n                      </div>\n                      <div class=\"col text-right\">\n                        <h3 class=\"glowing\">\n                          {{farmRewardsToken.toFormat(4)}} FARM\n                        </h3>\n                        <h5 class=\"text-white\">\n                          ${{farmRewardsUSD.toFormat(4)}}\n                        </h5>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n","import { Component } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { WalletService } from './wallet.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'ng88mph-frontend';\n  themeName = '80s'\n  themeURL = this.getThemeURL();\n  themes = [\n    '80s',\n    'boring'\n  ];\n\n  constructor(public wallet: WalletService, public sanitizer: DomSanitizer) {\n    const storedThemeName = window.localStorage.getItem('themeName');\n    if (storedThemeName != null) {\n      this.themeName = storedThemeName;\n    }\n    this.themeURL = this.getThemeURL();\n    wallet.connect(() => {}, () => {}, true);\n  }\n\n  setTheme(newThemeName: string): void {\n    this.themeName = newThemeName;\n    this.themeURL = this.getThemeURL();\n    window.localStorage.setItem('themeName', newThemeName);\n  }\n\n  getThemeURL() {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(`assets/css/theme-${this.themeName}.css`);\n  }\n}\n","<link rel=\"stylesheet\" [href]='themeURL'>\n\n<app-sidebar class=\"navbar navbar-vertical fixed-left navbar-expand-md navbar-light\"></app-sidebar>\n<app-header class=\"navbar navbar-expand-md d-none d-md-flex border-0\"></app-header>\n<app-sync-warning></app-sync-warning>\n<div class=\"main-content\">\n  <router-outlet></router-outlet>\n  <div class=\"container-fluid\">\n    <div class=\"row justify-content-center\">\n      <div class=\"col-12 col-lg-8 mb-3\">\n        <h5 class=\"text-uppercase\">Audited by</h5>\n        <img class=\"d-inline-block mr-4 mb-3\" style=\"height:32px; image-rendering: pixelated; filter: grayscale(1);\" src=\"./assets/img/peckshield-logo.png\" alt=\"PeckShield\" />\n        <img class=\"d-inline-block mr-4 mb-3\" style=\"height:32px; image-rendering: pixelated; filter: grayscale(1);\" src=\"./assets/img/quantstamp-logo.svg\" alt=\"Quantstamp\" />\n        <img class=\"d-inline-block mb-3\" style=\"height:32px; image-rendering: pixelated; filter: grayscale(1);\" src=\"./assets/img/certik-logo.svg\" alt=\"Certik\" />\n      </div>\n      <div class=\"col-12 col-lg-4 mb-3\">\n        <h5 class=\"text-uppercase\">Powered by</h5>\n        <a href=\"https://dashboard.alchemyapi.io/signup?referral=507c7bcb-3eb5-4ca7-b859-70471d743f21\" target=\"_blank\"><img style=\"height:42px; image-rendering: pixelated; filter: grayscale(1);\" src=\"https://static.alchemyapi.io/images/marketing/badge.png\" alt=\"Alchemy Supercharged\" /></a>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport gql from 'graphql-tag';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService } from '../contract.service';\nimport { HelpersService } from '../helpers.service';\nimport { WalletService } from '../wallet.service';\n\n@Component({\n  selector: 'app-stats',\n  templateUrl: './stats.component.html',\n  styleUrls: ['./stats.component.css']\n})\nexport class StatsComponent implements OnInit {\n  mphTotalSupply: BigNumber;\n  mphStakedPercentage: BigNumber;\n  mphTotalHistoricalReward: BigNumber;\n  totalDepositUSD: BigNumber;\n  totalInterestUSD: BigNumber;\n  mphPriceUSD: BigNumber;\n  mphCirculatingSupply: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    public helpers: HelpersService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public wallet: WalletService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n  }\n\n  async loadData() {\n    const queryString = gql`\n      {\n        dpools {\n          id\n          address\n          stablecoin\n          totalActiveDeposit\n          totalInterestPaid\n        }\n        mph(id: \"0\") {\n          id\n          totalHistoricalReward\n          rewardPerMPHPerSecond\n        }\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n\n    this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const mphToken = this.contract.getNamedContract('MPHToken', readonlyWeb3);\n    const rewards = this.contract.getNamedContract('Rewards', readonlyWeb3);\n    this.mphTotalSupply = new BigNumber(await mphToken.methods.totalSupply().call()).div(this.constants.PRECISION);\n    this.mphStakedPercentage = this.mphTotalSupply.isZero() ? new BigNumber(0) : new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION).div(this.mphTotalSupply).times(100);\n\n    // compute circulating supply\n    let mphCirculatingSupply = this.mphTotalSupply;\n    const getBalance = async address => {\n      return new BigNumber(await mphToken.methods.balanceOf(address).call()).div(this.constants.PRECISION);\n    }\n    const accountsToUpdate = [\n      this.contract.getNamedContractAddress('Farming'),\n      this.constants.GOV_TREASURY,\n      this.constants.DEV_WALLET,\n      this.constants.MPH_MERKLE_DISTRIBUTOR,\n      this.contract.getNamedContractAddress('Rewards'),\n      this.contract.getNamedContractAddress('Vesting')\n    ];\n    const accountBalances = await Promise.all(accountsToUpdate.map(account => getBalance(account)));\n    for (const balance of accountBalances) {\n      mphCirculatingSupply = mphCirculatingSupply.minus(balance);\n    }\n    this.mphCirculatingSupply = mphCirculatingSupply;\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const dpools = queryResult.data.dpools;\n      const mph = queryResult.data.mph;\n\n      if (dpools) {\n        let totalDepositUSD = new BigNumber(0);\n        let totalInterestUSD = new BigNumber(0);\n        let stablecoinPriceCache = {};\n        Promise.all(\n          dpools.map(async pool => {\n            let stablecoinPrice = stablecoinPriceCache[pool.stablecoin];\n            if (!stablecoinPrice) {\n              stablecoinPrice = await this.helpers.getTokenPriceUSD(pool.stablecoin);\n              stablecoinPriceCache[pool.stablecoin] = stablecoinPrice;\n            }\n\n            const poolDepositUSD = new BigNumber(pool.totalActiveDeposit).times(stablecoinPrice);\n            const poolInfo = this.contract.getPoolInfoFromAddress(pool.address);\n            const poolInterestUSD = this.helpers.applyFeeToInterest(new BigNumber(pool.totalInterestPaid).times(stablecoinPrice), poolInfo);\n            totalDepositUSD = totalDepositUSD.plus(poolDepositUSD);\n            totalInterestUSD = totalInterestUSD.plus(poolInterestUSD);\n          })\n        ).then(() => {\n          this.totalDepositUSD = totalDepositUSD;\n          this.totalInterestUSD = totalInterestUSD;\n        });\n      }\n\n      if (mph) {\n        this.mphTotalHistoricalReward = new BigNumber(mph.totalHistoricalReward);\n      }\n    }\n  }\n\n  resetData(): void {\n    this.mphTotalSupply = new BigNumber(0);\n    this.mphStakedPercentage = new BigNumber(0);\n    this.mphTotalHistoricalReward = new BigNumber(0);\n    this.totalDepositUSD = new BigNumber(0);\n    this.totalInterestUSD = new BigNumber(0);\n    this.mphPriceUSD = new BigNumber(0);\n    this.mphCirculatingSupply = new BigNumber(0);\n  }\n\n}\n\ninterface QueryResult {\n  dpools: {\n    id: string;\n    address: string;\n    stablecoin: string;\n    totalActiveDeposit: number;\n    totalInterestPaid: number;\n  }[];\n  mph: {\n    id: string;\n    totalHistoricalReward: number;\n    rewardPerMPHPerSecond: number;\n  };\n}","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1>88mph protocol statistics</h1>\n          <div class=\"card-deck my-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Total deposit\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  ${{totalDepositUSD.toFormat(4)}}\n                </h2>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Historical interest distributed\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  ${{totalInterestUSD.toFormat(4)}}\n                </h2>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH price\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  ${{mphPriceUSD.toFormat(4)}}\n                </h2>\n              </div>\n            </div>\n          </div>\n          <div class=\"card-deck mb-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH total supply\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{mphTotalSupply.toFormat(4)}} MPH\n                </h2>\n                <h5 class=\"text-white pl-3\">${{mphTotalSupply.times(mphPriceUSD).toFormat(4)}}</h5>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH circulating supply\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Subtracted: Liquidity mining pool, governance treasury, developer fund, MPH staking pool, Merkle distributor, unvested rewards\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{mphCirculatingSupply.toFormat(4)}} MPH\n                </h2>\n                <h5 class=\"text-white pl-3\">${{mphCirculatingSupply.times(mphPriceUSD).toFormat(4)}}</h5>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH staked in rewards pool\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{mphStakedPercentage.toFormat(4)}}%\n                </h2>\n                <h5 class=\"text-white pl-3\">\n                  ${{mphStakedPercentage.div(100).times(mphTotalSupply).times(mphPriceUSD).toFormat(4)}}\n                </h5>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Historical MPH staking rewards distributed\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  {{mphTotalHistoricalReward.toFormat(4)}} DAI\n                </h2>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->","<!-- Modal: deposit money -->\n<!-- IDEA: modal modalDeposit -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row no-gutters\">\n            <div class=\"col-auto mr-auto\">\n              <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n                aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n                <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n              </button>\n            </div>\n          </div>\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to deposit?\n              </h1>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-row\">\n                    <div class=\"form-group col-12 col-lg-12 mb-0\">\n                      <label>Lending pool</label>\n                      <div class=\"input-group input-group-lg mb-2\">\n                        <select class=\"custom-select\" (change)=\"selectPool($event.target.value)\">\n                          <option value={{pool.name}} *ngFor=\"let pool of poolList\"\n                            [selected]=\"pool.name === selectedPoolInfo.name\">{{pool.stablecoinSymbol}}\n                            ({{pool.protocol}})</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                  <div class=\"form-row\">\n                    <div class=\"form-group col mb-0\">\n                      <label>Deposit amount ({{selectedDepositToken}})</label>\n                      <div class=\"input-group mb-2\">\n                        <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\" aria-label=\"\"\n                          aria-describedby=\"\" [value]=\"depositAmount.toFixed()\"\n                          (input)=\"setDepositAmount($event.target.value)\">\n                        <div class=\"input-group-append\">\n                          <button class=\"card-link small px-1\" type=\"button\"\n                            (click)=\"setMaxDepositAmount()\">Max</button>\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"form-group col mb-0\" *ngIf=\"shouldDisplayZap\">\n                      <label>Deposit token</label>\n                      <div class=\"input-group input-group-lg\">\n                        <select class=\"custom-select\" (change)=\"selectZapDepositToken($event.target.value)\">\n                          <option value={{token}} *ngFor=\"let token of zapDepositTokens\"\n                            [selected]=\"token === selectedDepositToken\">{{token}}</option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white\">{{depositTokenBalance.toFormat()}}\n                    {{selectedDepositToken}}\n                    available</small>\n                  <small class=\"form-text text-white mb-4\">\n                    Min: {{minDepositAmount.toFormat()}} {{selectedPoolInfo.stablecoinSymbol}}\n                    Max: {{maxDepositAmount.toFormat()}} {{selectedPoolInfo.stablecoinSymbol}}\n                    (per deposit)\n                  </small>\n                  <div class=\"form-group row no-gutters\">\n                    <div class=\"col-12 col-lg-8\">\n                      <label for=\"colFormLabel\" class=\"col-form-label\">Preset lending duration</label>\n                      <div>\n                        <ng-container *ngFor=\"let period of DEPOSIT_PERIOD_PRESETS\">\n                          <ng-container *ngIf=\"period >= minDepositPeriod && maxDepositPeriod >= period\">\n                            <button class=\"card-link small px-1 ml-0 mr-2\" type=\"button\"\n                              (click)=\"setDepositTime(period)\">{{period}}d</button>\n                          </ng-container>\n                        </ng-container>\n                      </div>\n                    </div>\n                    <div class=\"col-12 col-lg-4\">\n                      <label class=\"col-form-label\">Or custom duration</label>\n                      <div class=\"input-group mb-3\">\n                        <input type=\"tel\" min=\"7\" data-mask=\"#,##0\" data-mask-reverse=\"true\" id=\"lock-period\"\n                          class=\"form-control text-right\" [value]=\"depositTimeInDays\"\n                          (input)=\"setDepositTime($event.target.value)\">\n                        <span class=\"input-group-text\" for=\"inputGroupFile02\">Days</span>\n                      </div>\n                      <small class=\"form-text text-white my-2\">\n                        Min: {{minDepositPeriod}}d\n                        Max: {{maxDepositPeriod}}d\n                      </small>\n\n\n                    </div>\n                  </div>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Deposit amount</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The amount that will be deposited to earn fixed-rate interest.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-white text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">${{helpers.applyDepositFee(depositAmountUSD,\n                              selectedPoolInfo).toFormat(4)}}</h4>\n                            <span class=\"text-white\">{{helpers.applyDepositFee(depositAmount,\n                              selectedPoolInfo).toFormat(4)}}\n                              {{selectedPoolInfo.stablecoinSymbol}}</span>\n                            <br>\n                            <small *ngIf=\"selectedPoolInfo.depositFee\">Note: A {{selectedPoolInfo.depositFee * 100}}% fee is taken by the underlying yield protocol ({{selectedPoolInfo.protocol}})</small>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Fixed-rate interest</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Fixed-rate interest you'll receive when lending period is over.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-white text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">${{helpers.applyDepositFee(interestAmountUSD, selectedPoolInfo).toFormat(4)}}</h4>\n                            <span class=\"text-white\">{{helpers.applyDepositFee(interestAmountToken, selectedPoolInfo).toFormat(4)}}\n                              {{selectedPoolInfo.stablecoinSymbol}}</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 border-0 text-white\">\n                            <strong>Fixed APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Fixed APY according to lending duration\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right glowing border-0\">\n                            {{apy.toFormat(4)}}%\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>MPH rewards (Vested over {{selectedPoolInfo.vestPeriod}})</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Depositors get rewarded with MPH tokens that can be staked to earn rewards (protocol fees, harvested tokens on external protocols, etc)\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-white text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{mphRewardAmount.times(mphPriceUSD).toFormat(4)}}</h4>\n                            <span class=\"text-white\">{{mphRewardAmount.toFormat(4)}} MPH</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>MPH to repay upon withdraw</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Depositors need to repay {{mphDepositorRewardTakeBackMultiplier.times(100).toString()}}% of their MPH tokens when they want to withdraw. Relax! Keep them warm by staking them to earn rewards (protocol fees, harvested tokens on external protocols, etc).\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-white text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{mphTakeBackAmount.times(mphPriceUSD).toFormat(4)}}</h4>\n                            <span class=\"text-white\">{{mphTakeBackAmount.toFormat(4)}} MPH</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>MPH APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Annualized MPH reward rate\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            +{{mphAPY.toFormat(4)}}%\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>MPH APY (temporary)</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Annualized temporary MPH reward rate. Depositors need to pay back {{mphDepositorRewardTakeBackMultiplier.times(100).toString()}}% of the temporary MPH reward received when they withdraw.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            +{{tempMPHAPY.toFormat(4)}}%\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" type=\"button\" (click)=\"deposit()\" [disabled]=\"!canContinue()\">\n                    Continue\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-12 col-lg-6 col-xl-6 bg-dark p-4 px-lg-5 mr-lg-n4 minvh100 d-none d-lg-flex\">\n          <div class=\"row justify-content-center\">\n            <div class=\"col-10\">\n              <div class=\"list-group list-group-flush list-group-activity my-5\">\n                <div class=\"list-group-item\">\n                  <div class=\"row\">\n                    <div class=\"col-auto\">\n\n                      <h2 class=\"text-center\">\n                        <1>\n                      </h2>\n\n                    </div>\n                    <div class=\"col ml-n2 d-flex align-items-center\">\n\n                      <!-- Heading -->\n                      <p class=\"mb-0 font-weight-bold\">\n                        Deposit plain stablecoins or tokens - USDC/UNI/yCRV/crvSBTC - which will be put into DeFi yield\n                        protocols such as Compound, Aave, and yEarn.\n                      </p>\n\n                    </div>\n                  </div> <!-- / .row -->\n                </div>\n                <div class=\"list-group-item\">\n                  <div class=\"row\">\n                    <div class=\"col-auto text-center\">\n\n                      <h2 class=\"text-center\">\n                        <2>\n                      </h2>\n\n                    </div>\n                    <div class=\"col ml-n2 d-flex align-items-center\">\n\n                      <!-- Heading -->\n                      <p class=\"mb-0 font-weight-bold\">\n                        After depositing in the pool, you receive a ERC-721 non-fungible token that represents your\n                        deposit. You may transfer it to another account, or even sell it on NFT markets such as OpenSea.\n                      </p>\n\n                    </div>\n                  </div> <!-- / .row -->\n                </div>\n                <div class=\"list-group-item\">\n                  <div class=\"row\">\n                    <div class=\"col-auto text-center\">\n\n                      <h2 class=\"text-center\">\n                        <3>\n                      </h2>\n\n                    </div>\n                    <div class=\"col ml-n2 d-flex align-items-center\">\n\n                      <!-- Heading -->\n                      <p class=\"mb-0 font-weight-bold\">\n                        By depositing into 88mph, you earn MPH tokens, which is continuously vested to you.\n                      </p>\n\n                    </div>\n                  </div> <!-- / .row -->\n                </div>\n                <div class=\"list-group-item\">\n                  <div class=\"row\">\n                    <div class=\"col-auto text-center\">\n\n                      <h2 class=\"text-center\">\n                        <4>\n                      </h2>\n\n                    </div>\n                    <div class=\"col ml-n2 d-flex align-items-center\">\n\n                      <!-- Heading -->\n                      <p class=\"mb-0 font-weight-bold\">\n                        By staking your MPH, you can claim your share of rewards from the 88mph reward pool where\n                        the protocol fees and yield-farming rewards are collected.\n                      </p>\n\n                    </div>\n                  </div> <!-- / .row -->\n                </div>\n                <div class=\"list-group-item\">\n                  <div class=\"row\">\n                    <div class=\"col-auto text-center\">\n\n                      <h2 class=\"text-center\">\n                        <5>\n                      </h2>\n\n                    </div>\n                    <div class=\"col ml-n2 d-flex align-items-center\">\n\n                      <!-- Heading -->\n                      <p class=\"mb-0 font-weight-bold\">\n                        When your lending period is over, you withdraw your principal together with the fixed-rate\n                        interest\n                        earned. When you withdraw, you need to return\n                        {{mphDepositorRewardTakeBackMultiplier.times(100).toString()}}% of the\n                        MPH tokens received at the time of deposit.\n                      </p>\n\n                    </div>\n                  </div> <!-- / .row -->\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { gql } from '@apollo/client/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ContractService, PoolInfo } from '../../contract.service';\n\n@Component({\n  selector: 'app-modal-deposit',\n  templateUrl: './modal-deposit.component.html',\n  styleUrls: ['./modal-deposit.component.css']\n})\nexport class ModalDepositComponent implements OnInit {\n  DEPOSIT_DELAY = 20 * 60; // 20 minutes\n  DEPOSIT_PERIOD_PRESETS = [7, 14, 30, 60, 90, 180, 365];\n\n  @Input() defaultPoolName: string;\n\n  poolList: PoolInfo[];\n  selectedPoolInfo: PoolInfo;\n  depositTokenBalance: BigNumber;\n  depositAmount: BigNumber;\n  depositAmountUSD: BigNumber;\n  depositTimeInDays: BigNumber;\n  interestAmountToken: BigNumber;\n  interestAmountUSD: BigNumber;\n  apy: BigNumber;\n  mphRewardAmount: BigNumber;\n  mphTakeBackAmount: BigNumber;\n  minDepositAmount: BigNumber;\n  maxDepositAmount: BigNumber;\n  minDepositPeriod: number;\n  maxDepositPeriod: number;\n  mphPriceUSD: BigNumber;\n  mphAPY: BigNumber;\n  tempMPHAPY: BigNumber;\n  mphDepositorRewardMintMultiplier: BigNumber;\n  mphDepositorRewardTakeBackMultiplier: BigNumber;\n  shouldDisplayZap: boolean;\n  selectedDepositToken: string;\n  zapDepositTokens: string[];\n\n  constructor(\n    private apollo: Apollo,\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  loadData(): void {\n    this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n    this.poolList = this.contract.getPoolInfoList();\n    this.selectPool(this.defaultPoolName ? this.defaultPoolName : this.poolList[0].name);\n  }\n\n  resetData(): void {\n    this.poolList = [];\n    this.depositTokenBalance = new BigNumber(0);\n    this.depositTimeInDays = new BigNumber(365);\n    this.depositAmount = new BigNumber(0);\n    this.depositAmountUSD = new BigNumber(0);\n    this.interestAmountToken = new BigNumber(0);\n    this.interestAmountUSD = new BigNumber(0);\n    this.apy = new BigNumber(0);\n    this.mphRewardAmount = new BigNumber(0);\n    this.mphTakeBackAmount = new BigNumber(0);\n    this.minDepositAmount = new BigNumber(0);\n    this.maxDepositAmount = new BigNumber(0);\n    this.minDepositPeriod = 0;\n    this.maxDepositPeriod = 1e4;\n    this.mphPriceUSD = new BigNumber(0);\n    this.mphAPY = new BigNumber(0);\n    this.tempMPHAPY = new BigNumber(0);\n    this.mphDepositorRewardMintMultiplier = new BigNumber(0);\n    this.mphDepositorRewardTakeBackMultiplier = new BigNumber(0);\n    this.shouldDisplayZap = false;\n    this.selectedDepositToken = '';\n    this.zapDepositTokens = [];\n  }\n\n  async selectPool(poolName: string) {\n    this.selectedPoolInfo = this.contract.getPoolInfo(poolName);\n    this.shouldDisplayZap = !!this.selectedPoolInfo.zapDepositTokens;\n    this.selectedDepositToken = this.selectedPoolInfo.stablecoinSymbol;\n    this.zapDepositTokens = [this.selectedPoolInfo.stablecoinSymbol].concat(this.selectedPoolInfo.zapDepositTokens);\n\n    const queryString = gql`\n      {\n        dpool(id: \"${this.selectedPoolInfo.address.toLowerCase()}\") {\n          id\n          MinDepositAmount\n          MaxDepositAmount\n          MinDepositPeriod\n          MaxDepositPeriod\n          mphDepositorRewardMintMultiplier\n          mphDepositorRewardTakeBackMultiplier\n        }\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => {\n      const pool = x.data.dpool;\n      this.minDepositAmount = new BigNumber(pool.MinDepositAmount);\n      this.maxDepositAmount = new BigNumber(pool.MaxDepositAmount);\n      this.minDepositPeriod = Math.ceil(pool.MinDepositPeriod / this.constants.DAY_IN_SEC);\n      this.maxDepositPeriod = Math.floor(pool.MaxDepositPeriod / this.constants.DAY_IN_SEC);\n      this.mphDepositorRewardMintMultiplier = new BigNumber(pool.mphDepositorRewardMintMultiplier);\n      this.mphDepositorRewardTakeBackMultiplier = new BigNumber(pool.mphDepositorRewardTakeBackMultiplier);\n    });\n\n    if (this.wallet.connected) {\n      const stablecoin = this.contract.getPoolStablecoin(poolName);\n      const stablecoinPrecision = Math.pow(10, this.selectedPoolInfo.stablecoinDecimals);\n      this.depositTokenBalance = new BigNumber(await stablecoin.methods.balanceOf(this.wallet.userAddress).call()).div(stablecoinPrecision);\n    }\n\n    this.updateAPY();\n  }\n\n  async selectZapDepositToken(tokenSymbol: string) {\n    this.selectedDepositToken = tokenSymbol;\n    if (this.wallet.connected) {\n      if (this.selectedDepositToken === this.selectedPoolInfo.stablecoinSymbol) {\n        const stablecoin = this.contract.getPoolStablecoin(this.selectedPoolInfo.name);\n        const stablecoinPrecision = Math.pow(10, this.selectedPoolInfo.stablecoinDecimals);\n        this.depositTokenBalance = new BigNumber(await stablecoin.methods.balanceOf(this.wallet.userAddress).call()).div(stablecoinPrecision);\n      } else {\n        const tokenAddress = this.contract.getZapDepositTokenAddress(tokenSymbol);\n        if (tokenAddress === this.constants.ZERO_ADDR) {\n          // ETH\n          this.depositTokenBalance = new BigNumber(await this.wallet.web3.eth.getBalance(this.wallet.userAddress)).div(this.constants.PRECISION);\n        } else {\n          // ERC20\n          const token = this.contract.getERC20(tokenAddress);\n          const tokenDecimals = +await token.methods.decimals().call();\n          const tokenPrecision = Math.pow(10, tokenDecimals);\n          this.depositTokenBalance = new BigNumber(await token.methods.balanceOf(this.wallet.userAddress).call()).div(tokenPrecision);\n        }\n      }\n    }\n  }\n\n  setDepositAmount(amount: string): void {\n    this.depositAmount = new BigNumber(+amount);\n    this.updateAPY();\n  }\n\n  setMaxDepositAmount(): void {\n    this.depositAmount = BigNumber.min(this.depositTokenBalance, this.maxDepositAmount);\n    this.updateAPY();\n  }\n\n  setDepositTime(timeInDays: number | string): void {\n    this.depositTimeInDays = new BigNumber(+timeInDays);\n    this.updateAPY();\n  }\n\n  async updateAPY() {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const pool = this.contract.getPool(this.selectedPoolInfo.name, readonlyWeb3);\n    const stablecoinPrice = await this.helpers.getTokenPriceUSD(this.selectedPoolInfo.stablecoin);\n\n    // get deposit amount\n    this.depositAmountUSD = new BigNumber(this.depositAmount).times(stablecoinPrice);\n\n    // get interest amount\n    const stablecoinPrecision = Math.pow(10, this.selectedPoolInfo.stablecoinDecimals);\n    const depositAmount = this.helpers.processWeb3Number(this.depositAmount.times(stablecoinPrecision));\n    const depositTime = this.helpers.processWeb3Number(this.depositTimeInDays.times(this.constants.DAY_IN_SEC));\n    const rawInterestAmountToken = new BigNumber(await pool.methods.calculateInterestAmount(depositAmount, depositTime).call()).div(stablecoinPrecision);\n    const rawInterestAmountUSD = rawInterestAmountToken.times(stablecoinPrice);\n    this.interestAmountToken = this.helpers.applyFeeToInterest(rawInterestAmountToken, this.selectedPoolInfo);\n    this.interestAmountUSD = this.helpers.applyFeeToInterest(rawInterestAmountUSD, this.selectedPoolInfo);\n\n    // get APY\n    this.apy = this.interestAmountToken.div(this.depositAmount).div(this.depositTimeInDays).times(365).times(100);\n    if (this.apy.isNaN()) {\n      this.apy = new BigNumber(0);\n    }\n\n    // get MPH reward amount\n    this.mphRewardAmount = this.mphDepositorRewardMintMultiplier.times(this.depositAmount).times(depositTime);\n    this.mphTakeBackAmount = this.mphDepositorRewardTakeBackMultiplier.times(this.mphRewardAmount);\n\n    const mphAPY = this.mphRewardAmount.minus(this.mphTakeBackAmount).times(this.mphPriceUSD).div(this.depositAmountUSD).div(this.depositTimeInDays).times(365).times(100);\n    if (mphAPY.isNaN()) {\n      this.mphAPY = new BigNumber(0);\n    } else {\n      this.mphAPY = mphAPY;\n    }\n\n    const tempMPHAPY = this.mphRewardAmount.times(this.mphPriceUSD).div(this.depositAmountUSD).div(this.depositTimeInDays).times(365).times(100);\n    if (tempMPHAPY.isNaN()) {\n      this.tempMPHAPY = new BigNumber(0);\n    } else {\n      this.tempMPHAPY = tempMPHAPY;\n    }\n  }\n\n  deposit() {\n    if (this.selectedDepositToken === this.selectedPoolInfo.stablecoinSymbol) {\n      this.normalDeposit();\n    } else {\n      this.zapCurveDeposit();\n    }\n  }\n\n  normalDeposit() {\n    const pool = this.contract.getPool(this.selectedPoolInfo.name);\n    const stablecoin = this.contract.getPoolStablecoin(this.selectedPoolInfo.name);\n    const stablecoinPrecision = Math.pow(10, this.selectedPoolInfo.stablecoinDecimals);\n    const depositAmount = this.helpers.processWeb3Number(this.depositAmount.times(stablecoinPrecision));\n    const maturationTimestamp = this.helpers.processWeb3Number(this.depositTimeInDays.times(this.constants.DAY_IN_SEC).plus(Date.now() / 1e3).plus(this.DEPOSIT_DELAY));\n    const func = pool.methods.deposit(depositAmount, maturationTimestamp);\n\n    this.wallet.sendTxWithToken(func, stablecoin, this.selectedPoolInfo.address, depositAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  async zapCurveDeposit() {\n    const slippage = 0.01;\n    const tokenAddress = this.contract.getZapDepositTokenAddress(this.selectedDepositToken);\n    const maturationTimestamp = this.helpers.processWeb3Number(this.depositTimeInDays.times(this.constants.DAY_IN_SEC).plus(Date.now() / 1e3).plus(this.DEPOSIT_DELAY));\n\n    if (tokenAddress === this.constants.ZERO_ADDR) {\n      // ETH deposit\n      const depositAmount = this.helpers.processWeb3Number(this.depositAmount.times(this.constants.PRECISION));\n\n      let funcZapIn = this.contract.getNamedContract('CurveZapIn').methods.ZapIn(\n        tokenAddress,\n        tokenAddress,\n        this.selectedPoolInfo.curveSwapAddress,\n        depositAmount,\n        0,\n        this.constants.ZERO_ADDR,\n        '0x',\n        this.constants.ZERO_ADDR\n      );\n\n      const curveOutputValue = new BigNumber(await funcZapIn.call({ from: this.wallet.userAddress, value: depositAmount }));\n      const minOutputTokenAmount = this.helpers.processWeb3Number(curveOutputValue.times(1 - slippage));\n\n      if (curveOutputValue.lt(this.minDepositAmount.times(this.constants.PRECISION))) {\n        // output curve tokens less than minimum threshold\n        this.wallet.displayGenericError(new Error('Output Curve LP token amount less than minimum deposit threshold.'));\n        return;\n      }\n\n      funcZapIn = this.contract.getNamedContract('CurveZapIn').methods.ZapIn(\n        tokenAddress,\n        tokenAddress,\n        this.selectedPoolInfo.curveSwapAddress,\n        depositAmount,\n        minOutputTokenAmount,\n        this.constants.ZERO_ADDR,\n        '0x',\n        this.constants.ZERO_ADDR\n      );\n\n      this.wallet.sendTxWithValue(funcZapIn, depositAmount, () => { }, (receipt) => {\n        let outputAmount;\n        for (const eventKey of Object.keys(receipt.events)) {\n          const event = receipt.events[eventKey];\n          if (event.address.toLowerCase() === this.selectedPoolInfo.stablecoin.toLowerCase()) {\n            // is mint event\n            outputAmount = event.raw.data;\n            break;\n          }\n        }\n\n        const pool = this.contract.getPool(this.selectedPoolInfo.name);\n        const stablecoin = this.contract.getPoolStablecoin(this.selectedPoolInfo.name);\n        const funcDeposit = pool.methods.deposit(outputAmount, maturationTimestamp);\n        this.wallet.sendTxWithToken(funcDeposit, stablecoin, this.selectedPoolInfo.address, outputAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n      }, (error) => { this.wallet.displayGenericError(error) });\n    } else {\n      // ERC20 deposit\n      const token = this.contract.getERC20(tokenAddress);\n      const tokenDecimals = +await token.methods.decimals().call();\n      const tokenPrecision = Math.pow(10, tokenDecimals);\n      const depositAmount = this.helpers.processWeb3Number(this.depositAmount.times(tokenPrecision));\n\n      this.wallet.approveToken(token, this.contract.getNamedContractAddress('CurveZapIn'), depositAmount, () => { }, async () => {\n        let funcZapIn = this.contract.getNamedContract('CurveZapIn').methods.ZapIn(\n          tokenAddress,\n          tokenAddress,\n          this.selectedPoolInfo.curveSwapAddress,\n          depositAmount,\n          0,\n          this.constants.ZERO_ADDR,\n          '0x',\n          this.constants.ZERO_ADDR\n        );\n\n        const curveOutputValue = new BigNumber(await funcZapIn.call({ from: this.wallet.userAddress }));\n        const minOutputTokenAmount = this.helpers.processWeb3Number(curveOutputValue.times(1 - slippage));\n\n        if (curveOutputValue.lt(this.minDepositAmount.times(Math.pow(10, this.selectedPoolInfo.stablecoinDecimals)))) {\n          // output curve tokens less than minimum threshold\n          this.wallet.displayGenericError(new Error('Output Curve LP token amount less than minimum deposit threshold.'));\n          return;\n        }\n\n        funcZapIn = this.contract.getNamedContract('CurveZapIn').methods.ZapIn(\n          tokenAddress,\n          tokenAddress,\n          this.selectedPoolInfo.curveSwapAddress,\n          depositAmount,\n          minOutputTokenAmount,\n          this.constants.ZERO_ADDR,\n          '0x',\n          this.constants.ZERO_ADDR\n        );\n\n        this.wallet.sendTx(funcZapIn, () => { }, (receipt) => {\n          let outputAmount;\n          for (const eventKey of Object.keys(receipt.events)) {\n            const event = receipt.events[eventKey];\n            if (event.address.toLowerCase() === this.selectedPoolInfo.stablecoin.toLowerCase()) {\n              // is mint event\n              outputAmount = event.raw.data;\n              break;\n            }\n          }\n\n          const pool = this.contract.getPool(this.selectedPoolInfo.name);\n          const stablecoin = this.contract.getPoolStablecoin(this.selectedPoolInfo.name);\n          const funcDeposit = pool.methods.deposit(outputAmount, maturationTimestamp);\n          this.wallet.sendTxWithToken(funcDeposit, stablecoin, this.selectedPoolInfo.address, outputAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n        }, (error) => { this.wallet.displayGenericError(error) });\n      }, (error) => { this.wallet.displayGenericError(error) });\n\n      /*const func = this.contract.getNamedContract('ZapCurve').methods.zapCurveDeposit(\n        this.selectedPoolInfo.address,\n        this.selectedPoolInfo.curveSwapAddress,\n        tokenAddress,\n        depositAmount,\n        minOutputTokenAmount,\n        maturationTimestamp\n      );\n  \n      this.wallet.sendTxWithToken(func, token, this.contract.getNamedContractAddress('ZapCurve'), depositAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });*/\n    }\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.depositAmount.gte(this.minDepositAmount) && this.depositAmount.lte(this.maxDepositAmount)\n      && this.depositTimeInDays.gte(this.minDepositPeriod) && this.depositTimeInDays.lte(this.maxDepositPeriod);\n  }\n}\n\ninterface QueryResult {\n  dpool: {\n    id: string;\n    MinDepositAmount: number;\n    MaxDepositAmount: number;\n    MinDepositPeriod: number;\n    MaxDepositPeriod: number;\n    mphDepositorRewardMintMultiplier: number;\n    mphDepositorRewardTakeBackMultiplier: number;\n  };\n}","<div class=\"row px-4 no-gutters\">\n  <div class=\"col\">\n    <h2>How it works</h2>\n      <p class=\"text-white\">\n      When the zero coupon bond is mature, the individual deposits it contains must be withdrawn so that bond holders can\n      redeem their bonds for the underlying tokens.\n      </p>\n      <p class=\"text-white mb-4\">When a deposit is withdrawn, the MPH reward is unlocked and given to\n      the deposit's owner, providing an incentive for the owners to withdraw their deposits. However, a deposit can be\n      withdrawn by anyone, so even if a deposit's owner is unresponsive, bond holders can still redeem their bonds.</p>\n  </div>\n</div>\n\n<div class=\"row px-4 justify-content-end align-items-center\">\n  <input type=\"checkbox\" id=\"showAllDeposits\" (input)=\"loadActiveDeposits($event.target.checked)\" />\n  <label for=\"showAllDeposits\" class=\"ml-2 mb-0\">\n    Show everyone's deposits\n  </label>\n</div>\n<div class=\"row justify-content-center\">\n  <ng-container *ngIf=\"activeDeposits.length == 0\">\n    <h3 class=\"glowing text-center\">No withdrawable deposits</h3>\n  </ng-container>\n  <ng-container *ngIf=\"activeDeposits.length > 0\">\n    <table class=\"table table-sm card-table\">\n      <thead>\n        <tr>\n          <th class=\"text-dark\">\n            #\n          </th>\n          <th class=\"text-dark\">\n            {{poolInfo.stablecoinSymbol}} To Unlock\n          </th>\n          <th class=\"text-dark\">\n            MPH To Unlock\n          </th>\n          <th class=\"text-dark\">\n          </th>\n        </tr>\n      </thead>\n      <tbody class=\"list\">\n        <tr *ngFor=\"let deposit of activeDeposits\">\n          <td>\n            <h4 class=\"mb-0\">#{{deposit.nftID}}</h4>\n          </td>\n          <td>\n            <h4 class=\"mb-1 font-weight-normal glowing\">\n              ${{deposit.unlockStablecoinAmount.times(stablecoinPriceUSD).toFormat(DECIMALS)}}\n            </h4>\n            <span class=\"text-white d-block\">{{deposit.unlockStablecoinAmount.toFormat(DECIMALS)}}\n              {{poolInfo.stablecoinSymbol}}</span>\n          </td>\n          <td>\n            <h4 class=\"mb-1 font-weight-normal glowing\">\n              ${{deposit.unlockMPHAmount.times(mphPriceUSD).toFormat(DECIMALS)}}\n            </h4>\n            <span class=\"text-white d-block\">{{deposit.unlockMPHAmount.toFormat(DECIMALS)}} MPH</span>\n          </td>\n          <td class=\"text-right\">\n            <ng-container *ngIf=\"canContinue()\">\n              <!-- Button -->\n              <button type=\"button\" class=\"card-link small small px-1\" (click)=\"withdraw(deposit)\">\n                <i class=\"fe fe-dollar-sign mr-2 align-bottom\"></i>\n                Withdraw\n              </button>\n            </ng-container>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </ng-container>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport gql from 'graphql-tag';\nimport BigNumber from 'bignumber.js';\nimport { ContractService, PoolInfo } from 'src/app/contract.service';\nimport { ZeroCouponBondTableEntry } from '../../zero-coupon-bonds.component';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\n\nconst mockData = {\n  fractionalDeposits: [\n    {\n      id: '0x1234',\n      address: '0x1234',\n      deposit: {\n        nftID: 1,\n        fundingID: 3,\n        amount: 100,\n        interestEarned: 10,\n        mintMPHAmount: 10\n      }\n    }\n  ],\n  dpool: {\n    mphDepositorRewardTakeBackMultiplier: 0.3\n  }\n}\n\n@Component({\n  selector: 'app-withdraw-zero-coupon-bond',\n  templateUrl: './withdraw-zero-coupon-bond.component.html',\n  styleUrls: ['./withdraw-zero-coupon-bond.component.css']\n})\nexport class WithdrawZeroCouponBondComponent implements OnInit {\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  @Input() poolInfo: PoolInfo;\n  DECIMALS = 2;\n  mphPriceUSD: BigNumber;\n  stablecoinPriceUSD: BigNumber;\n  activeDeposits: FractionalDeposit[];\n  now: Date;\n\n  constructor(\n    private apollo: Apollo,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  resetData(): void {\n    this.mphPriceUSD = new BigNumber(0);\n    this.stablecoinPriceUSD = new BigNumber(0);\n    this.activeDeposits = [];\n    this.now = new Date();\n  }\n\n  async loadData() {\n    await this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n\n    this.helpers.getTokenPriceUSD(this.poolInfo.stablecoin).then(price => this.stablecoinPriceUSD = new BigNumber(price));\n\n    if (this.wallet.connected) {\n      this.loadActiveDeposits(false);\n    }\n  }\n\n  loadActiveDeposits(showAllDeposits: boolean) {\n    const userID = this.wallet.userAddress.toLowerCase();\n    const zeroCouponBondID = this.zcbEntry.zcbInfo.address.toLowerCase();\n    const poolID = this.poolInfo.address.toLowerCase();\n    let queryString;\n    if (showAllDeposits) {\n      queryString = gql`\n        {\n          fractionalDeposits(where: { active: true, zeroCouponBondAddress: \"${zeroCouponBondID}\" }) {\n            id\n            address\n            deposit {\n              nftID\n              fundingID\n              amount\n              interestEarned\n              mintMPHAmount\n            }\n          }\n          dpool(id: \"${poolID}\") {\n            id\n            mphDepositorRewardTakeBackMultiplier\n          }\n        }\n      `;\n    } else {\n      queryString = gql`\n        {\n          fractionalDeposits(where: { active: true, ownerAddress: \"${userID}\", zeroCouponBondAddress: \"${zeroCouponBondID}\" }) {\n            id\n            address\n            deposit {\n              nftID\n              fundingID\n              amount\n              interestEarned\n              mintMPHAmount\n            }\n          }\n          dpool(id: \"${poolID}\") {\n            id\n            mphDepositorRewardTakeBackMultiplier\n          }\n        }\n      `;\n    }\n\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const fractionalDeposits = queryResult.data.fractionalDeposits;\n      const pool = queryResult.data.dpool;\n\n      if (pool && fractionalDeposits) {\n        const mphDepositorRewardTakeBackMultiplier = new BigNumber(pool.mphDepositorRewardTakeBackMultiplier);\n        const parsedDeposits: FractionalDeposit[] = [];\n        for (const rawDeposit of fractionalDeposits) {\n          const interestEarnedToken = this.helpers.applyFeeToInterest(rawDeposit.deposit.interestEarned, this.poolInfo);\n          const realMPHReward = new BigNumber(1).minus(mphDepositorRewardTakeBackMultiplier).times(rawDeposit.deposit.mintMPHAmount);\n          const parsedDeposit: FractionalDeposit = {\n            address: rawDeposit.address,\n            nftID: +rawDeposit.deposit.nftID,\n            fundingID: +rawDeposit.deposit.fundingID,\n            unlockStablecoinAmount: new BigNumber(rawDeposit.deposit.amount).plus(interestEarnedToken),\n            unlockMPHAmount: realMPHReward\n          };\n          parsedDeposits.push(parsedDeposit);\n        }\n        this.activeDeposits = parsedDeposits;\n      }\n    }\n  }\n\n  canContinue(): boolean {\n    return this.wallet.connected && this.now > this.zcbEntry.maturationTimestamp;\n  }\n\n  withdraw(deposit: FractionalDeposit) {\n    const zeroCouponBondContract = this.contract.getZeroCouponBondContract(this.zcbEntry.zcbInfo.address);\n    const func = zeroCouponBondContract.methods.redeemFractionalDepositShares(deposit.address, deposit.fundingID);\n    this.wallet.sendTx(func, () => { }, () => { }, (err) => { this.wallet.displayGenericError(err) });\n  }\n}\n\ninterface QueryResult {\n  fractionalDeposits: {\n    id: string;\n    address: string;\n    deposit: {\n      nftID: number;\n      fundingID: number;\n      amount: number;\n      interestEarned: number;\n      mintMPHAmount: number;\n    }\n  }[];\n  dpool: {\n    id: string;\n    mphDepositorRewardTakeBackMultiplier: number;\n  };\n}\n\ninterface FractionalDeposit {\n  address: string;\n  nftID: number;\n  fundingID: number;\n  unlockStablecoinAmount: BigNumber;\n  unlockMPHAmount: BigNumber;\n}","import Web3 from 'web3';\nimport Notify from 'bnc-notify';\nimport Onboard from 'bnc-onboard';\nimport BigNumber from 'bignumber.js';\n\nexport class Web3Enabled {\n  blocknativeAPIKey: string;\n  infuraKey: string;\n  portisAPIKey: string;\n  fortmaticKey: string;\n  assistInstance: any;\n  notifyInstance: any;\n  state: any;\n  networkID: number;\n  alchemyEndpoint: string;\n  alchemyWSEndpoint: string;\n\n  constructor(public web3: Web3) {\n    this.blocknativeAPIKey = 'af9c0a83-8874-4e07-a272-19c879420693';\n    this.infuraKey = '9e5f0d08ad19483193cc86092b7512f2';\n    this.portisAPIKey = 'a838dbd2-c0b1-4465-8dbe-36b88f3d0d4e';\n    this.fortmaticKey = 'pk_live_937F9430B2CB3407';\n    this.alchemyEndpoint = 'https://eth-mainnet.alchemyapi.io/v2/y8L870PADfUHPFM9_-GMMUOpHckqNtR-';\n    this.alchemyWSEndpoint = 'wss://eth-mainnet.ws.alchemyapi.io/v2/y8L870PADfUHPFM9_-GMMUOpHckqNtR-';\n    this.networkID = 1;\n    this.state = {\n      address: null,\n      wallet: {\n        provider: null\n      }\n    };\n  }\n\n  async connect(onConnected, onError, isStartupMode: boolean) {\n    if (!this.assistInstance) {\n      const genericMobileWalletConfig = {\n        name: 'Web3 wallet (Metamask)',\n        mobile: true,\n        desktop: true,\n        preferred: true,\n        type: 'injected' as 'injected',\n        iconSrc: 'data:image/png;base64,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',\n        wallet(helpers) {\n          const getProviderName = helpers.getProviderName, createModernProviderInterface = helpers.createModernProviderInterface, createLegacyProviderInterface = helpers.createLegacyProviderInterface;\n          const provider = window['ethereum'] ||\n            (this.web3 && this.web3.currentProvider);\n          const result = {\n            provider,\n            interface: provider\n              ? typeof provider.enable === 'function'\n                ? createModernProviderInterface(provider)\n                : createLegacyProviderInterface(provider)\n              : null\n          };\n          return new Promise<{ provider, interface }>((resolve, reject) => {\n            resolve(result);\n          });\n        }\n      };\n\n      const wallets = [\n        genericMobileWalletConfig,\n        {\n          walletName: 'walletConnect',\n          rpc: {\n            [this.networkID]: this.alchemyEndpoint\n          },\n          networkId: this.networkID,\n          preferred: true\n        },\n        {\n          walletName: 'ledger',\n          rpcUrl: this.alchemyEndpoint,\n          preferred: true\n        },\n        {\n          walletName: 'trezor',\n          appUrl: 'https://88mph.app',\n          email: 'hello@88mph.app',\n          rpcUrl: this.alchemyEndpoint,\n          preferred: true\n        },\n        {\n          walletName: 'walletLink',\n          rpcUrl: this.alchemyEndpoint,\n          appName: '88mph',\n          appLogoUrl: 'https://88mph.app/docs/img/88mph-logo-dark.png'\n        },\n        {\n          walletName: 'fortmatic',\n          apiKey: this.fortmaticKey,\n          networkId: this.networkID\n        },\n        { walletName: 'authereum', networkId: this.networkID },\n        {\n          walletName: 'portis',\n          apiKey: this.portisAPIKey,\n          networkId: this.networkID\n        },\n      ];\n\n      const walletChecks = [\n        { checkName: 'derivationPath' },\n        { checkName: 'connect' },\n        { checkName: 'accounts' },\n        { checkName: 'network' },\n      ];\n\n      const walletSelectConfig = {\n        heading: 'Select a Wallet',\n        description: 'Please select a wallet to connect to 88mph:',\n        wallets\n      };\n\n      const bncAssistConfig = {\n        dappId: this.blocknativeAPIKey,\n        darkMode: true,\n        networkId: this.networkID,\n        hideBranding: true,\n        subscriptions: {\n          wallet: wallet => {\n            if (wallet.provider) {\n              this.web3 = new Web3(wallet.provider);\n            }\n            // store the selected wallet name to be retrieved next time the app loads\n            window.localStorage.setItem('selectedWallet', wallet.name);\n          },\n          address: this.doNothing,\n          network: this.doNothing,\n          balance: this.doNothing\n        },\n        walletSelect: walletSelectConfig,\n        walletCheck: walletChecks\n      };\n      this.assistInstance = Onboard(bncAssistConfig);\n    }\n\n    // Get user to select a wallet\n    let selectedWallet;\n    if (isStartupMode) {\n      // Startup mode: connect to previously used wallet if available\n      // get the selectedWallet value from local storage\n      const previouslySelectedWallet = window.localStorage.getItem('selectedWallet');\n      // call wallet select with that value if it exists\n      if (previouslySelectedWallet != null) {\n        selectedWallet = await this.assistInstance.walletSelect(previouslySelectedWallet);\n      }\n    } else {\n      // Non startup mode: open wallet selection screen\n      selectedWallet = await this.assistInstance.walletSelect();\n    }\n    const state = this.assistInstance.getState();\n    if (\n      selectedWallet\n      || state.address !== null // If user already logged in but want to switch account, and then dismissed window\n    ) {\n      // Get users' wallet ready to transact\n      const ready = await this.assistInstance.walletCheck();\n      this.state = this.assistInstance.getState();\n\n      if (!ready) {\n        // Selected an option but then dismissed it\n        // Treat as no wallet\n        onError();\n      } else {\n        // Successfully connected\n        onConnected();\n      }\n    } else {\n      // User refuses to connect to wallet\n      // Update state\n      this.state = this.assistInstance.getState();\n      onError();\n    }\n\n    if (!this.notifyInstance) {\n      this.notifyInstance = Notify({\n        dappId: this.blocknativeAPIKey,\n        networkId: this.networkID\n      });\n      this.notifyInstance.config({\n        darkMode: true\n      });\n    }\n  }\n\n  readonlyWeb3() {\n    if (this.state.wallet.provider) {\n      return this.web3;\n    }\n    return new Web3(this.alchemyWSEndpoint);\n  }\n\n  async estimateGas(func, val, _onError) {\n    return Math.floor((await func.estimateGas({\n      from: this.state.address,\n      value: val\n    }).catch(_onError)) * 1.2);\n  }\n\n  async sendTx(func, _onTxHash, _onReceipt, _onError) {\n    const gasLimit = await this.estimateGas(func, 0, _onError);\n    if (!isNaN(gasLimit)) {\n      return func.send({\n        from: this.state.address,\n        gas: gasLimit,\n      }).on('transactionHash', (hash) => {\n        _onTxHash(hash);\n        const { emitter } = this.notifyInstance.hash(hash);\n        // emitter.on('txConfirmed', _onReceipt);\n        emitter.on('txFailed', _onError);\n      })\n        .on('receipt', _onReceipt)\n        .on('error', (e) => {\n          if (!e.toString().contains('newBlockHeaders')) {\n            _onError(e);\n          }\n        });\n    }\n  }\n\n  async sendTxWithValue(func, val, _onTxHash, _onReceipt, _onError) {\n    const gasLimit = await this.estimateGas(func, val, _onError);\n    if (!isNaN(gasLimit)) {\n      return func.send({\n        from: this.state.address,\n        gas: gasLimit,\n        value: val\n      }).on('transactionHash', (hash) => {\n        _onTxHash(hash);\n        const { emitter } = this.notifyInstance.hash(hash);\n        // emitter.on('txConfirmed', _onReceipt);\n        emitter.on('txFailed', _onError);\n      })\n        .on('receipt', _onReceipt)\n        .on('error', (e) => {\n          if (!e.toString().contains('newBlockHeaders')) {\n            _onError(e);\n          }\n        });\n    }\n  }\n\n  async sendTxWithToken(func, token, to, amount, _onTxHash, _onReceipt, _onError) {\n    const maxAllowance = new BigNumber(2).pow(256).minus(1).integerValue().toFixed();\n    const allowance = new BigNumber(await token.methods.allowance(this.state.address, to).call());\n    if (allowance.gte(amount)) {\n      return this.sendTx(func, _onTxHash, _onReceipt, _onError);\n    }\n    return this.sendTx(token.methods.approve(to, maxAllowance), this.doNothing, () => {\n      this.sendTx(func, _onTxHash, _onReceipt, _onError);\n    }, _onError);\n  }\n\n  async approveToken(token, to, amount, _onTxHash, _onReceipt, _onError) {\n    const maxAllowance = new BigNumber(2).pow(256).minus(1).integerValue().toFixed();\n    const allowance = new BigNumber(await token.methods.allowance(this.state.address, to).call());\n    if (allowance.gte(amount)) {\n      _onReceipt();\n      return;\n    }\n    return this.sendTx(token.methods.approve(to, maxAllowance), _onTxHash, _onReceipt, _onError);\n  }\n\n  displayGenericError(error: Error) {\n    let errorMessage;\n    try {\n      errorMessage = JSON.parse(error.message.slice(error.message.indexOf('{'))).originalError.message;\n    } catch (err) {\n      errorMessage = error.message;\n    }\n    this.notifyInstance.notification({\n      eventCode: 'genericError',\n      type: 'error',\n      message: errorMessage\n    });\n  }\n\n  doNothing() { }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\n\n@Component({\n  selector: 'app-modal-unstake-lp',\n  templateUrl: './modal-unstake-lp.component.html',\n  styleUrls: ['./modal-unstake-lp.component.css']\n})\nexport class ModalUnstakeLPComponent implements OnInit {\n  @Input() stakedMPHPoolProportion: BigNumber;\n  @Input() stakedMPHBalance: BigNumber;\n  @Input() totalStakedMPHBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerDay: BigNumber;\n  @Input() mphPriceUSD: BigNumber;\n  unstakeAmount: BigNumber;\n  newStakedMPHPoolProportion: BigNumber;\n  newRewardPerDay: BigNumber;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    this.setUnstakeAmount(this.stakedMPHBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.unstakeAmount = new BigNumber(0);\n    this.newStakedMPHPoolProportion = new BigNumber(0);\n    this.newRewardPerDay = new BigNumber(0);\n  }\n\n  setUnstakeAmount(amount: number | string) {\n    this.unstakeAmount = new BigNumber(amount);\n    if (this.unstakeAmount.isNaN()) {\n      this.unstakeAmount = new BigNumber(0);\n    }\n    this.newStakedMPHPoolProportion = this.stakedMPHBalance.minus(this.unstakeAmount).div(this.totalStakedMPHBalance.minus(this.unstakeAmount)).times(100);\n    if (this.newStakedMPHPoolProportion.isNaN()) {\n      this.newStakedMPHPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerDay = this.stakedMPHBalance.minus(this.unstakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedMPHBalance.minus(this.unstakeAmount))).times(this.constants.DAY_IN_SEC);\n    if (this.newRewardPerDay.isNaN()) {\n      this.newRewardPerDay = new BigNumber(0);\n    }\n  }\n\n  unstake() {\n    const rewards = this.contract.getNamedContract('Farming');\n    const unstakeAmount = this.helpers.processWeb3Number(this.unstakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.withdraw(unstakeAmount);\n\n    this.wallet.sendTx(func, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.unstakeAmount.gt(0);\n  }\n}","<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to unstake?\n              </h1>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"unstakeAmount.toString()\"\n                        (input)=\"setUnstakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setUnstakeAmount(this.stakedMPHBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{stakedMPHBalance.toFormat()}} MPH staked</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the MPH LP staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedMPHPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedMPHPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerDay.toFormat(4)}} MPH/day</h4>\n                            <span class=\"text-white\">Current: {{rewardPerDay.toFormat(4)}} MPH/day</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate USD</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{newRewardPerDay.times(mphPriceUSD).toFormat(4)}}/day</h4>\n                            <span class=\"text-white\">Current:\n                              ${{rewardPerDay.times(mphPriceUSD).toFormat(4)}}/day</span>\n                          </td>\n                        </tr>\n                        <tr class=\"d-none\">\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Staking pool APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Staking rewards APY annualized and compounded based on the last week\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            0.0000%\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"unstake()\" [disabled]=\"!canContinue()\">Unstake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { InjectionToken } from '@angular/core';\nimport Web3 from 'web3';\n\nexport const WEB3 = new InjectionToken<Web3>('web3', {\n  providedIn: 'root',\n  factory: () => {\n    try {\n      const provider = ('ethereum' in window) ? window['ethereum'] : Web3.givenProvider;\n      return new Web3(provider);\n    } catch (err) {\n      throw new Error('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n});\n","<!-- Modal: withdraw money -->\n<!-- IDEA: modal modalWithdraw -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 \">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <ng-container *ngIf=\"userDeposit.locked\">\n                <h1 class=\"display-4 text-center\">\n                  Withdraw early\n                </h1>\n                <p class=\"text-white small text-center mb-5\">Withdraw your principal before the maturation date by\n                  giving up your interest & MPH rewards.</p>\n              </ng-container>\n              <ng-container *ngIf=\"!userDeposit.locked\">\n                <h1 class=\"display-4 text-center\">\n                  Withdraw\n                </h1>\n                <p class=\"text-white small text-center mb-5\">It's time to get your fixed yield.</p>\n              </ng-container>\n\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"row justify-content-center mb-4\">\n                    <div class=\"col\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Principal to withdraw\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{userDeposit.amountUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{userDeposit.amountToken.toFormat()}}\n                        {{poolInfo.stablecoinSymbol}}</div>\n                    </div>\n                    <div class=\"col\" *ngIf=\"!userDeposit.locked\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Interest to withdraw\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{userDeposit.interestEarnedUSD.toFormat(4)}}</h4>\n                      <div class=\"text-white small d-block\">{{userDeposit.interestEarnedToken.toFormat()}}\n                        {{poolInfo.stablecoinSymbol}}</div>\n                    </div>\n                  </div>\n                  <div class=\"row justify-content-center mb-4\">\n                    <div class=\"col-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Temporary MPH reward received\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">{{mphRewardAmount.toFormat()}} MPH</h4>\n                      <div class=\"text-white small d-block\">${{mphRewardAmount.times(mphPriceUSD).toFormat(4)}}</div>\n                    </div>\n                    <div class=\"col-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        MPH to pay back\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">{{mphTakeBackAmount.toFormat()}} MPH</h4>\n                      <div class=\"text-white small d-block\">Your balance: {{mphBalance.toFormat()}}</div>\n                      <a class=\"text-white small\" routerLink=\"/vesting\" (click)=\"activeModal.dismiss()\">\n                        <u>\n                          Check your vested MPH\n                        </u>\n                      </a>\n                    </div>\n                  </div>\n                  <div class=\"row justify-content-center\">\n                    <div class=\"col\">\n                      <button class=\"card-link btn-block\" type=\"button\" (click)=\"earlyWithdraw()\"\n                        *ngIf=\"userDeposit.locked\">\n                        Withdraw early\n                      </button>\n                      <button class=\"card-link btn-block\" type=\"button\" (click)=\"withdraw()\"\n                        *ngIf=\"!userDeposit.locked\">\n                        Withdraw\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Apollo, gql } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService, PoolInfo } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { UserDeposit } from '../types';\n\n@Component({\n  selector: 'app-modal-withdraw',\n  templateUrl: './modal-withdraw.component.html',\n  styleUrls: ['./modal-withdraw.component.css']\n})\nexport class ModalWithdrawComponent implements OnInit {\n  @Input() userDeposit: UserDeposit;\n  @Input() poolInfo: PoolInfo;\n  mphRewardAmount: BigNumber;\n  mphTakeBackAmount: BigNumber;\n  mphBalance: BigNumber;\n  mphPriceUSD: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n  }\n\n  async loadData() {\n    const queryString = gql`\n      {\n        dpool(id: \"${this.poolInfo.address.toLowerCase()}\") {\n          id\n          mphDepositorRewardTakeBackMultiplier\n        }\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => {\n      const pool = x.data.dpool;\n\n      if (pool) {\n        this.mphRewardAmount = this.userDeposit.mintMPHAmount;\n        this.mphTakeBackAmount = this.userDeposit.locked ? this.mphRewardAmount : new BigNumber(pool.mphDepositorRewardTakeBackMultiplier).times(this.mphRewardAmount);\n      }\n    });\n\n    const mphToken = this.contract.getNamedContract('MPHToken', this.wallet.readonlyWeb3());\n    this.mphBalance = new BigNumber(await mphToken.methods.balanceOf(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n  }\n\n  resetData() {\n    this.mphRewardAmount = new BigNumber(0);\n    this.mphTakeBackAmount = new BigNumber(0);\n    this.mphBalance = new BigNumber(0);\n    this.mphPriceUSD = new BigNumber(0);\n  }\n\n  withdraw() {\n    const pool = this.contract.getPool(this.poolInfo.name);\n    const mphToken = this.contract.getNamedContract('MPHToken');\n    const mphMinter = this.contract.getNamedContractAddress('MPHMinter');\n    const mphAmount = this.helpers.processWeb3Number(this.mphTakeBackAmount.times(this.constants.PRECISION));\n    const func = pool.methods.withdraw(this.userDeposit.nftID, this.userDeposit.fundingID);\n\n    this.wallet.sendTxWithToken(func, mphToken, mphMinter, mphAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  earlyWithdraw() {\n    const pool = this.contract.getPool(this.poolInfo.name);\n    const mphToken = this.contract.getNamedContract('MPHToken');\n    const mphMinter = this.contract.getNamedContractAddress('MPHMinter');\n    const mphAmount = this.helpers.processWeb3Number(this.mphTakeBackAmount.times(this.constants.PRECISION));\n    const func = pool.methods.earlyWithdraw(this.userDeposit.nftID, this.userDeposit.fundingID);\n\n    this.wallet.sendTxWithToken(func, mphToken, mphMinter, mphAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n}\n\ninterface QueryResult {\n  dpool: {\n    id: string;\n    mphDepositorRewardTakeBackMultiplier: number;\n  };\n}","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-2\">Earn fixed-rate interest on your crypto and MPH rewards.</h1>\n          <p class=\"text-muted font-weight-bold mb-5\">Get started by adding your crypto assets to the pools below. <a class=\"text-purple\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n            Help <i class=\"fe fe-external-link\"></i>\n          </a></p>\n          <div class=\"card-deck my-4\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Deposits balance\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Current total deposits in USD\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  ${{totalDepositUSD.toFormat(DECIMALS)}}\n                </h2>\n                <!-- Button -->\n                <button type=\"button\" class=\"card-link small px-1 ml-3\" (click)=\"openDepositModal()\" [disabled]=\"wallet.watching\">\n                  <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Add\n                </button>\n              </div>\n            </div>\n\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  Interest balance\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Total fixed-rate interest earned from current deposits\">\n                    [i]\n                  </button>\n                </h5>\n\n                <!-- Heading -->\n                <h2 class=\"mb-0 glowing pl-3\">\n                  ${{totalInterestUSD.toFormat(DECIMALS)}}\n                </h2>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                  MPH earned\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Depositors get rewarded with MPH tokens that can be staked to earn rewards (protocol fees, harvested tokens, etc)\">\n                    [i]\n                  </button>\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-1 glowing pl-3\">\n                  {{totalMPHEarned.toFormat(DECIMALS)}} MPH\n                </h2>\n                <h5 class=\"mb-3 text-white pl-3\">${{totalMPHEarned.times(mphPriceUSD).toFormat(DECIMALS)}}</h5>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div> <!-- / .row -->\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n\n<!-- CARDS -->\n<div class=\"container-fluid mb-6\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <!-- Current deposits -->\n      <div class=\"card mb-6\" *ngIf=\"userPools.length\">\n        <h2 class=\"mt-n3 bg-dark mb-0 mx-3 pl-3\">Current deposits</h2>\n        <div class=\"table-responsive mb-0\">\n          <table class=\"table table-sm table-nowrap card-table\">\n            <thead>\n              <tr>\n                <th class=\"text-dark\">\n                  Pools\n                </th>\n                <th class=\"text-dark\">\n                  Deposits\n                </th>\n                <th class=\"text-dark\">\n                  Interest earned\n                </th>\n                <th class=\"text-dark\">\n                  MPH perm. rewards\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Depositors get rewarded with upfront MPH tokens that can be staked to earn fee-sharing and yield farming rewards. Most of the MPH tokens will need to be paid back when the deposit is withdrawn at maturation. This column is the token you keep after deposit's maturation.\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-dark\">\n                  MPH temp. rewards\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"This column display the total upfront MPH rewards you received when you deposited.\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-dark\">\n                  MPH to repay\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"A certain % of the upfront MPH rewards will need to be paid back when the mature deposit is mature.\">\n                    [i]\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"list\">\n              <ng-container *ngFor=\"let userPool of userPools\">\n                <!-- Pool row -->\n                <tr>\n                  <td>\n                    <div class=\"d-flex align-items-center\">\n\n                      <!-- Image -->\n                      <div class=\"avatar avatar-xs\">\n                        <img class=\"avatar-img rounded-circle mr-3\" src={{userPool.poolInfo.iconPath}} alt=\"...\">\n                      </div>\n\n                      <div class=\"ml-3\">\n\n                        <!-- Heading -->\n                        <h4 class=\"font-weight-normal mb-1\">{{userPool.poolInfo.stablecoinSymbol}}</h4>\n\n                        <!-- Text -->\n                        <small class=\"text-muted\">{{userPool.poolInfo.protocol}}</small>\n\n                      </div>\n                    </div>\n                  </td>\n                  <td>\n                    <!-- Button -->\n                    <button type=\"button\" class=\"card-link small small px-1\"\n                      (click)=\"openDepositModal(userPool.poolInfo.name)\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Add\n                    </button>\n                  </td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td></td>\n                  <td class=\"text-right\"></td>\n                </tr>\n                <!-- Deposit rows -->\n                <ng-container *ngFor=\"let deposit of userPool.deposits\">\n                  <tr>\n                    <td>\n                      <div class=\"d-flex align-items-center\">\n\n                        <!-- Image -->\n                        <h4 class=\"mb-0\">#{{deposit.nftID}}</h4>\n\n                        <div class=\"ml-3\">\n\n                          <!-- badge -->\n                          <span class=\"badge mb-1\"\n                            [ngClass]=\"{'badge-soft-danger': deposit.locked, 'badge-soft-success': !deposit.locked}\">\n                            <ng-container *ngIf=\"deposit.locked\">\n                              Locked\n                            </ng-container>\n                            <ng-container *ngIf=\"!deposit.locked\">\n                              Unlocked\n                            </ng-container>\n                          </span>\n\n                          <!-- Text -->\n                          <small class=\"text-white d-block\">{{deposit.countdownTimer.days}}d\n                            {{deposit.countdownTimer.hours}}h {{deposit.countdownTimer.minutes}}m\n                            {{deposit.countdownTimer.seconds}}s</small>\n                        </div>\n                      </div>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{deposit.amountUSD.toFormat(DECIMALS)}}</h4>\n                      <div class=\"text-white d-block\">{{deposit.amountToken.toFormat(DECIMALS)}}\n                        {{userPool.poolInfo.stablecoinSymbol}}</div>\n                      <div class=\"text-white mb-3\">@ {{deposit.apy.toFormat(DECIMALS)}}% fixed APY</div>\n\n                      <!-- Button -->\n                      <button type=\"button\" class=\"card-link small small px-1\"\n                        (click)=\"openWithdrawModal(deposit, userPool.poolInfo)\" [disabled]=\"wallet.watching\">\n                        <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>\n                        <ng-container *ngIf=\"deposit.locked\">\n                          Withdraw early\n                        </ng-container>\n                        <ng-container *ngIf=\"!deposit.locked\">\n                          Withdraw\n                        </ng-container>\n                      </button>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{deposit.interestEarnedUSD.toFormat(DECIMALS)}}</h4>\n                      <span class=\"text-white\">{{deposit.interestEarnedToken.toFormat(DECIMALS)}}\n                        {{userPool.poolInfo.stablecoinSymbol}}</span>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">\n                        ${{deposit.realMPHReward.times(mphPriceUSD).toFormat(DECIMALS)}}</h4>\n                      <span class=\"text-white d-block\">{{deposit.realMPHReward.toFormat(DECIMALS)}} MPH</span>\n                      <div class=\"text-white\">@ {{deposit.mphAPY.toFormat(DECIMALS)}}% APY</div>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">\n                        ${{deposit.mintMPHAmount.times(mphPriceUSD).toFormat(DECIMALS)}}\n                      </h4>\n                      <span class=\"text-white d-block\">{{deposit.mintMPHAmount.toFormat(DECIMALS)}} MPH</span>\n                      <div class=\"text-white\">@ {{deposit.tempMPHAPY.toFormat(DECIMALS)}}% APY</div>\n                    </td>\n                    <td>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">\n                        ${{deposit.mintMPHAmount.minus(deposit.realMPHReward).times(mphPriceUSD).toFormat(DECIMALS)}}\n                      </h4>\n                      <span class=\"text-white\">\n                        {{deposit.mintMPHAmount.minus(deposit.realMPHReward).toFormat(DECIMALS)}} MPH\n                      </span>\n                    </td>\n                    <td class=\"text-right\"></td>\n                    <td></td>\n                  </tr>\n                </ng-container>\n              </ng-container>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <!-- Explore fixed rate opportunities -->\n      <div class=\"card\" id=\"fixedRateOpportunities\">\n        <h2 class=\"mt-n3 bg-dark mb-0 mx-3 pl-3\">Explore fixed-interest rate opportunities</h2>\n        <div class=\"table-responsive mb-0\">\n          <table class=\"table table-sm table-nowrap card-table\">\n            <thead>\n              <tr>\n                <th class=\"text-dark\">\n                  Pools\n                </th>\n                <th class=\"text-dark\">\n                  Total deposits\n                </th>\n                <th class=\"text-dark\">\n                  Fixed APY\n                </th>\n                <th class=\"text-dark\">\n                  MPH APY\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Annualized MPH reward rate\">\n                    [i]\n                  </button>\n                </th>\n                <th class=\"text-dark\">\n                  MPH APY (temporary)\n                  <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                    ngbTooltip=\"Annualized temporary MPH reward rate. Depositors need to pay back most of the temporary MPH reward received when they withdraw.\">\n                    [i]\n                  </button>\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"list\">\n              <tr class=\"border-left border-2 border-amber\" *ngFor=\"let pool of allPoolList\">\n                <td>\n                  <div class=\"d-flex align-items-center\">\n\n                    <!-- Image -->\n                    <div class=\"avatar avatar-xs\">\n                      <img class=\"avatar-img rounded-circle mr-3\" src={{pool.iconPath}} alt=\"...\">\n                    </div>\n\n                    <div class=\"ml-3\">\n\n                      <!-- Heading -->\n                      <h4 class=\"font-weight-normal mb-1\">{{pool.stablecoinSymbol}}</h4>\n\n                      <!-- Text -->\n                      <small class=\"text-muted\">{{pool.protocol}}</small>\n\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">${{pool.totalDepositUSD.toFormat(DECIMALS)}}</h4>\n                  <span class=\"text-white\">{{pool.totalDepositToken.toFormat(DECIMALS)}} {{pool.stablecoinSymbol}}</span>\n                  <div class=\"mt-3\">\n                    <!-- Button -->\n                    <button type=\"button\" class=\"card-link small small px-1\" (click)=\"openDepositModal(pool.name)\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Add\n                    </button>\n                  </div>\n                </td>\n                <td class=\"glowing\">\n                  {{pool.oneYearInterestRate.toFormat(DECIMALS)}}%\n                </td>\n                <td class=\"glowing\">\n                  +{{pool.mphAPY.toFormat(DECIMALS)}}%\n                </td>\n                <td class=\"glowing\">\n                  +{{pool.tempMPHAPY.toFormat(DECIMALS)}}%\n                </td>\n                <td class=\"text-right\"></td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n    </div>\n  </div> <!-- / .row -->\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport gql from 'graphql-tag';\nimport { ModalDepositComponent } from './modal-deposit/modal-deposit.component';\nimport { ModalWithdrawComponent } from './modal-withdraw/modal-withdraw.component';\nimport { WalletService } from '../wallet.service';\nimport { ContractService, PoolInfo } from '../contract.service';\nimport { DPool, UserPool, UserDeposit } from './types';\nimport { HelpersService } from '../helpers.service';\nimport { Timer } from '../timer';\nimport { ConstantsService } from '../constants.service';\n\nconst mockUser = {\n  totalMPHEarned: 1e3,\n  pools: [\n    {\n      address: '0xb5EE8910A93F8A450E97BE0436F36B9458106682',\n      deposits: [\n        {\n          nftID: 1,\n          amount: 1e3,\n          maturationTimestamp: 1609459200,\n          depositTimestamp: 1601510400,\n          interestEarned: 1e2,\n          mintMPHAmount: 1e2,\n          takeBackMPHAmount: 0\n        }\n      ]\n    },\n    {\n      address: '0xEB2F0A3045db12366A9f6A8e922D725D86a117EB',\n      deposits: [\n        {\n          nftID: 1,\n          amount: 1e3,\n          maturationTimestamp: 1601510400,\n          depositTimestamp: 1601510400,\n          interestEarned: 1e2,\n          mintMPHAmount: 1e2,\n          takeBackMPHAmount: 0\n        }\n      ]\n    }\n  ],\n  totalDeposits: [{\n    pool: {\n      stablecoin: '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48'\n    },\n    totalActiveDeposit: 1e6,\n    totalInterestEarned: 1e4\n  }]\n};\n\n@Component({\n  selector: 'app-deposit',\n  templateUrl: './deposit.component.html',\n  styleUrls: ['./deposit.component.css']\n})\nexport class DepositComponent implements OnInit {\n  YEAR_IN_SEC = 31556952; // Number of seconds in a year\n  DECIMALS = 4;\n\n  totalDepositUSD: BigNumber;\n  totalInterestUSD: BigNumber;\n  totalMPHEarned: BigNumber;\n  allPoolList: DPool[];\n  userPools: UserPool[];\n  mphPriceUSD: BigNumber;\n\n  constructor(\n    private modalService: NgbModal,\n    private apollo: Apollo,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected || this.wallet.watching, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, false);\n      this.loadData(true, false);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  async loadData(loadUser: boolean, loadGlobal: boolean) {\n    await this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n\n    let userID;\n    if (this.wallet.connected && !this.wallet.watching) {\n      userID = this.wallet.userAddress.toLowerCase();\n    } else if (this.wallet.watching) {\n      userID = this.wallet.watchedAddress.toLowerCase();\n    } else {\n      userID = '';\n    }\n\n    const queryString = gql`\n      {\n        ${loadUser ? `user(id: \"${userID}\") {\n          totalMPHEarned\n          totalMPHPaidBack\n          pools {\n            id\n            address\n            mphDepositorRewardTakeBackMultiplier\n            deposits(where: { user: \"${userID}\", active: true }, orderBy: nftID) {\n              nftID\n              fundingID\n              amount\n              maturationTimestamp\n              depositTimestamp\n              interestEarned\n              mintMPHAmount\n              takeBackMPHAmount\n            }\n          }\n          totalDepositByPool {\n            pool {\n              address\n              stablecoin\n            }\n            totalActiveDeposit\n            totalInterestEarned\n          }\n        }` : ''}\n        ${loadGlobal ? `dpools {\n          id\n          address\n          totalActiveDeposit\n          oneYearInterestRate\n          mphDepositorRewardMintMultiplier\n          mphDepositorRewardTakeBackMultiplier\n        }` : ''}\n      }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const user = queryResult.data.user;\n      const dpools = queryResult.data.dpools;\n      let stablecoinPriceCache = {};\n      if (user) {\n        // update totalMPHEarned\n        this.totalMPHEarned = new BigNumber(user.totalMPHEarned).minus(user.totalMPHPaidBack);\n\n        // process user deposit list\n        const userPools: UserPool[] = [];\n        Promise.all(user.pools.map(async pool => {\n          if (pool.deposits.length == 0) return;\n          const poolInfo = this.contract.getPoolInfoFromAddress(pool.address);\n          const stablecoin = poolInfo.stablecoin.toLowerCase()\n          let stablecoinPrice = stablecoinPriceCache[stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(stablecoin);\n            stablecoinPriceCache[stablecoin] = stablecoinPrice;\n          }\n          const userPoolDeposits: Array<UserDeposit> = [];\n          for (const deposit of pool.deposits) {\n            // compute MPH APY\n            let mphDepositorRewardTakeBackMultiplier = new BigNumber(pool.mphDepositorRewardTakeBackMultiplier);\n            const realMPHReward = new BigNumber(1).minus(mphDepositorRewardTakeBackMultiplier).times(deposit.mintMPHAmount);\n            const mphAPY = realMPHReward.times(this.mphPriceUSD).div(deposit.amount).div(stablecoinPrice).div(deposit.maturationTimestamp - deposit.depositTimestamp).times(this.constants.YEAR_IN_SEC).times(100);\n            const tempMPHAPY = new BigNumber(deposit.mintMPHAmount).times(this.mphPriceUSD).div(deposit.amount).div(stablecoinPrice).div(deposit.maturationTimestamp - deposit.depositTimestamp).times(this.constants.YEAR_IN_SEC).times(100);\n\n            // compute interest\n            const interestEarnedToken = this.helpers.applyFeeToInterest(new BigNumber(deposit.interestEarned), poolInfo);\n            const interestEarnedUSD = interestEarnedToken.times(stablecoinPrice);\n\n            const userPoolDeposit: UserDeposit = {\n              nftID: deposit.nftID,\n              fundingID: deposit.fundingID,\n              locked: deposit.maturationTimestamp >= (Date.now() / 1e3),\n              amountToken: new BigNumber(deposit.amount),\n              amountUSD: new BigNumber(deposit.amount).times(stablecoinPrice),\n              apy: interestEarnedToken.div(deposit.amount).div(deposit.maturationTimestamp - deposit.depositTimestamp).times(this.YEAR_IN_SEC).times(100),\n              countdownTimer: new Timer(deposit.maturationTimestamp, 'down'),\n              interestEarnedToken,\n              interestEarnedUSD,\n              mintMPHAmount: new BigNumber(deposit.mintMPHAmount),\n              realMPHReward: realMPHReward,\n              mphAPY: mphAPY,\n              tempMPHAPY: tempMPHAPY\n            }\n            userPoolDeposit.countdownTimer.start();\n            userPoolDeposits.push(userPoolDeposit);\n          }\n\n          const userPool: UserPool = {\n            poolInfo: poolInfo,\n            deposits: userPoolDeposits\n          };\n          userPools.push(userPool);\n        })).then(() => {\n          this.userPools = userPools;\n        });\n\n        // compute total deposit & interest in USD\n        let totalDepositUSD = new BigNumber(0);\n        let totalInterestUSD = new BigNumber(0);\n        Promise.all(user.totalDepositByPool.map(async totalDepositEntity => {\n          let stablecoinPrice = stablecoinPriceCache[totalDepositEntity.pool.stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(totalDepositEntity.pool.stablecoin);\n            stablecoinPriceCache[totalDepositEntity.pool.stablecoin] = stablecoinPrice;\n          }\n\n          const poolInfo = this.contract.getPoolInfoFromAddress(totalDepositEntity.pool.address);\n          const poolDepositUSD = new BigNumber(totalDepositEntity.totalActiveDeposit).times(stablecoinPrice);\n          const poolInterestUSD = this.helpers.applyFeeToInterest(new BigNumber(totalDepositEntity.totalInterestEarned).times(stablecoinPrice), poolInfo);\n          totalDepositUSD = totalDepositUSD.plus(poolDepositUSD);\n          totalInterestUSD = totalInterestUSD.plus(poolInterestUSD);\n        })).then(() => {\n          this.totalDepositUSD = totalDepositUSD;\n          this.totalInterestUSD = totalInterestUSD;\n        });\n      }\n      if (dpools) {\n        let allPoolList = new Array<DPool>(0);\n        Promise.all(dpools.map(async pool => {\n          const poolInfo = this.contract.getPoolInfoFromAddress(pool.address);\n\n          const stablecoin = poolInfo.stablecoin.toLowerCase()\n          let stablecoinPrice = stablecoinPriceCache[stablecoin];\n          if (!stablecoinPrice) {\n            stablecoinPrice = await this.helpers.getTokenPriceUSD(stablecoin);\n            stablecoinPriceCache[stablecoin] = stablecoinPrice;\n          }\n\n          // get MPH APY\n          const mphDepositorRewardMintMultiplier = new BigNumber(pool.mphDepositorRewardMintMultiplier);\n          const mphDepositorRewardTakeBackMultiplier = new BigNumber(pool.mphDepositorRewardTakeBackMultiplier);\n          const tempMPHAPY = mphDepositorRewardMintMultiplier.times(this.mphPriceUSD).times(this.YEAR_IN_SEC).div(stablecoinPrice).times(100);\n          const mphAPY = tempMPHAPY.times(new BigNumber(1).minus(mphDepositorRewardTakeBackMultiplier));\n\n          const dpoolObj: DPool = {\n            name: poolInfo.name,\n            protocol: poolInfo.protocol,\n            stablecoin: poolInfo.stablecoin,\n            stablecoinSymbol: poolInfo.stablecoinSymbol,\n            iconPath: poolInfo.iconPath,\n            totalDepositToken: new BigNumber(pool.totalActiveDeposit),\n            totalDepositUSD: new BigNumber(pool.totalActiveDeposit).times(stablecoinPrice),\n            oneYearInterestRate: this.helpers.applyFeeToInterest(pool.oneYearInterestRate, poolInfo).times(100),\n            mphAPY: mphAPY,\n            tempMPHAPY: tempMPHAPY\n          };\n          allPoolList.push(dpoolObj);\n        })).then(() => {\n          allPoolList.sort((a, b) => {\n            const aName = a.name;\n            const bName = b.name;\n            if (aName > bName) {\n              return 1;\n            }\n            if (aName < bName) {\n              return -1;\n            }\n            return 0;\n          });\n          this.allPoolList = allPoolList;\n        });\n      }\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.totalDepositUSD = new BigNumber(0);\n      this.totalInterestUSD = new BigNumber(0);\n      this.totalMPHEarned = new BigNumber(0);\n      this.userPools = [];\n    }\n\n    if (resetGlobal) {\n      const allPoolList = new Array<DPool>(0);\n      const poolInfoList = this.contract.getPoolInfoList();\n      for (const poolInfo of poolInfoList) {\n        const dpoolObj: DPool = {\n          name: poolInfo.name,\n          protocol: poolInfo.protocol,\n          stablecoin: poolInfo.stablecoin,\n          stablecoinSymbol: poolInfo.stablecoinSymbol,\n          iconPath: poolInfo.iconPath,\n          totalDepositToken: new BigNumber(0),\n          totalDepositUSD: new BigNumber(0),\n          oneYearInterestRate: new BigNumber(0),\n          mphAPY: new BigNumber(0),\n          tempMPHAPY: new BigNumber(0)\n        };\n        allPoolList.push(dpoolObj);\n      }\n      this.allPoolList = allPoolList;\n      this.mphPriceUSD = new BigNumber(0);\n    }\n  }\n\n  openDepositModal(poolName?: string) {\n    const modalRef = this.modalService.open(ModalDepositComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.defaultPoolName = poolName;\n  }\n\n  openWithdrawModal(userDeposit: UserDeposit, poolInfo: PoolInfo) {\n    const modalRef = this.modalService.open(ModalWithdrawComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.userDeposit = userDeposit;\n    modalRef.componentInstance.poolInfo = poolInfo;\n  }\n}\n\ninterface QueryResult {\n  user: {\n    totalMPHEarned: number;\n    totalMPHPaidBack: number;\n    pools: {\n      id: string;\n      address: string;\n      mphDepositorRewardTakeBackMultiplier: number;\n      deposits: {\n        nftID: number;\n        fundingID: number;\n        amount: number;\n        maturationTimestamp: number;\n        depositTimestamp: number;\n        interestEarned: number;\n        mintMPHAmount: number;\n        takeBackMPHAmount: number;\n      }[];\n    }[];\n    totalDepositByPool: {\n      pool: {\n        address: string;\n        stablecoin: string;\n      };\n      totalActiveDeposit: number;\n      totalHistoricalDeposit: number;\n      totalInterestEarned: number;\n    }[];\n  };\n  dpools: {\n    id: string;\n    address: string;\n    totalActiveDeposit: number;\n    oneYearInterestRate: number;\n    mphDepositorRewardMintMultiplier: number;\n    mphDepositorRewardTakeBackMultiplier: number;\n  }[];\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { GraphQLModule } from './graphql.module';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgbModule } from '@ng-bootstrap/ng-bootstrap';\nimport { DepositComponent } from './deposit/deposit.component';\nimport { ModalDepositComponent } from './deposit/modal-deposit/modal-deposit.component';\nimport { ModalWithdrawComponent } from './deposit/modal-withdraw/modal-withdraw.component';\nimport { RewardsComponent } from './rewards/rewards.component';\nimport { ModalStakeComponent } from './rewards/modal-stake/modal-stake.component';\nimport { BondsComponent } from './bonds/bonds.component';\nimport { ModalBondDetailsComponent } from './bonds/modal-bond-details/modal-bond-details.component';\nimport { StatsComponent } from './stats/stats.component';\nimport { SidebarComponent } from './sidebar/sidebar.component';\nimport { HeaderComponent } from './header/header.component';\nimport { FarmingComponent } from './farming/farming.component';\nimport { ModalStakeLPComponent } from './farming/modal-stake-lp/modal-stake-lp.component';\nimport { FundingComponent } from './funding/funding.component';\nimport { ClaimETHComponent } from './claim-eth/claim-eth.component';\nimport { ClaimMPHComponent } from './claim-mph/claim-mph.component';\nimport { VestingComponent } from './vesting/vesting.component';\nimport { ModalUnstakeComponent } from './rewards/modal-unstake/modal-unstake.component';\nimport { ModalUnstakeLPComponent } from './farming/modal-unstake-lp/modal-unstake-lp.component';\nimport { SyncWarningComponent } from './sync-warning/sync-warning.component';\nimport { ZeroCouponBondsComponent } from './zero-coupon-bonds/zero-coupon-bonds.component';\nimport { ModalZeroCouponBondInfoComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/modal-zero-coupon-bond-info.component';\nimport { MintZeroCouponBondComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/mint-zero-coupon-bond/mint-zero-coupon-bond.component';\nimport { RedeemZeroCouponBondComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/redeem-zero-coupon-bond/redeem-zero-coupon-bond.component';\nimport { WithdrawZeroCouponBondComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/withdraw-zero-coupon-bond/withdraw-zero-coupon-bond.component';\nimport { FarmZeroCouponBondComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/farm-zero-coupon-bond.component';\nimport { ModalStakeZCBLPComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-stake-zcblp/modal-stake-zcblp.component';\nimport { ModalUnstakeZCBLPComponent } from './zero-coupon-bonds/modal-zero-coupon-bond-info/farm-zero-coupon-bond/modal-unstake-zcblp/modal-unstake-zcblp.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    DepositComponent,\n    ModalDepositComponent,\n    ModalWithdrawComponent,\n    RewardsComponent,\n    ModalStakeComponent,\n    BondsComponent,\n    ModalBondDetailsComponent,\n    StatsComponent,\n    SidebarComponent,\n    HeaderComponent,\n    FarmingComponent,\n    ModalStakeLPComponent,\n    FundingComponent,\n    ClaimETHComponent,\n    ClaimMPHComponent,\n    VestingComponent,\n    ModalUnstakeComponent,\n    ModalUnstakeLPComponent,\n    SyncWarningComponent,\n    ZeroCouponBondsComponent,\n    ModalZeroCouponBondInfoComponent,\n    MintZeroCouponBondComponent,\n    RedeemZeroCouponBondComponent,\n    WithdrawZeroCouponBondComponent,\n    FarmZeroCouponBondComponent,\n    ModalStakeZCBLPComponent,\n    ModalUnstakeZCBLPComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    GraphQLModule,\n    HttpClientModule,\n    NgbModule,\n    FormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Injectable } from '@angular/core';\nimport Web3 from 'web3';\nimport { WalletService } from './wallet.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ContractService {\n\n  constructor(public wallet: WalletService) { }\n\n  getContract(address: string, abiName: string, web3?: Web3) {\n    const abi = require(`../assets/abis/${abiName}.json`);\n    if (web3) {\n      return new web3.eth.Contract(abi, address);\n    }\n    return new this.wallet.web3.eth.Contract(abi, address);\n  }\n\n  getPoolAddress(name: string): string {\n    return require('../assets/json/pools.json')[name].address;\n  }\n\n  getPoolStablecoinAddress(name: string): string {\n    return require('../assets/json/pools.json')[name].stablecoin;\n  }\n\n  getPoolInfo(name: string): PoolInfo {\n    return require('../assets/json/pools.json')[name];\n  }\n\n  getPoolInfoList(): PoolInfo[] {\n    return Object.keys(require('../assets/json/pools.json'))\n      .map(pool => this.getPoolInfo(pool));\n  }\n\n  getPoolInfoFromAddress(address: string): PoolInfo {\n    return this.getPoolInfoList()\n      .find(poolInfo => poolInfo.address.toLowerCase() === address.toLowerCase());\n  }\n\n  getPool(name: string, web3?: Web3) {\n    const address = this.getPoolAddress(name);\n    return this.getContract(address, 'DInterest', web3);\n  }\n\n  getPoolStablecoin(name: string, web3?: Web3) {\n    const address = this.getPoolStablecoinAddress(name);\n    return this.getContract(address, 'ERC20', web3);\n  }\n\n  getNamedContract(name: string, web3?: Web3) {\n    const address = require('../assets/json/contracts.json')[name];\n    return this.getContract(address, name, web3);\n  }\n\n  getNamedContractAddress(name: string) {\n    return require('../assets/json/contracts.json')[name];\n  }\n\n  getERC20(address: string, web3?: Web3) {\n    return this.getContract(address, 'ERC20', web3);\n  }\n\n  getRewards(address: string, web3?: Web3) {\n    return this.getContract(address, 'Rewards', web3);\n  }\n\n  getZapDepositTokenAddress(symbol: string): string {\n    return require('../assets/json/zap-deposit-tokens.json')[symbol];\n  }\n\n  getZeroCouponBondPoolNameList(): string[] {\n    return Object.keys(require('../assets/json/zero-coupon-bonds.json'));\n  }\n\n  getZeroCouponBondPool(name: string): ZeroCouponBondInfo[] {\n    return require('../assets/json/zero-coupon-bonds.json')[name];\n  }\n\n  getZeroCouponBondContract(address: string, web3?: Web3) {\n    return this.getContract(address, 'ZeroCouponBond', web3);\n  }\n}\n\nexport interface PoolInfo {\n  name: string;\n  address: string;\n  stablecoin: string;\n  stablecoinSymbol: string;\n  stablecoinDecimals: number;\n  protocol: string;\n  iconPath: string;\n  moneyMarket: string;\n  vestPeriod: string;\n  stakingPool?: string;\n  curveSwapAddress?: string;\n  zapDepositTokens?: string[];\n  interestFee?: number;\n  depositFee?: number;\n}\n\nexport interface ZeroCouponBondInfo {\n  series: string;\n  symbol: string;\n  address: string;\n  sushiSwapPair: string;\n  sushiSwapPairBaseTokenSymbol: string;\n  sushiSwapPairBaseTokenAddress: string;\n  farmAddress: string;\n}","var map = {\n\t\"./BancorStaking.json\": \"74q3\",\n\t\"./BancorStakingStore.json\": \"PdKP\",\n\t\"./CompoundLens.json\": \"P+W9\",\n\t\"./CurveZapIn.json\": \"i1rX\",\n\t\"./DInterest.json\": \"IbHG\",\n\t\"./ERC20.json\": \"hDY1\",\n\t\"./Farming.json\": \"YKWF\",\n\t\"./LinkSwapStaking.json\": \"hsdW\",\n\t\"./LiquidityProtectionStats.json\": \"Gwv4\",\n\t\"./MPHLP.json\": \"zRud\",\n\t\"./MPHMinter.json\": \"NkLr\",\n\t\"./MPHToken.json\": \"iaUL\",\n\t\"./MasterChef.json\": \"E84V\",\n\t\"./MerkleDistributor.json\": \"e0yp\",\n\t\"./NFT.json\": \"B+LO\",\n\t\"./Rewards.json\": \"w0/B\",\n\t\"./Vesting.json\": \"vUyS\",\n\t\"./ZapCurve.json\": \"HRtr\",\n\t\"./ZeroCouponBond.json\": \"bUQ3\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"c+P/\";","<div class=\"row px-4 no-gutters\">\n  <div class=\"col\">\n    <h2>How it works</h2>\n    <p class=\"text-white\">\n      When the zero coupon bond becomes mature, you can redeem your zero coupon bond 1-to-1 for\n      {{poolInfo.stablecoinSymbol}}.\n    </p>\n    <p class=\"text-white\">\n      However, it's likely that you won't be able to do so immediately after maturation, because the individual deposits\n      need to be withdrawn first in order to provide the {{poolInfo.stablecoinSymbol}}. The maximum redeemable amount is\n      displayed below. The owners of the deposits are incentivized to withdraw the deposits, since they will receive their\n      MPH reward after withdrawal, so feel free to wait until enough deposits have been withdrawn to redeem your zero\n      coupon bonds.\n    </p>\n    <p class=\"text-white mb-4\">\n      If you urgently need to redeem your bonds for some reason, you also have the option to go to the\n      \"Withdraw MPH reward from deposit\" tab and withdraw the deposits yourself.\n    </p>\n  </div>\n</div>\n\n<div class=\"row justify-content-center\">\n  <div class=\"col\">\n    <ng-container *ngIf=\"!zcbIsMature\">\n      <h3 class=\"text-center glowing\">This zero coupon bond is not mature yet. Please come back when the maturation date has passed.</h3>\n    </ng-container>\n    <ng-container *ngIf=\"zcbIsMature\">\n      <div class=\"row align-items-center mb-4 px-4\">\n        <div class=\"col-12 col-lg-auto\">\n          <h6 class=\"header-pretitle mb-2\">\n            Your max redeemable amount\n          </h6>\n          <h4 class=\"mb-1 font-weight-normal glowing\">\n            {{maxRedeemableAmount.toFormat(poolInfo.stablecoinDecimals)}} {{poolInfo.stablecoinSymbol}}\n          </h4>\n        </div>\n        <div class=\"col-12 col-lg-auto\">\n          <!-- Button -->\n          <button type=\"button\" class=\"card-link small small px-1\" (click)=\"redeem()\" [disabled]=\"!canContinue\">\n            <i class=\"fe fe-dollar-sign mr-2 align-bottom\"></i>\n            Redeem max possible amount\n          </button>\n        </div>\n      </div>\n    </ng-container>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService, PoolInfo } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from '../../zero-coupon-bonds.component';\n\n@Component({\n  selector: 'app-redeem-zero-coupon-bond',\n  templateUrl: './redeem-zero-coupon-bond.component.html',\n  styleUrls: ['./redeem-zero-coupon-bond.component.css']\n})\nexport class RedeemZeroCouponBondComponent implements OnInit {\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  @Input() poolInfo: PoolInfo;\n  now: Date;\n  globalRedeemableAmount: BigNumber;\n\n  constructor(\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  resetData(): void {\n    this.now = new Date();\n    this.globalRedeemableAmount = new BigNumber(0);\n  }\n\n  async loadData() {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const stablecoin = this.contract.getPoolStablecoin(this.poolInfo.name, readonlyWeb3);\n    const stablecoinPrecision = Math.pow(10, this.poolInfo.stablecoinDecimals);\n    stablecoin.methods.balanceOf(this.zcbEntry.zcbInfo.address).call().then(balance => this.globalRedeemableAmount = new BigNumber(balance).div(stablecoinPrecision));\n  }\n\n  get zcbIsMature(): boolean {\n    return this.now > this.zcbEntry.maturationTimestamp;\n  }\n\n  get canContinue(): boolean {\n    return this.wallet.connected;\n  }\n\n  get maxRedeemableAmount(): BigNumber {\n    return BigNumber.min(this.globalRedeemableAmount, this.zcbEntry.userBalance);\n  }\n\n  redeem() {\n    const zcbContract = this.contract.getZeroCouponBondContract(this.zcbEntry.zcbInfo.address);\n    const stablecoinPrecision = Math.pow(10, this.poolInfo.stablecoinDecimals);\n    const redeemAmount = BigNumber.min(this.zcbEntry.userBalance, this.globalRedeemableAmount).times(stablecoinPrecision).integerValue().toFixed();\n    const func = zcbContract.methods.redeemStablecoin(redeemAmount);\n\n    this.wallet.sendTx(func, () => { }, () => { }, (err) => { this.wallet.displayGenericError(err) });\n  }\n}\n","<div class=\"container-fluid justify-content-end px-4\">\n  <div class=\"d-inline-flex\">\n    <div class=\"mr-4 text-white d-inline-block\">\n      <!-- Title -->\n      <h6 class=\"text-uppercase text-secondary mb-2\">\n        Deposit TVL\n      </h6>\n      <!-- Heading -->\n      <span class=\"h4 mb-0 glowing\">\n        ${{depositValueLocked.toFormat(4)}}\n      </span>\n    </div>\n    <div class=\"mr-4 text-white d-inline-block\">\n      <!-- Title -->\n      <h6 class=\"text-uppercase text-secondary mb-2\">\n        Liquidity Mining TVL\n      </h6>\n      <!-- Heading -->\n      <span class=\"h4 mb-0 glowing\">\n        ${{farmingValueLocked.plus(sushiFarmingValueLocked).plus(bancorFarmingValueLocked).toFormat(4)}}\n      </span>\n    </div>\n    <div class=\"mr-4 text-white d-inline-block\">\n      <!-- Title -->\n      <h6 class=\"text-uppercase text-secondary mb-2\">\n        MPH Price\n      </h6>\n      <!-- Heading -->\n      <span class=\"h4 mb-0 glowing\">\n        ${{mphPriceUSD.toFormat(4)}}\n      </span>\n    </div>\n    <button class=\"card-link small px-1\" type=\"button\" routerLink=\"/rewards\">\n      {{mphBalance.toFormat(4)}} MPH <img src=\"./assets/img/icon-default.png\" class=\"mx-1 icon-logo\" alt=\"...\"\n        width=\"18px\">\n    </button>\n    <!-- Connect/watch button -->\n    <div class=\"btn-group ml-3\">\n      <button type=\"button\" class=\"card-link\" (click)=\"connectWallet()\">\n        <div *ngIf=\"wallet.connected && !wallet.watching\">\n          {{wallet.userAddress.substring(0, 14)}}\n        </div>\n        <div *ngIf=\"!wallet.connected && !wallet.watching\">\n          Connect Wallet\n        </div>\n        <div *ngIf=\"wallet.watching\">\n          {{wallet.watchedAddress.substring(0, 14)}}\n        </div>\n      </button>\n      <button type=\"button\" class=\"card-link dropdown-toggle dropdown-toggle-split\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n        <span class=\"sr-only\">Toggle Dropdown</span>\n      </button>\n      <div class=\"dropdown-menu dropdown-menu-right p-3\" style=\"width: 300px;\">\n        <!-- Connected Wallet -->\n        <span *ngIf=\"wallet.connected\">\n          <h6 class=\"dropdown-header px-0\">Connected</h6>\n          <button type=\"button\" class=\"card-link\" (click)=\"switchFocus(false)\">\n            {{wallet.userAddress.substring(0, 14)}}\n          </button>\n          <span *ngIf=\"!wallet.watching\" class=\"badge\">Viewing</span>\n        </span>\n        <!-- Watched Wallet -->\n        <span *ngIf=\"wallet.watchedAddress != null\">\n          <h6 class=\"dropdown-header px-0\">Watched</h6>\n          <button type=\"button\" class=\"card-link\" (click)=\"switchFocus(true)\">\n            {{wallet.watchedAddress.substring(0, 14)}}\n          </button>\n          <span *ngIf=\"wallet.watching\" class=\"badge\">Viewing</span>\n        </span>\n        <!-- Add/Edit Watched Address -->\n        <span *ngIf=\"wallet.watchedAddress == null\">\n          <h6 class=\"dropdown-header px-0\">Watch address</h6>\n        </span>\n        <span *ngIf=\"wallet.watchedAddress != null\">\n          <h6 class=\"dropdown-header px-0\">Edit watched address</h6>\n        </span>\n        <form #watchForm=\"ngForm\" (ngSubmit)=\"onSubmit()\">\n          <div class=\"form-group\">\n            <input type=\"text\" [class.is-invalid]=\"address.invalid && address.dirty\"\n             class=\"form-control\" pattern=\"^0x[a-fA-F0-9]{40}$\" required #address=\"ngModel\" name=\"watchAddress\"\n             id=\"TrackEthAddress\"  placeholder=\"Add an Ethereum address\"\n             [(ngModel)]=\"watchedModel.address\">\n             <small *ngIf=\"address.invalid && address.dirty\" class=\"text-danger\"> Please enter a valid address</small>\n          </div>\n          <button *ngIf=\"wallet.watchedAddress == null\" type=\"submit\" class=\"card-link\" [disabled]=\"watchForm.form.invalid\">Add watched address</button>\n          <button *ngIf=\"wallet.watchedAddress != null\" type=\"submit\" class=\"card-link\" [disabled]=\"watchForm.form.invalid\">Edit watched address</button>\n        </form>\n      </div>\n    </div>\n\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport gql from 'graphql-tag';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService } from '../contract.service';\nimport { HelpersService } from '../helpers.service';\nimport { WalletService } from '../wallet.service';\nimport { Watch } from '../watch';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit {\n  mphBalance: BigNumber;\n  depositValueLocked: BigNumber;\n  farmingValueLocked: BigNumber;\n  sushiFarmingValueLocked: BigNumber;\n  bancorFarmingValueLocked: BigNumber;\n  mphPriceUSD: BigNumber;\n  bntPriceUSD: BigNumber;\n\n  watchedModel = new Watch(false, \"\");\n\n  constructor(private apollo: Apollo, public wallet: WalletService, public contract: ContractService,\n    public constants: ConstantsService, public helpers: HelpersService) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, true);\n      this.loadData(true, true);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  async loadData(loadUser: boolean, loadGlobal: boolean) {\n    const queryString = gql`\n    {\n      ${loadGlobal ? `\n        dpools {\n          id\n          stablecoin\n          totalActiveDeposit\n        }\n      ` : ''}\n    }\n    `;\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n\n    if (loadUser && this.wallet.connected && !this.wallet.watching) {\n      const mphToken = this.contract.getNamedContract('MPHToken', readonlyWeb3);\n      mphToken.methods.balanceOf(this.wallet.userAddress).call().then(mphBalance => {\n        this.mphBalance = new BigNumber(mphBalance).div(this.constants.PRECISION);\n      });\n    } else {\n      const mphToken = this.contract.getNamedContract('MPHToken', readonlyWeb3);\n      mphToken.methods.balanceOf(this.wallet.watchedAddress).call().then(mphBalance => {\n        this.mphBalance = new BigNumber(mphBalance).div(this.constants.PRECISION);\n      });\n    }\n\n    if (loadGlobal) {\n      //uni\n      const rewards = this.contract.getNamedContract('Farming', readonlyWeb3);\n      const totalStakedMPHLPBalance = new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION);\n      const mphLPPriceUSD = await this.helpers.getMPHLPPriceUSD();\n      this.farmingValueLocked = totalStakedMPHLPBalance.times(mphLPPriceUSD);\n      this.mphPriceUSD = await this.helpers.getMPHPriceUSD();\n\n      //sushi\n      const sushiLPToken = this.contract.getERC20(this.constants.SUSHI_LP, readonlyWeb3);\n      const stakedSushiLPToken = new BigNumber(await sushiLPToken.methods.balanceOf(this.constants.SUSHI_MASTERCHEF).call()).div(this.constants.PRECISION);\n      const sushiMphLPPriceUSD  = await this.helpers.getLPPriceUSD(this.constants.SUSHI_LP);\n      this.sushiFarmingValueLocked = stakedSushiLPToken.times(sushiMphLPPriceUSD);\n\n      //bancor\n      const bancorLiquidityProtectionStats = this.contract.getContract(this.constants.BANCOR_LP_STATS, 'LiquidityProtectionStats', readonlyWeb3);\n      const bancorTotalStakedMPH = new BigNumber(await bancorLiquidityProtectionStats.methods.totalReserveAmount(this.constants.BANCOR_MPHBNT_POOL, this.constants.MPH).call()).div(this.constants.PRECISION);\n      const bancorTotalStakedBNT = new BigNumber(await bancorLiquidityProtectionStats.methods.totalReserveAmount(this.constants.BANCOR_MPHBNT_POOL, this.constants.BNT).call()).div(this.constants.PRECISION);\n      this.bntPriceUSD = new BigNumber(await this.helpers.getTokenPriceUSD(this.constants.BNT));\n      this.bancorFarmingValueLocked = bancorTotalStakedMPH.times(this.mphPriceUSD).plus(bancorTotalStakedBNT.times(this.bntPriceUSD));\n      // this seems to be off by a little bit, likely because it only accounts for protected liquidity\n\n    }\n  }\n\n  handleData(queryResult: ApolloQueryResult<QueryResult>): void {\n    if (!queryResult.loading) {\n      const dpools = queryResult.data.dpools;\n      if (dpools) {\n        let totalDepositUSD = new BigNumber(0);\n        let stablecoinPriceCache = {};\n        Promise.all(\n          dpools.map(async pool => {\n            let stablecoinPrice = stablecoinPriceCache[pool.stablecoin];\n            if (!stablecoinPrice) {\n              stablecoinPrice = await this.helpers.getTokenPriceUSD(pool.stablecoin);\n              stablecoinPriceCache[pool.stablecoin] = stablecoinPrice;\n            }\n\n            const poolDepositUSD = new BigNumber(pool.totalActiveDeposit).times(stablecoinPrice);\n            totalDepositUSD = totalDepositUSD.plus(poolDepositUSD);\n          })\n        ).then(() => {\n          this.depositValueLocked = totalDepositUSD;\n        });\n      }\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.mphBalance = new BigNumber(0);\n    }\n\n    if (resetGlobal) {\n      this.depositValueLocked = new BigNumber(0);\n      this.farmingValueLocked = new BigNumber(0);\n      this.sushiFarmingValueLocked = new BigNumber(0);\n      this.bancorFarmingValueLocked = new BigNumber(0);\n      this.mphPriceUSD = new BigNumber(0);\n      this.bntPriceUSD = new BigNumber(0);\n    }\n  }\n\n  connectWallet() {\n    this.wallet.connect(() => { }, () => { }, false);\n  }\n\n  onSubmit() {\n    this.wallet.watchWallet(this.watchedModel.address);\n    this.loadData(true, true);\n  }\n\n  switchFocus(watching: boolean) {\n    this.wallet.watch.watching = watching;\n    this.loadData(true, true);\n  }\n\n}\n\ninterface QueryResult {\n  dpools: {\n    id: string;\n    stablecoin: string;\n    totalActiveDeposit: number;\n  }[];\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\n\n@Component({\n  selector: 'app-modal-unstake',\n  templateUrl: './modal-unstake.component.html',\n  styleUrls: ['./modal-unstake.component.css']\n})\nexport class ModalUnstakeComponent implements OnInit {\n  @Input() stakedMPHPoolProportion: BigNumber;\n  @Input() stakedMPHBalance: BigNumber;\n  @Input() totalStakedMPHBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerWeek: BigNumber;\n  unstakeAmount: BigNumber;\n  newStakedMPHPoolProportion: BigNumber;\n  newRewardPerWeek: BigNumber;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    this.setUnstakeAmount(this.stakedMPHBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.unstakeAmount = new BigNumber(0);\n    this.newStakedMPHPoolProportion = new BigNumber(0);\n    this.newRewardPerWeek = new BigNumber(0);\n  }\n\n  setUnstakeAmount(amount: number | string) {\n    this.unstakeAmount = new BigNumber(amount);\n    if (this.unstakeAmount.isNaN()) {\n      this.unstakeAmount = new BigNumber(0);\n    }\n    this.newStakedMPHPoolProportion = this.stakedMPHBalance.minus(this.unstakeAmount).div(this.totalStakedMPHBalance.minus(this.unstakeAmount)).times(100);\n    if (this.newStakedMPHPoolProportion.isNaN()) {\n      this.newStakedMPHPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerWeek = this.stakedMPHBalance.minus(this.unstakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedMPHBalance.minus(this.unstakeAmount))).times(this.constants.WEEK_IN_SEC);\n    if (this.newRewardPerWeek.isNaN()) {\n      this.newRewardPerWeek = new BigNumber(0);\n    }\n  }\n\n  unstake() {\n    const rewards = this.contract.getNamedContract('Rewards');\n    const unstakeAmount = this.helpers.processWeb3Number(this.unstakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.withdraw(unstakeAmount);\n\n    this.wallet.sendTx(func, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.unstakeAmount.gt(0);\n  }\n}","<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to unstake?\n              </h1>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"unstakeAmount.toString()\"\n                        (input)=\"setUnstakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setUnstakeAmount(this.stakedMPHBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{stakedMPHBalance.toFormat()}} MPH staked</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the MPH staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedMPHPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedMPHPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every week.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerWeek.toFormat(4)}} DAI/week</h4>\n                            <span class=\"text-white\">Current: {{rewardPerWeek.toFormat(4)}} DAI/week</span>\n                          </td>\n                        </tr>\n                        <tr class=\"d-none\">\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Staking pool APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Staking rewards APY annualized and compounded based on the last week\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            0.0000%\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"unstake()\" [disabled]=\"!canContinue()\">Unstake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\n\n@Component({\n  selector: 'app-modal-stake-lp',\n  templateUrl: './modal-stake-lp.component.html',\n  styleUrls: ['./modal-stake-lp.component.css']\n})\nexport class ModalStakeLPComponent implements OnInit {\n  @Input() stakedMPHPoolProportion: BigNumber;\n  @Input() stakedMPHBalance: BigNumber;\n  @Input() totalStakedMPHBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerDay: BigNumber;\n  @Input() mphPriceUSD: BigNumber;\n  mphBalance: BigNumber;\n  stakeAmount: BigNumber;\n  newStakedMPHPoolProportion: BigNumber;\n  newRewardPerDay: BigNumber;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    const lpToken = this.contract.getNamedContract('MPHLP');\n    this.mphBalance = new BigNumber(await lpToken.methods.balanceOf(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n    this.setStakeAmount(this.mphBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.mphBalance = new BigNumber(0);\n    this.stakeAmount = new BigNumber(0);\n    this.newStakedMPHPoolProportion = new BigNumber(0);\n    this.newRewardPerDay = new BigNumber(0);\n  }\n\n  setStakeAmount(amount: number | string) {\n    this.stakeAmount = new BigNumber(amount);\n    if (this.stakeAmount.isNaN()) {\n      this.stakeAmount = new BigNumber(0);\n    }\n    this.newStakedMPHPoolProportion = this.stakedMPHBalance.plus(this.stakeAmount).div(this.totalStakedMPHBalance.plus(this.stakeAmount)).times(100);\n    if (this.newStakedMPHPoolProportion.isNaN()) {\n      this.newStakedMPHPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerDay = this.stakedMPHBalance.plus(this.stakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedMPHBalance.plus(this.stakeAmount))).times(this.constants.DAY_IN_SEC);\n    if (this.newRewardPerDay.isNaN()) {\n      this.newRewardPerDay = new BigNumber(0);\n    }\n  }\n\n  stake() {\n    const rewards = this.contract.getNamedContract('Farming');\n    const lpToken = this.contract.getNamedContract('MPHLP');\n    const stakeAmount = this.helpers.processWeb3Number(this.stakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.stake(stakeAmount);\n\n    this.wallet.sendTxWithToken(func, lpToken, rewards.options.address, stakeAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.stakeAmount.gt(0);\n  }\n}\n","<!-- Modal: modal-stake-mph -->\n<!-- IDEA: modal modalStake -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to stake?\n              </h1>\n              <p class=\"text-white small text-center mb-5\">\n                Stake your MPH-ETH LP tokens to earn rewards.</p>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"stakeAmount.toString()\"\n                        (input)=\"setStakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setStakeAmount(this.mphBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{mphBalance.toFormat()}} MPH-ETH available</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the MPH staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedMPHPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedMPHPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerDay.toFormat(4)}} MPH/day</h4>\n                            <span class=\"text-white\">Current: {{rewardPerDay.toFormat(4)}} MPH/day</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate USD</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{newRewardPerDay.times(mphPriceUSD).toFormat(4)}}/day</h4>\n                            <span class=\"text-white\">Current:\n                              ${{rewardPerDay.times(mphPriceUSD).toFormat(4)}}/day</span>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"stake()\" [disabled]=\"!canContinue()\">Stake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from '../../zero-coupon-bonds.component';\nimport { ModalStakeZCBLPComponent } from './modal-stake-zcblp/modal-stake-zcblp.component';\nimport { ModalUnstakeZCBLPComponent } from './modal-unstake-zcblp/modal-unstake-zcblp.component';\n\n@Component({\n  selector: 'app-farm-zero-coupon-bond',\n  templateUrl: './farm-zero-coupon-bond.component.html',\n  styleUrls: ['./farm-zero-coupon-bond.component.css']\n})\nexport class FarmZeroCouponBondComponent implements OnInit {\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  PERIOD = 42; // 42 days\n\n  stakedTokenBalance: BigNumber;\n  stakedTokenPoolProportion: BigNumber;\n  claimableRewards: BigNumber;\n  rewardPerDay: BigNumber;\n  totalRewardPerSecond: BigNumber;\n  rewardPerStakeTokenPerSecond: BigNumber;\n  totalStakedTokenBalance: BigNumber;\n  rewardTokenPriceUSD: BigNumber;\n  stakeTokenPriceUSD: BigNumber;\n  yearlyROI: BigNumber;\n  monthlyROI: BigNumber;\n  weeklyROI: BigNumber;\n  dailyROI: BigNumber;\n  rewardStartTime: string;\n  rewardEndTime: string;\n\n  constructor(\n    private modalService: NgbModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, true);\n      this.loadData(true, true);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  async loadData(loadUser: boolean, loadGlobal: boolean) {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const rewards = this.contract.getContract(this.zcbEntry.zcbInfo.farmAddress, 'Farming', readonlyWeb3);\n\n    if (loadGlobal) {\n      this.totalStakedTokenBalance = new BigNumber(await rewards.methods.totalSupply().call()).div(this.constants.PRECISION);\n      this.totalRewardPerSecond = new BigNumber(await rewards.methods.rewardRate().call()).div(this.constants.PRECISION);\n      this.rewardPerStakeTokenPerSecond = this.totalRewardPerSecond.div(this.totalStakedTokenBalance);\n      if (this.totalStakedTokenBalance.isZero()) {\n        this.rewardPerStakeTokenPerSecond = new BigNumber(0);\n      }\n      // load reward start & end time\n      rewards.methods.starttime().call().then(startTime => {\n        this.rewardStartTime = new Date(+startTime * 1e3).toLocaleString();\n        this.rewardEndTime = new Date((+startTime + this.PERIOD * this.constants.DAY_IN_SEC) * 1e3).toLocaleString();\n      });\n\n      this.rewardTokenPriceUSD = await this.helpers.getMPHPriceUSD();\n      this.stakeTokenPriceUSD = await this.helpers.getZCBLPPriceUSD(this.zcbEntry.zcbInfo.sushiSwapPair, this.zcbEntry.zcbInfo.sushiSwapPairBaseTokenAddress);\n      const secondROI = this.totalRewardPerSecond.times(this.rewardTokenPriceUSD).div(this.totalStakedTokenBalance.times(this.stakeTokenPriceUSD)).times(100);\n      this.yearlyROI = secondROI.times(this.constants.YEAR_IN_SEC);\n      this.monthlyROI = secondROI.times(this.constants.MONTH_IN_SEC);\n      this.weeklyROI = secondROI.times(this.constants.WEEK_IN_SEC);\n      this.dailyROI = secondROI.times(this.constants.DAY_IN_SEC);\n    }\n\n    if (loadUser) {\n      this.stakedTokenBalance = new BigNumber(await rewards.methods.balanceOf(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n      this.claimableRewards = new BigNumber(await rewards.methods.earned(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n      this.stakedTokenPoolProportion = this.stakedTokenBalance.div(this.totalStakedTokenBalance).times(100);\n      if (this.totalStakedTokenBalance.isZero()) {\n        this.stakedTokenPoolProportion = new BigNumber(0);\n      }\n      this.rewardPerDay = this.stakedTokenBalance.times(this.rewardPerStakeTokenPerSecond).times(this.constants.DAY_IN_SEC);\n    }\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetUser) {\n      this.stakedTokenBalance = new BigNumber(0);\n      this.stakedTokenPoolProportion = new BigNumber(0);\n      this.claimableRewards = new BigNumber(0);\n      this.rewardPerDay = new BigNumber(0);\n    }\n\n    if (resetGlobal) {\n      this.totalStakedTokenBalance = new BigNumber(0);\n      this.rewardPerStakeTokenPerSecond = new BigNumber(0);\n      this.totalRewardPerSecond = new BigNumber(0);\n      this.rewardTokenPriceUSD = new BigNumber(0);\n      this.stakeTokenPriceUSD = new BigNumber(0);\n      this.yearlyROI = new BigNumber(0);\n      this.monthlyROI = new BigNumber(0);\n      this.weeklyROI = new BigNumber(0);\n      this.dailyROI = new BigNumber(0);\n    }\n  }\n\n  openStakeModal() {\n    const modalRef = this.modalService.open(ModalStakeZCBLPComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedTokenPoolProportion = this.stakedTokenPoolProportion;\n    modalRef.componentInstance.stakedTokenBalance = this.stakedTokenBalance;\n    modalRef.componentInstance.totalStakedTokenBalance = this.totalStakedTokenBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerDay = this.rewardPerDay;\n    modalRef.componentInstance.rewardTokenPriceUSD = this.rewardTokenPriceUSD;\n    modalRef.componentInstance.zcbEntry = this.zcbEntry;\n  }\n\n  openUnstakeModal() {\n    const modalRef = this.modalService.open(ModalUnstakeZCBLPComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.stakedTokenPoolProportion = this.stakedTokenPoolProportion;\n    modalRef.componentInstance.stakedTokenBalance = this.stakedTokenBalance;\n    modalRef.componentInstance.totalStakedTokenBalance = this.totalStakedTokenBalance;\n    modalRef.componentInstance.totalRewardPerSecond = this.totalRewardPerSecond;\n    modalRef.componentInstance.rewardPerDay = this.rewardPerDay;\n    modalRef.componentInstance.rewardTokenPriceUSD = this.rewardTokenPriceUSD;\n    modalRef.componentInstance.zcbEntry = this.zcbEntry;\n  }\n\n  unstakeAndClaim() {\n    const rewards = this.contract.getContract(this.zcbEntry.zcbInfo.farmAddress, 'Farming');\n    const func = rewards.methods.exit();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  claim() {\n    const rewards = this.contract.getContract(this.zcbEntry.zcbInfo.farmAddress, 'Farming');\n    const func = rewards.methods.getReward();\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected;\n  }\n}\n","<div class=\"card-deck my-5\">\n  <div class=\"mb-4 mb-lg-0\">\n    <div class=\"card-body py-0\">\n      <div class=\"row\">\n        <div class=\"col-12 col-lg-6\">\n          <h5 class=\"text-uppercase text-amber mt-n3 pl-3\">\n            <a class=\"text-purple\" href=\"https://analytics.sushi.com/pairs/{{zcbEntry.zcbInfo.sushiSwapPair}}\"\n              target=\"_blank\">Provide\n              liquidity</a>, stake & earn MPH / Unstake & <a class=\"text-purple\" href=\"https://app.sushi.com/remove/{{zcbEntry.zcbInfo.sushiSwapPairBaseTokenAddress}}/{{zcbEntry.zcbInfo.address}}\">Remove liquidity</a>\n          </h5>\n          <!-- Heading -->\n          <h2 class=\"mt-4 mb-2 glowing pl-3\">\n            {{stakedTokenBalance.toFormat(4)}} SLP\n          </h2>\n          <h5 class=\"mb-3 text-white pl-3\">\n            (${{stakedTokenBalance.times(stakeTokenPriceUSD).toFormat(4)}})\n            ({{stakedTokenPoolProportion.toFormat(4)}}% of the pool)\n          </h5>\n          <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openStakeModal()\">\n            <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Stake\n          </button>\n          <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"openUnstakeModal()\">\n            <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake\n          </button>\n          <button type=\"button\" class=\"card-link small ml-3 px-1\" (click)=\"unstakeAndClaim()\"\n            [disabled]=\"!canContinue()\">\n            <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Unstake all & Claim\n          </button>\n\n          <div class=\"row pl-3 mt-4\">\n            <div class=\"col-12 col-lg-6\">\n              <h5 class=\"text-uppercase\">\n                Claimable rewards\n              </h5>\n              <!-- Heading -->\n              <h2 class=\"mb-3 glowing\">\n                {{claimableRewards.toFormat(4)}} MPH\n              </h2>\n              <h5 class=\"mb-3 text-white\">\n                ${{claimableRewards.times(rewardTokenPriceUSD).toFormat(4)}} /\n                ${{rewardPerDay.times(rewardTokenPriceUSD).toFormat(4)}}/day / {{rewardPerDay.toFormat(4)}} MPH/day\n              </h5>\n              <button type=\"button\" class=\"card-link small px-1\" (click)=\"claim()\" [disabled]=\"!canContinue()\">\n                <i class=\"fe fe-arrow-up mr-2 align-bottom\"></i>Claim\n              </button>\n            </div>\n            <div class=\"col-12 col-lg-6\">\n              <h5 class=\"text-uppercase\">\n                Estimated ROI (y)\n              </h5>\n              <!-- Heading -->\n              <h2 class=\"mb-3 glowing\">\n                {{yearlyROI.toFormat(4)}}%\n              </h2>\n              <h5 class=\"mb-2 text-white\">\n                {{monthlyROI.toFormat(4)}}% (m) / {{weeklyROI.toFormat(4)}}% (w) / {{dailyROI.toFormat(4)}}%\n                (d)\n              </h5>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-12 col-lg-6\">\n          <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col text-left\">\n                  <h3 class=\"text-white\">Total value staked</h3>\n                </div>\n                <div class=\"col text-right\">\n                  <h3 class=\"glowing\">\n                    ${{totalStakedTokenBalance.times(stakeTokenPriceUSD).toFormat(4)}}</h3>\n                </div>\n              </div>\n            </li>\n            <li class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col text-left\">\n                  <h3 class=\"text-white\">Distribution period</h3>\n                </div>\n                <div class=\"col text-right\">\n                  <h3 class=\"glowing\">\n                    {{rewardStartTime}} to {{rewardEndTime}}\n                  </h3>\n                </div>\n              </div>\n            </li>\n            <li class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col text-left\">\n                  <h3 class=\"text-white\">Total reward</h3>\n                </div>\n                <div class=\"col text-right\">\n                  <h3 class=\"glowing\">\n                    {{totalRewardPerSecond.times(PERIOD).times(constants.DAY_IN_SEC).toFormat(0)}} MPH</h3>\n                  <h5 class=\"text-white\">\n                    ${{totalRewardPerSecond.times(PERIOD).times(constants.DAY_IN_SEC).times(rewardTokenPriceUSD).toFormat(4)}}\n                  </h5>\n                </div>\n              </div>\n            </li>\n            <li class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col text-left\">\n                  <h3 class=\"text-white\">Daily reward</h3>\n                </div>\n                <div class=\"col text-right\">\n                  <h3 class=\"glowing\">\n                    {{totalRewardPerSecond.times(constants.DAY_IN_SEC).toFormat(4)}} MPH\n                  </h3>\n                  <h5 class=\"text-white\">\n                    ${{totalRewardPerSecond.times(constants.DAY_IN_SEC).times(rewardTokenPriceUSD).toFormat(4)}}\n                  </h5>\n                </div>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Injectable, Inject, EventEmitter } from '@angular/core';\nimport { Web3Enabled } from './web3Enabled';\nimport Web3 from 'web3';\nimport { WEB3 } from './web3';\nimport { isNullOrUndefined } from 'util';\nimport { Watch } from './watch';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class WalletService extends Web3Enabled {\n  connectedEvent: EventEmitter<null>;\n  disconnectedEvent: EventEmitter<null>;\n  watch: Watch;\n\n  constructor(@Inject(WEB3) public web3: Web3) {\n    super(web3);\n    this.connectedEvent = new EventEmitter<null>();\n    this.disconnectedEvent = new EventEmitter<null>();\n    this.watch = new Watch(false, null);\n  }\n\n  public get userAddress(): string {\n    return this.state.address;\n  }\n\n  public get connected(): boolean {\n    return !isNullOrUndefined(this.state.address);\n  }\n\n  public get watchedAddress(): string {\n    return this.watch.address;\n  }\n\n  public get watching(): boolean {\n    return this.watch.watching;\n  }\n\n  async connect(onConnected, onError, isStartupMode: boolean) {\n    const _onConnected = () => {\n      this.connectedEvent.emit();\n      onConnected();\n    };\n    const _onError = () => {\n      this.disconnectedEvent.emit();\n      onError();\n    }\n    await super.connect(_onConnected, _onError, isStartupMode);\n  }\n\n  watchWallet(address: string) {\n    this.watch.watching = true;\n    this.watch.address = address;\n  }\n\n}\n","<ng-container *ngIf=\"shouldDisplay()\">\n  <div class=\"alert alert-pink-blue rounded-0 mb-0 mt-n3 mt-md-0\">\n    Warning: The data on this site has only synced to Ethereum block {{syncBlockNumber}} (out of {{latestBlockNumber}}). Please check back soon. \n  </div>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\nimport { request, gql } from 'graphql-request'\nimport { ConstantsService } from '../constants.service';\nimport { WalletService } from '../wallet.service';\n\n@Component({\n  selector: 'app-sync-warning',\n  templateUrl: './sync-warning.component.html',\n  styleUrls: ['./sync-warning.component.css']\n})\nexport class SyncWarningComponent implements OnInit {\n  syncBlockNumber: number;\n  latestBlockNumber: number;\n\n  constructor(public constants: ConstantsService, public wallet: WalletService) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n  }\n\n  loadData() {\n    const queryString = gql`\n      {\n        _meta {\n          block {\n            number\n          }\n        }\n      }\n    `;\n    request(this.constants.GRAPHQL_ENDPOINT, queryString).then((data) => this.handleData(data));\n  }\n\n  async handleData(queryResult: QueryResult) {\n    this.syncBlockNumber = queryResult._meta.block.number;\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    this.latestBlockNumber = await readonlyWeb3.eth.getBlockNumber();\n  }\n\n  resetData(): void {\n    this.syncBlockNumber = 0;\n    this.latestBlockNumber = 0;\n  }\n\n  shouldDisplay(): boolean {\n    return this.latestBlockNumber >= this.syncBlockNumber + this.constants.SUBGRAPH_SYNC_WARNING_THRESHOLD;\n  }\n}\n\ninterface QueryResult {\n  _meta: {\n    block: {\n      number: number;\n    };\n  };\n}","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from 'src/app/zero-coupon-bonds/zero-coupon-bonds.component';\n\n@Component({\n  selector: 'app-modal-stake-zcblp',\n  templateUrl: './modal-stake-zcblp.component.html',\n  styleUrls: ['./modal-stake-zcblp.component.css']\n})\nexport class ModalStakeZCBLPComponent implements OnInit {\n\n  @Input() stakedTokenPoolProportion: BigNumber;\n  @Input() stakedTokenBalance: BigNumber;\n  @Input() totalStakedTokenBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerDay: BigNumber;\n  @Input() rewardTokenPriceUSD: BigNumber;\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  stakeTokenBalance: BigNumber;\n  stakeAmount: BigNumber;\n  newStakedTokenPoolProportion: BigNumber;\n  newRewardPerDay: BigNumber;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    const lpToken = this.contract.getContract(this.zcbEntry.zcbInfo.sushiSwapPair, 'MPHLP');\n    this.stakeTokenBalance = new BigNumber(await lpToken.methods.balanceOf(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n    this.setStakeAmount(this.stakeTokenBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.stakeTokenBalance = new BigNumber(0);\n    this.stakeAmount = new BigNumber(0);\n    this.newStakedTokenPoolProportion = new BigNumber(0);\n    this.newRewardPerDay = new BigNumber(0);\n  }\n\n  setStakeAmount(amount: number | string) {\n    this.stakeAmount = new BigNumber(amount);\n    if (this.stakeAmount.isNaN()) {\n      this.stakeAmount = new BigNumber(0);\n    }\n    this.newStakedTokenPoolProportion = this.stakedTokenBalance.plus(this.stakeAmount).div(this.totalStakedTokenBalance.plus(this.stakeAmount)).times(100);\n    if (this.newStakedTokenPoolProportion.isNaN()) {\n      this.newStakedTokenPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerDay = this.stakedTokenBalance.plus(this.stakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedTokenBalance.plus(this.stakeAmount))).times(this.constants.DAY_IN_SEC);\n    if (this.newRewardPerDay.isNaN()) {\n      this.newRewardPerDay = new BigNumber(0);\n    }\n  }\n\n  stake() {\n    const rewards = this.contract.getContract(this.zcbEntry.zcbInfo.farmAddress, 'Farming');\n    const lpToken = this.contract.getContract(this.zcbEntry.zcbInfo.sushiSwapPair, 'MPHLP');\n    const stakeAmount = this.helpers.processWeb3Number(this.stakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.stake(stakeAmount);\n\n    this.wallet.sendTxWithToken(func, lpToken, rewards.options.address, stakeAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.stakeAmount.gt(0);\n  }\n}\n","<!-- Modal: modal-stake-mph -->\n<!-- IDEA: modal modalStake -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to stake?\n              </h1>\n              <p class=\"text-white small text-center mb-5\">\n                Stake your zero coupon bond SLP tokens to earn rewards.</p>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"stakeAmount.toString()\"\n                        (input)=\"setStakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setStakeAmount(this.stakeTokenBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{stakeTokenBalance.toFormat()}} SLP available</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedTokenPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedTokenPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every week.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerDay.toFormat(4)}} MPH/day</h4>\n                            <span class=\"text-white\">Current: {{rewardPerDay.toFormat(4)}} MPH/day</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate USD</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every day.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">\n                              ${{newRewardPerDay.times(rewardTokenPriceUSD).toFormat(4)}}/day</h4>\n                            <span class=\"text-white\">Current:\n                              ${{rewardPerDay.times(rewardTokenPriceUSD).toFormat(4)}}/day</span>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"stake()\" [disabled]=\"!canContinue()\">Stake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport { Apollo, gql } from 'apollo-angular';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\n\n@Component({\n  selector: 'app-modal-stake',\n  templateUrl: './modal-stake.component.html',\n  styleUrls: ['./modal-stake.component.css']\n})\nexport class ModalStakeComponent implements OnInit {\n  @Input() stakedMPHPoolProportion: BigNumber;\n  @Input() stakedMPHBalance: BigNumber;\n  @Input() totalStakedMPHBalance: BigNumber;\n  @Input() totalRewardPerSecond: BigNumber;\n  @Input() rewardPerWeek: BigNumber;\n  mphBalance: BigNumber;\n  stakeAmount: BigNumber;\n  newStakedMPHPoolProportion: BigNumber;\n  newRewardPerWeek: BigNumber;\n\n  constructor(\n    private apollo: Apollo,\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public constants: ConstantsService,\n    public helpers: HelpersService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    const mphToken = this.contract.getNamedContract('MPHToken', this.wallet.readonlyWeb3());\n    this.mphBalance = new BigNumber(await mphToken.methods.balanceOf(this.wallet.userAddress).call()).div(this.constants.PRECISION);\n    this.setStakeAmount(this.mphBalance.toFixed(18));\n  }\n\n  resetData(): void {\n    this.mphBalance = new BigNumber(0);\n    this.stakeAmount = new BigNumber(0);\n    this.newStakedMPHPoolProportion = new BigNumber(0);\n    this.newRewardPerWeek = new BigNumber(0);\n  }\n\n  setStakeAmount(amount: number | string) {\n    this.stakeAmount = new BigNumber(amount);\n    if (this.stakeAmount.isNaN()) {\n      this.stakeAmount = new BigNumber(0);\n    }\n    this.newStakedMPHPoolProportion = this.stakedMPHBalance.plus(this.stakeAmount).div(this.totalStakedMPHBalance.plus(this.stakeAmount)).times(100);\n    if (this.newStakedMPHPoolProportion.isNaN()) {\n      this.newStakedMPHPoolProportion = new BigNumber(0);\n    }\n    this.newRewardPerWeek = this.stakedMPHBalance.plus(this.stakeAmount).times(this.totalRewardPerSecond.div(this.totalStakedMPHBalance.plus(this.stakeAmount))).times(this.constants.WEEK_IN_SEC);\n    if (this.newRewardPerWeek.isNaN()) {\n      this.newRewardPerWeek = new BigNumber(0);\n    }\n  }\n\n  stake() {\n    const rewards = this.contract.getNamedContract('Rewards');\n    const mphToken = this.contract.getNamedContract('MPHToken');\n    const stakeAmount = this.helpers.processWeb3Number(this.stakeAmount.times(this.constants.PRECISION));\n    const func = rewards.methods.stake(stakeAmount);\n\n    this.wallet.sendTxWithToken(func, mphToken, rewards.options.address, stakeAmount, () => { }, () => { this.activeModal.dismiss() }, (error) => { this.wallet.displayGenericError(error) });\n  }\n\n  canContinue() {\n    return this.wallet.connected && this.stakeAmount.gt(0);\n  }\n}\n","<!-- Modal: modal-stake-mph -->\n<!-- IDEA: modal modalStake -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center\">\n        <div class=\"col-12 col-lg-6 col-xl-6 pt-0 pr-lg-5\">\n          <div class=\"row justify-content-center no-gutters\">\n            <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n              <h1 class=\"display-4 text-center\">\n                How much would you like to stake?\n              </h1>\n              <p class=\"text-white small text-center mb-5\">\n                Stake your MPH tokens to earn rewards.</p>\n              <div class=\"card\">\n                <div class=\"card-body\">\n                  <div class=\"form-group mb-0\">\n                    <label>Amount</label>\n                    <div class=\"input-group mb-2\">\n                      <input type=\"text\" class=\"form-control form-control-lg\" placeholder=\"0.00\"\n                        aria-label=\"stake-amount\" [value]=\"stakeAmount.toString()\"\n                        (input)=\"setStakeAmount($event.target.value)\">\n                      <div class=\"input-group-append\">\n                        <button class=\"card-link small px-1\" type=\"button\"\n                          (click)=\"setStakeAmount(this.mphBalance.toFixed(18))\">Max</button>\n                      </div>\n                    </div>\n                  </div>\n                  <small class=\"form-text text-white mb-2\">{{mphBalance.toFormat()}} MPH available</small>\n                  <div class=\"table-responsive\">\n                    <table class=\"table mb-0\">\n                      <tbody>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New share of the staking pool</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Your new % of shares in the MPH staking pool.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newStakedMPHPoolProportion.toFormat(4)}}%</h4>\n                            <span class=\"text-white\">Current: {{stakedMPHPoolProportion.toFormat(4)}}%</span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>New reward rate</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"The reward you earn every week.\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"text-right border-0\">\n                            <h4 class=\"mb-1 font-weight-normal glowing\">{{newRewardPerWeek.toFormat(4)}} DAI/week</h4>\n                            <span class=\"text-white\">Current: {{rewardPerWeek.toFormat(4)}} DAI/week</span>\n                          </td>\n                        </tr>\n                        <tr class=\"d-none\">\n                          <td class=\"px-0 text-white border-0\">\n                            <strong>Staking pool APY</strong>\n                            <button type=\"button\" class=\"btn btn-sm btn-link p-0 text-white\" placement=\"top\"\n                              ngbTooltip=\"Staking rewards APY annualized and compounded based on the last week\">\n                              [i]\n                            </button>\n                          </td>\n                          <td class=\"glowing text-right border-0\">\n                            0.0000%\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  <button class=\"card-link btn-block\" (click)=\"stake()\" [disabled]=\"!canContinue()\">Stake</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, OnInit } from '@angular/core';\nimport BigNumber from 'bignumber.js';\nimport { MerkleService } from '../merkle.service';\nimport { WalletService } from '../wallet.service';\n\n@Component({\n  selector: 'app-funding',\n  templateUrl: './funding.component.html',\n  styleUrls: ['./funding.component.css']\n})\nexport class FundingComponent implements OnInit {\n  claimAmount: BigNumber;\n  claimed: boolean;\n\n  constructor(\n    public wallet: WalletService,\n    public merkle: MerkleService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    this.loadData();\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    if (this.wallet.connected) {\n      const claim = this.merkle.getETHClaimForAddress(this.wallet.userAddress);\n      this.claimAmount = new BigNumber(claim.amount).div(1e18);\n\n      const distributor = this.merkle.getETHMerkleDistributor();\n      this.claimed = await distributor.methods.isClaimed(claim.index).call();\n    }\n  }\n\n  resetData() {\n    this.claimAmount = new BigNumber(0);\n    this.claimed = false;\n  }\n\n  claim() {\n    const distributor = this.merkle.getETHMerkleDistributor();\n    const claim = this.merkle.getETHClaimForAddress(this.wallet.userAddress);\n    const func = distributor.methods.claim(claim.index, this.wallet.userAddress, claim.amount, claim.proof);\n\n    this.wallet.sendTx(func, () => { }, () => { }, (error) => { this.wallet.displayGenericError(error) });\n  }\n}\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-2\">Apply for Funding - Help Grow 88mph</h1>\n          <p class=\"text-muted font-weight-bold mb-5\">\n            We provide grants for projects, initiatives, resources, NFTs, and events that encourage and develop the 88mph ecosystem and empower the community. We offer grants ranging from $100 - $5k worth of $MPH and distribute blocks of funds as individuals and teams reach predetermined milestones.\n          </p>\n          <div class=\"card-deck my-5\">\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase text-amber mt-n3 bg-dark pl-3\">\n                   Ecosystem grants\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  $100 - $5,000\n                </h2>                \n                <h5 class=\"mb-3 text-white pl-3\">Apply to help build 88mph & its ecosystem.</h5>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" onclick=\"location.href='https://forms.gle/K4t7DNaVrkGp8KK46';\" value=\"Go to Google Forms\">\n                  <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Apply for ecosystem grants\n                </button>\n              </div>\n            </div>\n            <div class=\"card mb-4 mb-lg-0\">\n              <div class=\"card-body pt-0\">\n                <!-- Title -->\n                <h5 class=\"text-uppercase mt-n3 bg-dark pl-3\">\n                   Community grants\n                </h5>\n                <!-- Heading -->\n                <h2 class=\"mb-3 glowing pl-3\">\n                  $100 - $2,000\n                </h2>\n                <h5 class=\"mb-3 text-white pl-3\">Apply to help other community members by creating initiatives or resources (contents creation, NFTs, meetups, etc.).</h5>\n                <button type=\"button\" class=\"card-link small ml-3 px-1\" onclick=\"location.href='https://forms.gle/K4t7DNaVrkGp8KK46';\" value=\"Go to Google Forms\">\n                  <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Apply for community grants\n                </button>\n              </div>\n            </div>\n          </div>\n          <h2 class=\"mb-2\">Get funded</h2>\n          <p class=\"text-muted font-weight-bold\">Please follow the steps below to apply for funding.\n            After submitting your application, please allow 5 to 10 business days for a response.</p>\n          <div class=\"list-group list-group-flush list-group-activity mb-5\">\n            <div class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col-auto\">\n\n                  <h2 class=\"text-center bg-dark\">\n                    <1>\n                  </h2>\n\n                </div>\n                <div class=\"col ml-n2\">\n\n                  <!-- Heading -->\n                  <h3>Create an Invoice on Request Network</h3>\n                  <p class=\"font-weight-bold\">\n                    Make Sure the Invoice is addressed to mcfly@88mph.app and the currency is set on $MPH.\n                  </p>\n                  <button type=\"button\" class=\"card-link small px-1 mr-3\" onclick=\"location.href='https://invoicing.request.network/';\" value=\"Go to Request Network\">\n                    <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Create invoice\n                  </button>\n                  <a class=\"text-purple\" href=\"https://request.network/en/invoicing/getting-started/\" target=\"_blank\">How-to <i class=\"fe fe-external-link\"></i></a>\n\n                </div>\n              </div> <!-- / .row -->\n            </div>\n            <div class=\"list-group-item\">\n              <div class=\"row\">\n                <div class=\"col-auto text-center\">\n\n                  <h2 class=\"text-center bg-dark\">\n                    <2>\n                  </h2>\n\n                </div>\n                <div class=\"col ml-n2\">\n                  <h3>Submit an Application</h3>\n                  <!-- Heading -->\n                  <p class=\"font-weight-bold\">\n                    This form gives us the information we need to decide on your funding request.\n                  </p>\n                  \n                  <button type=\"button\" class=\"card-link small mr-3 px-1 mb-3\" onclick=\"location.href='https://forms.gle/K4t7DNaVrkGp8KK46';\" value=\"Go to Google Forms\">\n                    <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Apply for a grant\n                  </button>\n                  <div class=\"alert alert-pink-blue rounded-0\">\n                    Make sure to read the requirements listed below. \n                  </div>\n                </div>\n              </div> <!-- / .row -->\n            </div>\n          </div>\n          <h2 class=\"mb-2\">Ecosystem Grants</h2>\n          <p class=\"text-muted font-weight-bold\">Ecosystem grants aim at improving and developing 88mph, and more generally the DeFi ecosystem. They are for individuals or teams looking to develop tools, projects that could benefit from grants.\n          </p>\n          <p>The following criteria are considered</p>\n          <ul>\n            <li>How it relates to 88mph protocol and the upcoming 88mph governance.</li>\n            <li>How it may benefit and impact the 88mph protocol and the 88mph community.</li>\n            <li>The status and progress of the teams MVP or previous projects (draft vs mainnet grade).</li>\n            <li>The team and how likely they are to deliver.</li>\n            <li>Projects longevity and/or business viability, feasibility, competitiveness, etc.</li>\n            <li>How the funds will be used and why they are needed.</li>\n          </ul>\n          <p>These grants are quite flexible in how they are awarded with demonstrating benefit to the 88mph system being most important. Existing and completed projects are also eligible.</p>\n          \n          <h2 class=\"mb-2\">Areas of research and interest</h2>\n          <p class=\"text-muted font-weight-bold\">We would like to suggest areas of research and interest for the 88mph ecosystem. Its by no means an exhaustive list. All applications related to the 88mph ecosystem are welcome, as long as your project contributes to the 88mph ecosystem or helps in some way.</p>\n          <ul>\n            <li>New protocol adapters (Eg. curve).</li>\n            <li>Porting to other chains and Ethereum L2 (HECO, BSC, Elrond, etc).</li>\n            <li>Protocols wishing to integrate with parts of the 88mph protocol.</li>\n            <li>External protocol strategies.</li>\n            <li>Translation.</li>\n            <li>Dune queries.</li>\n            <li>[Your idea, project, etc]</li>\n          </ul>\n          <h2 class=\"mb-2\">Community Grants</h2>\n          <p class=\"text-muted font-weight-bold\">Community grants aim at encouraging and developing the 88mph community and 88mph itself. Those grants will be received by users, content creators and projects supporting 88mph.\n            Those users may have helped out users, contributed in a meaningful way to the community, created content, guides, NFTs, etc.\n            Grants range from $100 to $2,000 to be paid in MPH.</p>\n          <p>A list of recipients will be circulated publicly before they are awarded.</p>\n          <p>Users or applications with questions may join this <a class=\"text-purple\" href=\"https://t.me/join88mph_grants\" target=\"_blank\">Telegram</a> or the Grants channel on <a class=\"text-purple\" href=\"https://discord.com/invite/QThgeYxDuM\" target=\"_blank\">88mph Discord</a>.</p>\n        </div>\n      </div> <!-- / .row -->\n\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->","<!-- modal modalBondDetails -->\n<div class=\"modal-dialog modal-dialog-vertical\" role=\"document\">\n  <div class=\"modal-content\">\n    <div class=\"modal-body pt-0 py-lg-0\">\n      <div class=\"row no-gutters\">\n        <div class=\"col-auto mr-auto\">\n          <button class=\"btn btn-link text-white pl-0\" type=\"button\" name=\"button\" data-dismiss=\"modal\"\n            aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\n            <i class=\"fe fe-arrow-left h2 mb-0\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row justify-content-center no-gutters\">\n        <div class=\"col-12 col-lg-10 pt-3 pb-5\">\n          <h1 class=\"display-4 text-center\">\n            {{poolInfo.protocol}} {{poolInfo.stablecoinSymbol}} -- {{zcbEntry.zcbInfo.series}}\n          </h1>\n          <p class=\"text-white small text-center mb-4\">\n            Mint this zero coupon bond, trade it on Sushiswap, or redeem\n            it 1-to-1 for {{poolInfo.stablecoinSymbol}} after maturation.\n          </p>\n          <div class=\"card mb-4 mb-lg-0\">\n            <div class=\"card-body py-0\">\n              <div class=\"row\">\n                <div class=\"col\">\n                  <h5 class=\"text-uppercase mt-n3 bg-light mb-0 pt-1 px-3\">Overview</h5>\n                </div>\n              </div>\n              <div class=\"row align-items-top no-gutters my-4\">\n                <div class=\"col-12 col-lg-4\">\n                  <h6 class=\"header-pretitle mb-2 pl-3\">\n                    Your ZCB balance\n                  </h6>\n                  <h2 class=\"mb-1 glowing pl-3\">{{zcbEntry.userBalance.toFormat(18)}} ZCB</h2>\n                  <div class=\"pl-3 mb-3 text-white d-block\">${{zcbEntry.userBalanceUSD.isNaN() ? 'N/A' : zcbEntry.userBalanceUSD.toFormat(2)}}</div>\n                  <a class=\"mb-3 pl-3\" href=\"https://app.sushi.com/swap?inputCurrency={{zcbEntry.zcbInfo.sushiSwapPairBaseTokenAddress}}&outputCurrency={{zcbEntry.zcbInfo.address}}\"\n                  target=\"_blank\">\n                    <button type=\"button\" class=\"card-link small px-1\">\n                      <i class=\"fe fe-refresh-ccw mr-2 align-bottom\"></i>Trade\n                    </button>\n                  </a>\n                  <a class=\"mb-3 text-purple pl-3\" href=\"https://etherscan.io/address/{{zcbEntry.zcbInfo.address}}\"\n                  target=\"_blank\">\n                    Etherscan<i class=\"fe fe-external-link ml-2\"></i>\n                  </a>\n                </div>\n                <div class=\"col-12 col-lg-8\">\n                  <div class=\"row\">\n                    <div class=\"col-12 col-md-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Maturation time\n                      </h6>\n                      <h4 class=\"mb-3 font-weight-normal glowing\">{{zcbEntry.maturationTimestamp.toLocaleString()}}</h4>\n                    </div>\n                    <div class=\"col-12 col-md-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Total supply\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">\n                        {{zcbEntry.totalSupply.toFormat(2)}} ZCB\n                      </h4>\n                      <div class=\"mb-3 text-white d-block\">${{zcbEntry.totalSupplyUSD.isNaN() ? 'N/A' : zcbEntry.totalSupplyUSD.toFormat(2)}}</div>\n                    </div>\n                    <div class=\"col-12 col-md-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Price on SushiSwap\n                      </h6>\n                      <h4 class=\"mb-1 font-weight-normal glowing\">${{zcbEntry.priceInUSD.isNaN() ? \"N/A\" : zcbEntry.priceInUSD.toFormat(2)}}</h4>\n                    </div>\n                    <div class=\"col-12 col-md-6\">\n                      <h6 class=\"header-pretitle mb-2\">\n                        Implied interest rate\n                      </h6>\n                      <h4 class=\"mb-3 font-weight-normal glowing\">{{zcbEntry.impliedInterestRate.isNaN() ? \"N/A\" : zcbEntry.impliedInterestRate.toFormat(2)}}%</h4>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <ul ngbNav #nav=\"ngbNav\" class=\"nav-tabs mx-n4 border-top px-5\">\n                <li ngbNavItem>\n                  <a ngbNavLink>Mint {{poolInfo.stablecoinSymbol}} ZCB</a>\n                  <ng-template ngbNavContent>\n                    <app-mint-zero-coupon-bond [zcbEntry]=\"zcbEntry\" [poolInfo]=\"poolInfo\">\n                    </app-mint-zero-coupon-bond>\n                  </ng-template>\n                </li>\n                <li ngbNavItem>\n                  <a ngbNavLink>Redeem ZCB's full-face value ({{poolInfo.stablecoinSymbol}})</a>\n                  <ng-template ngbNavContent>\n                    <app-redeem-zero-coupon-bond [zcbEntry]=\"zcbEntry\" [poolInfo]=\"poolInfo\">\n                    </app-redeem-zero-coupon-bond>\n                  </ng-template>\n                </li>\n                <li ngbNavItem>\n                  <a ngbNavLink>Withdraw MPH reward</a>\n                  <ng-template ngbNavContent>\n                    <app-withdraw-zero-coupon-bond [zcbEntry]=\"zcbEntry\" [poolInfo]=\"poolInfo\">\n                    </app-withdraw-zero-coupon-bond>\n                  </ng-template>\n                </li>\n                <li ngbNavItem>\n                  <a ngbNavLink>Liquidity mining <span class=\"badge glowing mt-n1\"> PAUSED </span></a>\n                  <ng-template ngbNavContent>\n                    <app-farm-zero-coupon-bond [zcbEntry]=\"zcbEntry\">\n                    </app-farm-zero-coupon-bond>\n                  </ng-template>\n                </li>\n              </ul>\n              <div class=\"row justify-content-center pt-4\">\n                <div [ngbNavOutlet]=\"nav\"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>","import { Component, Input, OnInit } from '@angular/core';\nimport { NgbActiveModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from 'src/app/constants.service';\nimport { ContractService, PoolInfo } from 'src/app/contract.service';\nimport { HelpersService } from 'src/app/helpers.service';\nimport { WalletService } from 'src/app/wallet.service';\nimport { ZeroCouponBondTableEntry } from '../zero-coupon-bonds.component';\n\n@Component({\n  selector: 'app-modal-zero-coupon-bond-info',\n  templateUrl: './modal-zero-coupon-bond-info.component.html',\n  styleUrls: ['./modal-zero-coupon-bond-info.component.css']\n})\nexport class ModalZeroCouponBondInfoComponent implements OnInit {\n  @Input() zcbEntry: ZeroCouponBondTableEntry;\n  @Input() poolInfo: PoolInfo;\n\n  constructor(\n    public activeModal: NgbActiveModal,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n  }\n\n  ngOnInit(): void {\n\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { BondsComponent } from './bonds/bonds.component';\nimport { FundingComponent } from './funding/funding.component';\nimport { ClaimETHComponent } from './claim-eth/claim-eth.component';\nimport { ClaimMPHComponent } from './claim-mph/claim-mph.component';\nimport { DepositComponent } from './deposit/deposit.component';\nimport { FarmingComponent } from './farming/farming.component';\nimport { RewardsComponent } from './rewards/rewards.component';\nimport { StatsComponent } from './stats/stats.component';\nimport { VestingComponent } from './vesting/vesting.component';\nimport { ZeroCouponBondsComponent } from './zero-coupon-bonds/zero-coupon-bonds.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DepositComponent,\n    pathMatch: 'full'\n  },\n  {\n    path: 'deposits',\n    component: DepositComponent\n  },\n  {\n    path: 'bonds',\n    component: BondsComponent\n  },\n  {\n    path: 'zero-coupon-bonds',\n    component: ZeroCouponBondsComponent\n  },\n  {\n    path: 'rewards',\n    component: RewardsComponent\n  },\n  {\n    path: 'stats',\n    component: StatsComponent\n  },\n  {\n    path: 'farming',\n    component: FarmingComponent\n  },\n  {\n    path: 'vesting',\n    component: VestingComponent\n  },\n  {\n    path: 'funding',\n    component: FundingComponent\n  },\n  {\n    path: 'claim-eth',\n    component: ClaimETHComponent\n  },\n  {\n    path: 'claim-mph',\n    component: ClaimMPHComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes, { relativeLinkResolution: 'legacy' })],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-center\">\n        <div class=\"col-12 col-lg-10 order-2 order-lg-1\">\n          <h1 class=\"mb-2\">Zero coupon bonds</h1>\n          <p class=\"text-muted font-weight-bold mb-3\">\n            Zero coupon bonds are a type of financial instrument that can be redeemed 1-to-1 for its underlying currency\n            upon maturation. Mint zero coupon bonds using your fixed-rate deposit, and get\n            instant liquidity on Sushiswap. <a class=\"text-purple\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n              Help <i class=\"fe fe-external-link\"></i>\n            </a>\n          </p>\n        </div>\n        <div class=\"col-12 col-lg-2 order-1 order-lg-2 mb-4 mb-lg-0\">\n          <a class=\"text-purple\" href=\"https://app.rarible.com/token/0xd07dc4262bcdbf85190c01c996b4c06a461d2430:159366:0x4ddc4a3b6813436e5d2ca27a9ac0be92bf3df0d4\" target=\"_blank\">\n            <img class=\"img-fluid mb-2 border border-white\" src=\"./assets/img/88mph_warakami_1k.gif\" alt=\"88mph_warakami\">\n            NFT  <i class=\"fe fe-external-link\"></i>\n          </a>\n        </div>\n      </div> <!-- / .row -->\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n\n<div class=\"container-fluid mb-6\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <h2 class=\"mt-n3 bg-dark mb-0 mx-3 pl-3\">Explore our zero coupon bond offerings</h2>\n        <div class=\"alert alert-pink-blue rounded-0 mb-0 mt-3 pl-4 d-none\">\n          Stake your ZCB SLP tokens and earn MPH rewards! Get started by clicking \"Manage\" in the ZCB series' row.\n        </div>\n        <div class=\"form-group m-4\">\n          <label for=\"pool-select\">Select pool</label>\n          <select class=\"custom-select\" id=\"pool-select\" data-toggle=\"select\"\n            (change)=\"selectPool($event.target.value)\">\n            <option value={{i}} *ngFor=\"let pool of allPoolList; index as i;\">\n              {{pool.stablecoinSymbol}} ({{pool.protocol}})\n            </option>\n          </select>\n        </div>\n\n        <div class=\"table-responsive mb-0\">\n          <table class=\"table table-sm table-nowrap card-table\">\n            <thead>\n              <tr>\n                <th class=\"text-dark\">\n                  Series\n                </th>\n                <th class=\"text-dark\">\n                  Your balance\n                </th>\n                <th class=\"text-dark\">\n                  Total Supply\n                </th>\n                <th class=\"text-dark\">\n                  Implied Interest Rate\n                </th>\n                <th class=\"text-dark\">\n\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"list\">\n              <tr class=\"border-left border-2 border-amber\" *ngFor=\"let zcbEntry of selectedPoolZCBList\">\n                <td>\n                  <h4 class=\"mb-0\">{{zcbEntry.zcbInfo.series}}</h4>\n                  <span class=\"badge mb-1\"\n                    [ngClass]=\"{'badge-soft-warning': zcbEntry.mature, 'badge-soft-success': !zcbEntry.mature}\">\n                    <ng-container *ngIf=\"zcbEntry.mature\">\n                      Mature\n                    </ng-container>\n                    <ng-container *ngIf=\"!zcbEntry.mature\">\n                      Active\n                    </ng-container>\n                  </span>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{zcbEntry.userBalance.toFormat(2)}} ZCB</h4>\n                  <span class=\"text-white d-block\">${{zcbEntry.userBalanceUSD.isNaN() ? 'N/A' :\n                    zcbEntry.userBalanceUSD.toFormat(2)}}</span>\n                  <div class=\"mt-3\">\n                    <!-- Button -->\n                    <a class=\"mr-3\" href=\"https://app.sushi.com/swap?inputCurrency={{zcbEntry.zcbInfo.sushiSwapPairBaseTokenAddress}}&outputCurrency={{zcbEntry.zcbInfo.address}}\" target=\"_blank\">\n                      <button type=\"button\" class=\"card-link small px-1\" [disabled]=\"wallet.watching\">\n                        <i class=\"fe fe-external-link mr-2 align-bottom\"></i>Trade\n                      </button>\n                    </a>\n                    <!-- Button -->\n                    <button type=\"button\" class=\"card-link small px-1\" (click)=\"openZCBModal(zcbEntry)\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-settings mr-2 align-bottom\"></i>Manage\n                    </button>\n                  </div>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{zcbEntry.totalSupply.toFormat(2)}} ZCB</h4>\n                  <span class=\"text-white d-block\">${{zcbEntry.totalSupplyUSD.isNaN() ? 'N/A' :\n                    zcbEntry.totalSupplyUSD.toFormat(2)}}</span>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{zcbEntry.impliedInterestRate.isNaN() ? \"N/A\" :\n                    zcbEntry.impliedInterestRate.toFormat(2)}}%</h4>\n                </td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService, PoolInfo, ZeroCouponBondInfo } from '../contract.service';\nimport { HelpersService } from '../helpers.service';\nimport { WalletService } from '../wallet.service';\nimport { ModalZeroCouponBondInfoComponent } from './modal-zero-coupon-bond-info/modal-zero-coupon-bond-info.component';\n\n@Component({\n  selector: 'app-zero-coupon-bonds',\n  templateUrl: './zero-coupon-bonds.component.html',\n  styleUrls: ['./zero-coupon-bonds.component.css']\n})\nexport class ZeroCouponBondsComponent implements OnInit {\n  allPoolList: PoolInfo[];\n  selectedPoolInfo: PoolInfo;\n  selectedPoolZCBList: ZeroCouponBondTableEntry[];\n  now: Date;\n\n  constructor(\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService,\n    private modalService: NgbModal\n  ) {\n    this.resetData(true, true);\n  }\n\n  ngOnInit(): void {\n    this.loadData(this.wallet.connected, true);\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData(true, false);\n      this.loadData(true, false);\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData(true, false);\n    });\n  }\n\n  resetData(resetUser: boolean, resetGlobal: boolean): void {\n    if (resetGlobal) {\n      this.now = new Date();\n    }\n  }\n\n  loadData(loadUser: boolean, loadGlobal: boolean): void {\n    if (loadGlobal) {\n      const zcbPoolNameList = this.contract.getZeroCouponBondPoolNameList();\n      this.allPoolList = zcbPoolNameList.map(poolName => this.contract.getPoolInfo(poolName));\n      this.selectPool(0);\n    }\n  }\n\n  selectPool(poolIdx: number) {\n    this.selectedPoolInfo = this.allPoolList[poolIdx];\n    this.selectedPoolZCBList = this.contract.getZeroCouponBondPool(this.selectedPoolInfo.name).map(zcbInfo => {\n      return {\n        zcbInfo,\n        totalSupply: new BigNumber(0),\n        totalSupplyUSD: new BigNumber(0),\n        userBalance: new BigNumber(0),\n        userBalanceUSD: new BigNumber(0),\n        maturationTimestamp: new Date(),\n        priceInUSD: new BigNumber(0),\n        impliedInterestRate: new BigNumber(0),\n        mature: false\n      }\n    });\n\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    Promise.all(this.selectedPoolZCBList.map(async zcbEntry => {\n      const zcbContract = this.contract.getZeroCouponBondContract(zcbEntry.zcbInfo.address, readonlyWeb3);\n      const tokenDecimals = this.selectedPoolInfo.stablecoinDecimals;\n      const tokenPrecision = Math.pow(10, tokenDecimals);\n      zcbEntry.priceInUSD = await this.getZeroCouponBondPriceUSD(zcbEntry.zcbInfo);\n      zcbEntry.totalSupply = new BigNumber(await zcbContract.methods.totalSupply().call()).div(tokenPrecision);\n      zcbEntry.totalSupplyUSD = zcbEntry.priceInUSD.times(zcbEntry.totalSupply);\n      zcbEntry.maturationTimestamp = new Date(+(await zcbContract.methods.maturationTimestamp().call()) * 1e3);\n      if (this.wallet.connected && !this.wallet.watching) {\n        zcbEntry.userBalance = new BigNumber(await zcbContract.methods.balanceOf(this.wallet.userAddress).call()).div(tokenPrecision);\n        zcbEntry.userBalanceUSD = zcbEntry.priceInUSD.times(zcbEntry.userBalance);\n      } else if (this.wallet.watching) {\n        zcbEntry.userBalance = new BigNumber(await zcbContract.methods.balanceOf(this.wallet.watchedAddress).call()).div(tokenPrecision);\n        zcbEntry.userBalanceUSD = zcbEntry.priceInUSD.times(zcbEntry.userBalance);\n      }\n      zcbEntry.impliedInterestRate = await this.computeImpliedInterestRate(zcbEntry);\n      zcbEntry.mature = zcbEntry.maturationTimestamp <= new Date();\n      return zcbEntry;\n    })).then(zcbList => this.selectedPoolZCBList = zcbList);\n  }\n\n  openZCBModal(zcbEntry: ZeroCouponBondTableEntry) {\n    const modalRef = this.modalService.open(ModalZeroCouponBondInfoComponent, { windowClass: 'fullscreen' });\n    modalRef.componentInstance.poolInfo = this.selectedPoolInfo;\n    modalRef.componentInstance.zcbEntry = zcbEntry;\n  }\n\n  async getZeroCouponBondPriceUSD(bond: ZeroCouponBondInfo): Promise<BigNumber> {\n    const readonlyWeb3 = this.wallet.readonlyWeb3();\n    const pair = this.contract.getContract(bond.sushiSwapPair, 'MPHLP', readonlyWeb3);\n    const reservesObj = await pair.methods.getReserves().call();\n    if (+reservesObj._reserve0 === 0 || +reservesObj._reserve1 === 0) {\n      // no liquidity, return NaN\n      return new BigNumber(NaN);\n    }\n    const baseToken = this.contract.getERC20(bond.sushiSwapPairBaseTokenAddress, readonlyWeb3);\n    const baseTokenPrecision = Math.pow(10, +await baseToken.methods.decimals().call());\n    let baseTokenReserve;\n    let bondReserve;\n    if (new BigNumber(bond.sushiSwapPairBaseTokenAddress, 16).lt(new BigNumber(bond.address, 16))) {\n      // base token is token0\n      baseTokenReserve = new BigNumber(reservesObj._reserve0).div(baseTokenPrecision);\n      bondReserve = new BigNumber(reservesObj._reserve1).div(Math.pow(10, this.selectedPoolInfo.stablecoinDecimals));\n    } else {\n      // base token is token1\n      bondReserve = new BigNumber(reservesObj._reserve0).div(Math.pow(10, this.selectedPoolInfo.stablecoinDecimals));\n      baseTokenReserve = new BigNumber(reservesObj._reserve1).div(baseTokenPrecision);\n    }\n    const bondPriceInBaseToken = baseTokenReserve.div(bondReserve);\n    const baseTokenPriceInUSD = await this.helpers.getTokenPriceUSD(bond.sushiSwapPairBaseTokenAddress);\n    return bondPriceInBaseToken.times(baseTokenPriceInUSD);\n  }\n\n  async computeImpliedInterestRate(zcbEntry: ZeroCouponBondTableEntry): Promise<BigNumber> {\n    const underlyingPrice = await this.helpers.getTokenPriceUSD(this.selectedPoolInfo.stablecoin);\n    const roi = new BigNumber(underlyingPrice).div(zcbEntry.priceInUSD).minus(1);\n    const secondsToMaturation = (zcbEntry.maturationTimestamp.getTime() - this.now.getTime()) / 1e3;\n    if (secondsToMaturation <= 0) {\n      // already mature\n      return new BigNumber(NaN);\n    }\n    const apy = roi.div(secondsToMaturation).times(this.constants.YEAR_IN_SEC).times(100);\n    return apy;\n  }\n}\n\nexport interface ZeroCouponBondTableEntry {\n  zcbInfo: ZeroCouponBondInfo;\n  totalSupply: BigNumber;\n  totalSupplyUSD: BigNumber;\n  userBalance: BigNumber;\n  userBalanceUSD: BigNumber;\n  maturationTimestamp: Date;\n  priceInUSD: BigNumber;\n  impliedInterestRate: BigNumber;\n  mature: boolean;\n}\n","<!-- HEADER -->\n<div class=\"header pt-4\">\n  <div class=\"container-fluid\">\n\n    <!-- Body -->\n    <div class=\"header-body border-0 p-0\">\n      <div class=\"row align-items-end\">\n        <div class=\"col\">\n          <h1 class=\"mb-2\">Vested MPH rewards</h1>\n          <p class=\"text-muted font-weight-bold mb-5\">Fixed-interest rate bond (FIRB) holders get MPH rewards linearly vested over 14, 30, or 270 days according to the FIRB pools selected. Withdraw\n            your MPH rewards here. <a class=\"text-purple\" href=\"https://docs.88mph.app/\" target=\"_blank\">\n              Help <i class=\"fe fe-external-link\"></i>\n            </a></p>\n        </div>\n      </div> <!-- / .row -->\n    </div> <!-- / .header-body -->\n\n  </div>\n</div> <!-- / .header -->\n\n<div class=\"container-fluid mb-6\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <div class=\"card\">\n        <h2 class=\"mt-n3 bg-dark mb-0 mx-3 pl-3\">Your vested MPH</h2>\n        <div class=\"table-responsive mb-0\">\n          <table class=\"table table-sm table-nowrap card-table\">\n            <thead>\n              <tr>\n                <th class=\"text-dark\">\n                  #\n                </th>\n                <th class=\"text-dark\">\n                  Full Amount\n                </th>\n                <th class=\"text-dark\">\n                  Withdrawn Amount\n                </th>\n                <th class=\"text-dark\">\n                  Current Withdrawable Amount\n                </th>\n                <th class=\"text-dark\">\n\n                </th>\n              </tr>\n            </thead>\n            <tbody class=\"list\">\n              <tr class=\"border-left border-2 border-amber\" *ngFor=\"let vest of vestList\">\n                <td>\n                  <div class=\"d-flex align-items-center\">\n                    <div class=\"ml-3\">\n\n                      <h4 class=\"mb-0\">#{{getIdxOfVest(vest)}}</h4>\n\n                      <!-- badge -->\n                      <span class=\"badge mb-1\"\n                        [ngClass]=\"{'badge-soft-danger': vest.locked, 'badge-soft-success': !vest.locked}\">\n                        <ng-container *ngIf=\"vest.locked\">\n                          Locked\n                        </ng-container>\n                        <ng-container *ngIf=\"!vest.locked\">\n                          Unlocked\n                        </ng-container>\n                      </span>\n\n                      <!-- Text -->\n                      <small class=\"text-white d-block\">{{vest.countdownTimer.days}}d\n                        {{vest.countdownTimer.hours}}h {{vest.countdownTimer.minutes}}m\n                        {{vest.countdownTimer.seconds}}s left</small>\n\n                    </div>\n                  </div>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{vest.amount.toFormat(4)}} MPH</h4>\n                  <span class=\"text-white\">${{vest.amount.times(mphPriceUSD).toFormat(4)}}</span>\n                  <div class=\"mt-3\">\n                    <!-- Button -->\n                    <button type=\"button\" class=\"card-link small small px-1\" (click)=\"withdraw(vest)\"\n                    *ngIf=\"getCurrentWithdrawableAmount(vest).gt(0)\" [disabled]=\"wallet.watching\">\n                      <i class=\"fe fe-arrow-down mr-2 align-bottom\"></i>Withdraw\n                    </button>\n                  </div>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{vest.withdrawnAmount.toFormat(4)}} MPH</h4>\n                  <span class=\"text-white\">${{vest.withdrawnAmount.times(mphPriceUSD).toFormat(4)}}</span>\n                </td>\n                <td>\n                  <h4 class=\"mb-1 font-weight-normal glowing\">{{getCurrentWithdrawableAmount(vest).toFormat(4)}} MPH\n                  </h4>\n                  <span class=\"text-white\">${{getCurrentWithdrawableAmount(vest).times(mphPriceUSD).toFormat(4)}}</span>\n                </td>\n                <td class=\"text-right\"></td>\n                <td></td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { ApolloQueryResult } from '@apollo/client/core';\nimport { Apollo } from 'apollo-angular';\nimport gql from 'graphql-tag';\nimport BigNumber from 'bignumber.js';\nimport { ConstantsService } from '../constants.service';\nimport { ContractService } from '../contract.service';\nimport { HelpersService } from '../helpers.service';\nimport { Timer } from '../timer';\nimport { WalletService } from '../wallet.service';\n\nconst mockData = [\n  {\n    id: '0xc0FcF8403e10B65f1D18f1B81b093004B1127275---0',\n    amount: 123.45,\n    vestPeriodInSeconds: 7 * 24 * 60 * 60,\n    creationTimestamp: 1606183067,\n    withdrawnAmount: 100,\n  },\n  {\n    id: '0xc0FcF8403e10B65f1D18f1B81b093004B1127275---1',\n    amount: 3123.45,\n    vestPeriodInSeconds: 10 * 24 * 60 * 60,\n    creationTimestamp: 1605297600,\n    withdrawnAmount: 20,\n  }\n];\n\n@Component({\n  selector: 'app-vesting',\n  templateUrl: './vesting.component.html',\n  styleUrls: ['./vesting.component.css']\n})\nexport class VestingComponent implements OnInit {\n  mphPriceUSD: BigNumber;\n  vestList: Vest[];\n  now: number;\n\n  constructor(\n    private apollo: Apollo,\n    public wallet: WalletService,\n    public contract: ContractService,\n    public helpers: HelpersService,\n    public constants: ConstantsService\n  ) {\n    this.resetData();\n  }\n\n  ngOnInit(): void {\n    if (this.wallet.connected || this.wallet.watching) {\n      this.loadData();\n    }\n    this.wallet.connectedEvent.subscribe(() => {\n      this.resetData();\n      this.loadData();\n    });\n    this.wallet.disconnectedEvent.subscribe(() => {\n      this.resetData();\n    });\n  }\n\n  async loadData() {\n    //const userID = this.wallet.userAddress.toLowerCase();\n    let userID;\n    if (this.wallet.connected && !this.wallet.watching) {\n      userID = this.wallet.userAddress.toLowerCase();\n    } else if (this.wallet.watching) {\n      userID = this.wallet.watchedAddress.toLowerCase();\n    } else {\n      userID = '';\n    }\n    const queryString = gql`\n      {\n        vests(where: { user: \"${userID}\" }, orderBy: creationTimestamp, orderDirection: desc, first: 1000) {\n          id\n          amount\n          vestPeriodInSeconds\n          creationTimestamp\n          withdrawnAmount\n        }\n      }\n    `\n\n    this.apollo.query<QueryResult>({\n      query: queryString\n    }).subscribe((x) => this.handleData(x));\n\n    this.helpers.getMPHPriceUSD().then((price) => {\n      this.mphPriceUSD = price;\n    });\n  }\n\n  async handleData(queryResult: ApolloQueryResult<QueryResult>) {\n    if (!queryResult.loading) {\n      const vests = queryResult.data.vests;\n\n      this.now = Date.now() / 1e3;\n\n      if (vests) {\n        const vestList = [];\n        for (let vest of vests) {\n          const fullyVestTimestamp = +vest.creationTimestamp + +vest.vestPeriodInSeconds;\n          const vestObj: Vest = {\n            id: vest.id,\n            amount: new BigNumber(vest.amount),\n            vestPeriodInSeconds: +vest.vestPeriodInSeconds,\n            creationTimestamp: +vest.creationTimestamp,\n            withdrawnAmount: new BigNumber(vest.withdrawnAmount),\n            countdownTimer: new Timer(fullyVestTimestamp, 'down'),\n            locked: this.now < fullyVestTimestamp\n          };\n          vestObj.countdownTimer.start();\n          vestList.push(vestObj);\n        }\n        this.vestList = vestList;\n      }\n    }\n  }\n\n  resetData() {\n    this.mphPriceUSD = new BigNumber(0);\n    this.vestList = [];\n    this.now = 0;\n  }\n\n  getCurrentWithdrawableAmount(vest: Vest): BigNumber {\n    if (vest.locked) {\n      // partially vested\n      return vest.amount.times(this.now - vest.creationTimestamp).div(vest.vestPeriodInSeconds).minus(vest.withdrawnAmount);\n    } else {\n      // fully vested\n      return vest.amount.minus(vest.withdrawnAmount);\n    }\n  }\n\n  getIdxOfVest(vest: Vest): number {\n    // TODO: hack, change later\n    return +(vest.id.split('---')[1]);\n  }\n\n  withdraw(vest: Vest) {\n    const vesting = this.contract.getNamedContract('Vesting');\n    const func = vesting.methods.withdrawVested(this.wallet.userAddress, this.getIdxOfVest(vest));\n\n    this.wallet.sendTx(func, () => { }, () => { this.loadData(); }, (error) => { this.wallet.displayGenericError(error) });\n  }\n}\n\ninterface QueryResult {\n  vests: {\n    id: string;\n    amount: number;\n    vestPeriodInSeconds: number;\n    creationTimestamp: number;\n    withdrawnAmount: number;\n  }[];\n}\n\ninterface Vest {\n  id: string;\n  amount: BigNumber;\n  vestPeriodInSeconds: number;\n  creationTimestamp: number;\n  withdrawnAmount: BigNumber;\n  countdownTimer: Timer;\n  locked: boolean;\n}\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"zn8P\";"]}